import{a as Au}from"./chunk-7QUSO454.js";import{a as pu}from"./chunk-CA6A647B.js";import{a as mu}from"./chunk-WVBZMZSH.js";import{a as _u}from"./chunk-X3KZIUM7.js";import{a as gu}from"./chunk-Q2P6VIS3.js";import{b as Cu,t as ku}from"./chunk-5SU3EJ5L.js";import"./chunk-ZVDR33DT.js";import"./chunk-UXCGGH5E.js";import{X as xu,_ as Mu,n as Iu,z as Pu}from"./chunk-LX3UHQW6.js";import{A as cs,Aa as Dt,B as us,Ba as fe,C as su,Ca as Eu,D as ds,Da as hs,E as ru,F as ou,G as au,H as lu,I as cu,J as uu,Ja as Su,K as du,L as hu,M as fu,S as yu,ja as ye,ka as Fe,la as Nt,ma as Kt,na as rt,oa as to,p as Fc,pa as vu,qa as wu,ra as Ae,sa as Ne,t as zc,ta as Ee,u as Gt,ua as Xt,v as os,va as tn,w as as,wa as bt,x as iu,xa as Rt,y as nu,ya as bu,z as ls,za as V}from"./chunk-TG3EBB6J.js";import"./chunk-MEPSNECI.js";import{$ as rs,C as is,D as le,E as qc,F as Yc,G as je,H as At,I as ns,J as Ji,K as Gc,L as Kc,O as Xc,Q as U,R as Me,S as he,T as Zr,U as Qc,V as en,W as ke,X as bi,Y as ss,Z as Jr,_ as Zc,a as F,b as wi,c as $c,ca as Jc,d as Bc,ea as eu,f as Wc,fa as tu,ha as eo,i as Te,ia as Ei,j as Xr,k as Uc,l as jc,m as Hc,o as Qr,s as Vc,u as st}from"./chunk-TIHGZPVW.js";import{a as Tu}from"./chunk-U236J6UY.js";import{t as Rc,u as Dc,x as Oc,y as Lc}from"./chunk-66IJJE2M.js";import"./chunk-7CTHC25S.js";import{a as Mc,b as kc,c as Ac}from"./chunk-5HBASDUF.js";import{h as Nc}from"./chunk-RZTW2YQF.js";import{$ as ne,$c as Pc,A as Yt,C as Jl,D as gi,De as kt,Ea as hc,Ec as Jn,F as ec,Fa as nt,Fd as xc,Ga as ge,Gc as vc,Hb as Mt,Ja as fc,Jc as wc,K as zr,Kc as bc,L as tc,La as yt,Lc as es,M as ic,O as nc,Oa as _i,Oc as Ec,Pa as be,Pc as Yr,Q as de,Qc as ts,R as $r,Rc as Gr,Sc,T as sc,Ta as pc,Tc as Cc,U as rc,V as oc,Wa as mc,Xa as jr,Y as q,Yc as Tc,Z as ac,Zc as Ic,a as Vl,aa as we,ad as vi,b as Le,ba as xt,c as pi,ca as W,d as ql,da as Qe,dd as Kr,ea as lc,f as Yl,fa as cc,fb as Hr,ga as Br,gb as _t,h as Gl,ha as Wr,hb as vt,i as mt,ib as Zn,j as gt,ka as uc,l as mi,la as dc,m as Qn,o as Kl,p as ve,pb as gc,r as Xl,rb as Vr,s as Ql,tb as qr,uc as yc,v as Zl,x as Zi,xa as yi,xc as _c,y as Pt,ya as Ur,ye as wt,z as qt}from"./chunk-HFJXCNTT.js";import"./chunk-3AORW5YP.js";import{a as ue,b as Kn,d as Hl,k as Xn}from"./chunk-BI7C37SH.js";var Ru=(()=>{let e=class e{constructor(n){this.router=n,this.devicetype="",this.devicetype=this.getMobileOperatingSystem()}ngOnInit(){this.devicetype!=""&&this.redirectToPlayStore()}getMobileOperatingSystem(){var n=navigator.userAgent||navigator.vendor;return/windows phone/i.test(n)?"Windows Phone":/android/i.test(n)?"Android":/iPad|iPhone|iPod/.test(n)?"IOs":"unknown"}redirectToPlayStore(){this.devicetype=="Android"?window.location.href="https://play.google.com/store/apps/details?id=com.starbucks.in":this.devicetype=="IOs"?window.location.href="https://apps.apple.com/in/app/starbucks-india/id1210203958":this.devicetype=="unknown"&&window.location.replace("https://www.starbucks.in/dashboard")}};e.\u0275fac=function(s){return new(s||e)(yt(vi))},e.\u0275cmp=_i({type:e,selectors:[["app-app-download"]],decls:0,vars:0,template:function(s,r){},encapsulation:2});let i=e;return i})();var em=[{path:"",pathMatch:"full",redirectTo:"/dashboard"},{path:"dashboard",loadChildren:()=>import("./chunk-G4GAXBOP.js").then(i=>i.DashboardModule)},{path:"login",loadChildren:()=>import("./chunk-ROYSYR65.js").then(i=>i.LoginModule)},{path:"welcome",loadChildren:()=>import("./chunk-EYMUEUBG.js").then(i=>i.WelcomePageModule)},{path:"registration",loadChildren:()=>import("./chunk-QSVV2SMY.js").then(i=>i.RegistrationModule)},{path:"events",loadChildren:()=>import("./chunk-ST3SHKAQ.js").then(i=>i.OnlineEventsModule)},{path:"rewards",loadChildren:()=>import("./chunk-4TVUG5NA.js").then(i=>i.RewardsModule)},{path:"pay",loadChildren:()=>import("./chunk-HH34MY4X.js").then(i=>i.PaymentModule)},{path:"ordering",loadChildren:()=>import("./chunk-42CP6D5T.js").then(i=>i.OrderingModule)},{path:"giftcards",loadChildren:()=>import("./chunk-RZ467NQU.js").then(i=>i.GiftCardsModule)},{path:"corporate-gifting",loadChildren:()=>import("./chunk-7WGV6O6M.js").then(i=>i.CorporateGiftingModule)},{path:"corporate-gifting-global-search",component:Cu},{path:"gc/pgactivity",component:gu},{path:"manage-card",loadChildren:()=>import("./chunk-JFW5GFDI.js").then(i=>i.ManageCardModule)},{path:"payment-activity",component:pu},{path:"store-locator",loadChildren:()=>import("./chunk-CDP6LBQH.js").then(i=>i.StoreModule)},{path:"profile",loadChildren:()=>import("./chunk-CYWV7L2C.js").then(i=>i.UserProfileModule)},{path:"order-track",loadChildren:()=>import("./chunk-7U3257B4.js").then(i=>i.OrderTrackModule)},{path:"discover-more-articles",loadChildren:()=>import("./chunk-VHD7GUT6.js").then(i=>i.DiscoverMoreArticlesModule)},{path:"saved-blogs",component:Fc},{path:"Blogs",component:zc},{path:"terms-and-conditions",loadChildren:()=>import("./chunk-EGOXBTHS.js").then(i=>i.TermsAndConditionsListingModule)},{path:"search",loadChildren:()=>import("./chunk-L5PKIYDQ.js").then(i=>i.GlobalSearchModule)},{path:"subscription",loadChildren:()=>import("./chunk-VQE4UB6R.js").then(i=>i.SubscriptionModule)},{path:"subscription-order",component:mu},{path:"articles",loadChildren:()=>import("./chunk-J32ATKJP.js").then(i=>i.FooterContentModule)},{path:"whatsapp",loadChildren:()=>import("./chunk-QEYRE62J.js").then(i=>i.WhatsappModule)},{path:"CampaignDetail",loadChildren:()=>import("./chunk-ZWIEYFXW.js").then(i=>i.SingleUseCouponModule)},{path:"masterbrewingclass",loadChildren:()=>import("./chunk-EFESG4YU.js").then(i=>i.MasterBrewingClassModule)},{path:"appdownload",component:Ru},{path:":url",loadChildren:()=>import("./chunk-J32ATKJP.js").then(i=>i.FooterContentModule)},{path:"**",component:_u}],Du=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=be({type:e}),e.\u0275inj=we({imports:[Kr.forRoot(em,{scrollPositionRestoration:"enabled"}),Kr]});let i=e;return i})();var io=class{constructor(e,t){this.source=e,e.initialize&&e.initialize(t)}subscribe(e){this.sub=this.source.onInterrupt.subscribe(e)}unsubscribe(){this.sub.unsubscribe(),this.sub=null}resume(){this.source.attach()}pause(){this.source.detach()}},nn=class{constructor(){this.idValue=new Date,this.idlingValue=!1}id(e){if(e!==void 0){if(!e)throw new Error("A value must be specified for the ID.");this.idValue=e}return this.idValue}idling(e){return e!==void 0&&(this.idlingValue=e),this.idlingValue}now(){return new Date}isExpired(){let e=this.last();return e!=null&&e<=this.now()}},no=class{constructor(){this.storageMap={}}get length(){return Object.keys(this.storageMap).length}clear(){this.storageMap={}}getItem(e){return typeof this.storageMap[e]<"u"?this.storageMap[e]:null}key(e){return Object.keys(this.storageMap)[e]||null}removeItem(e){this.storageMap[e]=void 0}setItem(e,t){this.storageMap[e]=t}},Lu=(()=>{let e=class e{constructor(){this.storage=this.getStorage()}getStorage(){try{let n=localStorage;return n.setItem("ng2IdleStorage",""),n.removeItem("ng2IdleStorage"),n}catch{return new no}}getItem(n){return this.storage.getItem("ng2Idle."+n)}removeItem(n){this.storage.removeItem("ng2Idle."+n)}setItem(n,s){this.storage.setItem("ng2Idle."+n,s)}_wrapped(){return this.storage}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),so=(()=>{let e=class e extends nn{constructor(n){super(),this.localStorage=n,this.idleName="main"}last(n){return n!==void 0&&this.setExpiry(n),this.getExpiry()}idling(n){return n!==void 0&&this.setIdling(n),this.getIdling()}getIdleName(){return this.idleName}setIdleName(n){n&&(this.idleName=n)}getExpiry(){let n=this.localStorage.getItem(this.idleName+".expiry");return n?new Date(parseInt(n,10)):null}setExpiry(n){n?this.localStorage.setItem(this.idleName+".expiry",n.getTime().toString()):this.localStorage.removeItem(this.idleName+".expiry")}getIdling(){let n=this.localStorage.getItem(this.idleName+".idling");return n?n==="true":!1}setIdling(n){n?this.localStorage.setItem(this.idleName+".idling",n.toString()):this.localStorage.setItem(this.idleName+".idling","false")}};e.\u0275fac=function(s){return new(s||e)(W(Lu))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),Si=class{},fs=(function(i){return i[i.disabled=0]="disabled",i[i.idle=1]="idle",i[i.notIdle=2]="notIdle",i})(fs||{}),uo=(()=>{let e=class e{constructor(n,s,r,o){this.expiry=n,this.zone=s,this.platformId=o,this.idle=1200,this.timeoutVal=30,this.autoResume=fs.idle,this.interrupts=new Array,this.running=!1,this.keepaliveEnabled=!1,this.onIdleStart=new nt,this.onIdleEnd=new nt,this.onTimeoutWarning=new nt,this.onTimeout=new nt,this.onInterrupt=new nt,r&&(this.keepaliveSvc=r,this.keepaliveEnabled=!0),this.setIdling(!1)}setIdleName(n){if(this.expiry instanceof so)this.expiry.setIdleName(n);else throw new Error("Cannot set expiry key name because no LocalStorageExpiry has been provided.")}getKeepaliveEnabled(){return this.keepaliveEnabled}setKeepaliveEnabled(n){if(!this.keepaliveSvc)throw new Error("Cannot enable keepalive integration because no KeepaliveSvc has been provided.");return this.keepaliveEnabled=n}getTimeout(){return this.timeoutVal}setTimeout(n){if(n===!1)this.timeoutVal=0;else if(typeof n=="number"&&n>=0)this.timeoutVal=n;else throw new Error("'seconds' can only be 'false' or a positive number.");return this.timeoutVal}getIdle(){return this.idle}setIdle(n){if(n<=0)throw new Error("'seconds' must be greater zero");return this.idle=n}getAutoResume(){return this.autoResume}setAutoResume(n){return this.autoResume=n}setInterrupts(n){this.clearInterrupts();let s=this;for(let r of n){let o={platformId:this.platformId},a=new io(r,o);a.subscribe(l=>{s.interrupt(l.force,l.innerArgs)}),this.interrupts.push(a)}return this.interrupts}getInterrupts(){return this.interrupts}clearInterrupts(){for(let n of this.interrupts)n.pause(),n.unsubscribe();this.interrupts.length=0}isRunning(){return this.running}isIdling(){return this.idling}watch(n){this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle");let s=this.timeoutVal?this.timeoutVal:0;if(!n){let o=new Date(this.expiry.now().getTime()+(this.idle+s)*1e3);this.expiry.last(o)}this.idling&&this.toggleState(),this.running||(this.startKeepalive(),this.toggleInterrupts(!0)),this.running=!0;let r=()=>{this.zone.run(()=>{this.getExpiryDiff(s)>0?(this.safeClearInterval("idleHandle"),this.setIdleIntervalOutsideOfZone(r,1e3)):this.toggleState()})};this.setIdleIntervalOutsideOfZone(r,1e3)}setIdleIntervalOutsideOfZone(n,s){this.zone.runOutsideAngular(()=>{this.idleHandle=setInterval(n,s)})}stop(){this.stopKeepalive(),this.toggleInterrupts(!1),this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle"),this.setIdling(!1),this.running=!1,this.expiry.last(null)}timeout(){this.stopKeepalive(),this.toggleInterrupts(!1),this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle"),this.setIdling(!0),this.running=!1,this.countdown=0,this.onTimeout.emit(null)}interrupt(n,s){if(this.running){if(this.timeoutVal&&this.expiry.isExpired()){this.timeout();return}this.onInterrupt.emit(s),(n===!0||this.autoResume===fs.idle||this.autoResume===fs.notIdle&&!this.expiry.idling())&&this.watch(n)}}setIdling(n){this.idling=n,this.expiry.idling(n)}toggleState(){this.setIdling(!this.idling),this.idling?(this.onIdleStart.emit(null),this.stopKeepalive(),this.timeoutVal>0&&(this.countdown=this.timeoutVal,this.doCountdown(),this.setTimeoutIntervalOutsideZone(()=>{this.doCountdownInZone()},1e3))):(this.toggleInterrupts(!0),this.onIdleEnd.emit(null),this.startKeepalive()),this.safeClearInterval("idleHandle")}setTimeoutIntervalOutsideZone(n,s){this.zone.runOutsideAngular(()=>{this.timeoutHandle=setInterval(()=>{n()},s)})}toggleInterrupts(n){for(let s of this.interrupts)n?s.resume():s.pause()}getExpiryDiff(n){let s=this.expiry.now();return(this.expiry.last()||s).getTime()-s.getTime()-n*1e3}doCountdownInZone(){this.zone.run(()=>{this.doCountdown()})}doCountdown(){let n=this.getExpiryDiff(this.timeoutVal);if(n>0){this.safeClearInterval("timeoutHandle"),this.interrupt(!0);return}if(!this.idling)return;if(this.countdown<=0){this.timeout();return}this.onTimeoutWarning.emit(this.countdown);let s=(this.timeoutVal-1)*1e3+n;this.countdown=Math.round(s/1e3)}safeClearInterval(n){let s=this[n];s!==null&&typeof s<"u"&&(clearInterval(this[n]),this[n]=null)}startKeepalive(){!this.keepaliveSvc||!this.keepaliveEnabled||(this.running&&this.keepaliveSvc.ping(),this.keepaliveSvc.start())}stopKeepalive(){!this.keepaliveSvc||!this.keepaliveEnabled||this.keepaliveSvc.stop()}ngOnDestroy(){this.stop(),this.clearInterrupts()}};e.\u0275fac=function(s){return new(s||e)(W(nn),W(ge),W(Si,8),W(yi,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),ro=class{constructor(e,t,n=!1){this.source=e,this.innerArgs=t,this.force=n}},oo=class{constructor(e,t){this.attachFn=e,this.detachFn=t,this.isAttached=!1,this.onInterrupt=new nt}attach(){if(Zone.current.get("isAngularZone")===!0){Zone.current.parent.run(()=>this.attach());return}!this.isAttached&&this.attachFn&&this.attachFn(this),this.isAttached=!0}detach(){this.isAttached&&this.detachFn&&this.detachFn(this),this.isAttached=!1}},Ou=500,ps=class extends oo{constructor(e,t,n){super(null,null),this.target=e,this.events=t,this.opts=n,this.eventSubscription=new Vl,typeof this.opts=="number"&&(this.opts={throttleDelay:this.opts,passive:!1}),this.opts=this.opts||{passive:!1,throttleDelay:Ou},(this.opts.throttleDelay===void 0||this.opts.throttleDelay===null)&&(this.opts.throttleDelay=Ou),this.throttleDelay=this.opts.throttleDelay,this.passive=!!this.opts.passive}initialize(e){if(e?.platformId&&vc(e.platformId))return;let t=typeof this.target=="function"?this.target():this.target,n=this.passive?{passive:!0}:null,s=this.events.split(" ").map(o=>Zl(t,o,n));this.eventSrc=Zi(...s),this.eventSrc=this.eventSrc.pipe(qt(o=>!this.filterEvent(o))),this.throttleDelay>0&&(this.eventSrc=this.eventSrc.pipe(rc(this.throttleDelay)));let r=o=>this.onInterrupt.emit(new ro(this,o));this.attachFn=()=>this.eventSubscription=this.eventSrc.subscribe(r),this.detachFn=()=>this.eventSubscription.unsubscribe()}filterEvent(e){return!1}get options(){return{passive:this.passive,throttleDelay:this.throttleDelay}}},ao=class extends ps{constructor(e,t){super(()=>document.documentElement,e,t)}filterEvent(e){return!!(e.type==="mousemove"&&(e.originalEvent&&e.originalEvent.movementX===0&&e.originalEvent.movementY===0||e.movementX!==void 0&&!e.movementX||!e.movementY))}},lo=class extends ps{constructor(e,t){super(()=>window,e,t)}},co=class extends lo{constructor(e=500){super("storage",e)}filterEvent(e){return!(e.key&&e.key.indexOf("ng2Idle.")>=0&&e.key.indexOf(".expiry")>=0)}};var Fu=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[so,{provide:nn,useExisting:so},uo]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=be({type:e}),e.\u0275inj=we({providers:[Lu]});let i=e;return i})();function tm(i){return[new ao("mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",i),new co(i)]}var zu=tm();var sm=new xt("angularfire2.messaging.vapid-key"),rm=new xt("angularfire2.messaging.service-worker-registeration"),ho=(()=>{class i{requestPermission;getToken;tokenChanges;messages;requestToken;deleteToken;constructor(t,n,s,r,o,a,l){let c=l,u=mi(void 0).pipe(gt(o.outsideAngular),mt(o.insideAngular),de(Au),de(p=>p?import("./chunk-53NCCVXK.js"):Gl),ve(()=>us(t,r,n)),de(p=>ds(`${p.name}.messaging`,"AngularFireMessaging",p.name,()=>mi(p.messaging()),[])),ic({bufferSize:1,refCount:!1}));this.requestPermission=u.pipe(gt(o.outsideAngular),mt(o.insideAngular),de(()=>Notification.requestPermission())),this.getToken=u.pipe(gt(o.outsideAngular),mt(o.insideAngular),de(p=>Xn(this,null,function*(){if(Notification.permission==="granted"){let d=c?yield c:null;return yield p.getToken({vapidKey:a,serviceWorkerRegistration:d})}else return null})));let f=new Le(p=>{navigator.permissions.query({name:"notifications"}).then(d=>{d.onchange=()=>p.next()})}),m=u.pipe(gt(o.outsideAngular),mt(o.insideAngular),$r(f),$r(this.getToken));return this.tokenChanges=u.pipe(gt(o.outsideAngular),mt(o.insideAngular),de(()=>Ql(this.getToken,m))),this.messages=u.pipe(gt(o.outsideAngular),mt(o.insideAngular),de(p=>new Le(d=>p.onMessage(d)))),this.requestToken=u.pipe(gt(o.outsideAngular),mt(o.insideAngular),de(()=>this.requestPermission),Yt(()=>mi(null)),Xl(()=>this.tokenChanges)),this.deleteToken=()=>u.pipe(gt(o.outsideAngular),mt(o.insideAngular),de(p=>p.deleteToken()),Jl(!1)),nu(this,u,r)}static \u0275fac=function(n){return new(n||i)(W(ls),W(cs,8),W(yi),W(ge),W(as),W(sm,8),W(rm,8))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),$u=(()=>{class i{constructor(){Ei.registerVersion("angularfire",os.full,"fcm-compat")}static \u0275fac=function(n){return new(n||i)};static \u0275mod=be({type:i});static \u0275inj=we({providers:[ho]})}return i})();var ms=(()=>{let e=class e{constructor(){this.permission=this.isSupported()?"default":"denied"}isSupported(){return"Notification"in window}requestPermission(){let n=this;"Notification"in window&&Notification.requestPermission(function(s){return n.permission=s})}create(n,s,r){let o=this;return new Le(function(a){"Notification"in window||a.complete(),o.permission!=="granted"&&a.complete();let l=new Notification(n,r);l.onshow=function(c){return a.next({notification:l,event:c})},l.onclick=function(c){return window.open(s,"_blank"),a.next({notification:l,event:c})},l.onerror=function(c){return a.error({notification:l,event:c})},l.onclose=function(){return a.complete()}})}generateNotification(n){let s=this;n.forEach(r=>{let o={body:r.alertContent,icon:"src/assets/icons/icon-512x512.png"},a=s.create(r.title,r.orderTrackUrl,o).subscribe()})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var gs=(()=>{let e=class e{constructor(n,s,r){this.angularFireMessaging=n,this._notificationService=s,this.commonFunction=r,this.currentMessage=new ql(null),this.isMobile=this.commonFunction.identifyDeviceType(),this.angularFireMessaging.messages.subscribe(o=>{o.onMessage=o.onMessage.bind(o),o.onTokenRefresh=o.onTokenRefresh.bind(o)})}requestPermission(){this.angularFireMessaging.requestToken.subscribe(n=>{localStorage.setItem("firebaseDeviceId",n)},n=>{console.error("Unable to get permission to notify.",n)})}receiveMessage(){this.angularFireMessaging.messages.subscribe(n=>{this.currentMessage.next(n),this.notify(n.data)})}notify(n){let s=[];s.push({title:n.title,alertContent:n.body});let r={body:s[0].alertContent,icon:"src/assets/icons/icon-512x512.png"};this.isMobile?navigator.serviceWorker.ready.then(o=>{o.showNotification(s[0].title,r)}):new Notification(s[0].title,r)}};e.\u0275fac=function(s){return new(s||e)(W(ho),W(ms),W(kt))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ys=(()=>{let e=class e{constructor(n,s,r){this.http=n,this.apiHeader=s,this.commonFunction=r,this.server=wt.APIEndpoint,this.urls={privacyPolicy:this.server+"api/unsec/user/v1/cookie/preference/save"}}saveCookiePreference(n){let s=this.commonFunction.verifyLoggedInUser();if(n.userId=this.commonFunction.getUserId(),n.userType=this.commonFunction.getUserType(),s){let r=this.apiHeader.getSecureHeader();return this.http.post(this.urls.privacyPolicy,n,{headers:r})}else{let r=this.apiHeader.getUnSecureHeader();return this.http.post(this.urls.privacyPolicy,n,{headers:r})}}};e.\u0275fac=function(s){return new(s||e)(W(ts),W(Ac),W(kt))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function dm(i,e){i&1&&Zn(0,"div",2)}function hm(i,e){if(i&1){let t=gc();_t(0,"div",3)(1,"div",4)(2,"h3"),Mt(3,"We value your privacy"),vt()(),_t(4,"div",5)(5,"div",6),Mt(6," We at Starbucks use cookies to enhance browser experience, serve personalized ads/content and analyze traffic.\xA0 "),vt(),_t(7,"div",7),Mt(8," By choosing below tabs, you can set your consent preferences in terms of data collection by various categories of cookies. For more details please refer to our "),_t(9,"a",8),Mt(10,"Cookie Policy"),vt(),Mt(11,". "),vt()(),_t(12,"div",9)(13,"button",10),Vr("click",function(){Br(t);let s=qr();return Wr(s.rejectOptionalCookies())}),Mt(14,"Reject Optional Cookies"),vt(),_t(15,"button",10),Vr("click",function(){Br(t);let s=qr();return Wr(s.acceptAllCookies())}),Mt(16,"Accept All"),vt()()()}}var _s=(()=>{let e=class e{constructor(n,s){this.cookiePolicyService=n,this.commonFunction=s,this.showBanner=!1,this.cookieName="cookie_consent",this.sessionKey="cookieBannerShown"}ngOnInit(){if(sessionStorage.getItem(this.sessionKey)){this.showBanner=!1;return}let s=this.getCookie(this.cookieName);this.showBanner=s!=="FULLY_ACCEPTED",this.showBanner&&sessionStorage.setItem(this.sessionKey,"true")}saveCookiePreference(n){let s={preference:n};this.setCookie(this.cookieName,n,30),localStorage.setItem("cookiePreference",n),sessionStorage.setItem(this.sessionKey,"true"),this.cookiePolicyService.saveCookiePreference(s).subscribe(r=>{let o=Array.isArray(r.response)?r.response[0]:"Preference saved Successfully";this.commonFunction.displaySnackBarMessage(o,"success"),this.showBanner=!1})}rejectOptionalCookies(){this.saveCookiePreference("NOT_ACCEPTED"),this.showBanner=!1}acceptAllCookies(){this.saveCookiePreference("FULLY_ACCEPTED"),this.showBanner=!1}setCookie(n,s,r){let o=new Date(Date.now()+r*864e5).toUTCString();document.cookie=n+"="+encodeURIComponent(s)+"; expires="+o+"; path=/"}getCookie(n){return document.cookie.split("; ").reduce((s,r)=>{let o=r.split("=");return o[0]===n?decodeURIComponent(o[1]):s},null)}checkCookie(n){return this.getCookie(n)!==null}};e.\u0275fac=function(s){return new(s||e)(yt(ys),yt(kt))},e.\u0275cmp=_i({type:e,selectors:[["app-cookie-policy"]],decls:2,vars:2,consts:[["class","cookie-blur-overlay",4,"ngIf"],["class","cookie-banner",4,"ngIf"],[1,"cookie-blur-overlay"],[1,"cookie-banner"],[1,"cookie-content"],[1,"description"],[1,"cookie-main-text","fw-bold"],[1,"cookie-gap-text","fw-bold"],["href","https://www.starbucks.in/cookiepolicy",1,"fw-bold","text-decoration-underline","text-black"],[1,"cookie-buttons"],[3,"click"]],template:function(s,r){s&1&&pc(0,dm,1,0,"div",0)(1,hm,17,0,"div",1),s&2&&(Hr("ngIf",r.showBanner),hc(),Hr("ngIf",r.showBanner))},dependencies:[Jn,yc,ku],styles:[".cookie-blur-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;width:100vw;height:100vh;background:#0009;z-index:9998;pointer-events:all}.cookie-banner[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;background-color:#ffffffd9;box-shadow:0 0 8px #0003;padding:2rem;z-index:9999;border-top-left-radius:30px;border-top-right-radius:30px;display:flex;flex-direction:column;align-items:flex-start;text-align:left}.cookie-banner[_ngcontent-%COMP%]   .cookie-content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:flex-start;font-family:SoDosans_Bold,Helvetica}.cookie-banner[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:800;color:#1e3932;font-size:24px;font-family:SoDosans_Bold,Helvetica}.cookie-banner[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:17px;font-weight:600;color:#000000de}.cookie-banner[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:19px;color:#000000de;font-weight:600}.cookie-banner[_ngcontent-%COMP%]   .cookie-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;width:100%;margin-top:1rem;height:40px}.cookie-banner[_ngcontent-%COMP%]   .cookie-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:25px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}.cookie-banner[_ngcontent-%COMP%]   .cookie-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{color:#000;border:1px solid black;font-weight:700;padding:7px 40px 6px}.cookie-banner[_ngcontent-%COMP%]   .cookie-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#000;color:#fff;padding:7px 40px 6px;font-weight:700}@media only screen and (max-width: 600px){.cookie-banner[_ngcontent-%COMP%]{padding:1.8rem}.cookie-banner[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.cookie-banner[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}.cookie-banner[_ngcontent-%COMP%]   .cookie-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;margin-top:40px}.cookie-banner[_ngcontent-%COMP%]   .cookie-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.4rem;width:100%;height:35px}.cookie-banner[_ngcontent-%COMP%]   .cookie-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child, .cookie-banner[_ngcontent-%COMP%]   .cookie-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{font-size:1rem;height:35px}.cookie-banner[_ngcontent-%COMP%]   .cookie-main-text[_ngcontent-%COMP%], .cookie-banner[_ngcontent-%COMP%]   .cookie-gap-text[_ngcontent-%COMP%]{margin-bottom:16px;font-size:14px}}"]});let i=e;return i})();var Bu=(()=>{let e=class e{constructor(n,s,r){this.idle=n,this.router=s,this.messagingService=r,this.title="Tata-Starbucks",this.message="",this.idleState="Not started.",this.timedOut=!1,this.previousUrl="",n.setIdle(30),n.setTimeout(5400),n.setInterrupts(zu),n.onIdleEnd.subscribe(()=>{this.idleState="No longer idle."}),n.onTimeout.subscribe(()=>{if(localStorage.excludeFromTimeout){this.reset();return}this.idleState="Timed out!",this.timedOut=!0;let o=this.router.url}),n.onIdleStart.subscribe(()=>{this.idleState="You've gone idle!"}),n.onTimeoutWarning.subscribe(o=>{this.idleState="You will time out in "+o+" seconds!"}),this.reset(),this.loadScripts(),this.setPreviousPage()}ngOnInit(){if(this.initiateApplicationProcess(),this.checkBuildVersion(),window.location.pathname==="/StoreDetails"){let n=window.location.href.split("=");this.router.navigate(["/store-locator/StoreDetails"],{queryParams:{storeId:n[1]}})}}checkBuildVersion(){let n=JSON.parse(localStorage.getItem("buildVersion")),s=wt.buildVersion;n?n!==s?(localStorage.clear(),sessionStorage.clear(),localStorage.setItem("buildVersion",JSON.stringify(s))):console.warn("latest build!"):(localStorage.clear(),sessionStorage.clear(),localStorage.setItem("buildVersion",JSON.stringify(s)))}reset(){this.idle.stop(),this.idle.watch(),this.idleState="Started.",this.timedOut=!1}initiateApplicationProcess(){localStorage.getItem("deviceId")==null&&localStorage.setItem("deviceId",Mc())}loadScripts(){let n=["./assets/js/sbxui.js"];for(let s=0;s<n.length;s++){let r=document.createElement("script");r.src=n[s],r.type="text/javascript",r.async=!1,document.getElementsByTagName("body")[0].appendChild(r)}}setPreviousPage(){let n=this.router.url;this.router.events.pipe(qt(s=>s instanceof Ic)).subscribe(s=>{this.previousUrl=n,n=s.url,sessionStorage.setItem("previousPage",this.previousUrl)})}checkForRouteForClearCity(){this.routerSubscription=this.router.events.subscribe(n=>{n instanceof Tc&&(n.url.includes("store-locator")||sessionStorage.removeItem("selectedCityForStores"))})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}};e.\u0275fac=function(s){return new(s||e)(yt(uo),yt(vi),yt(gs))},e.\u0275cmp=_i({type:e,selectors:[["app-root"]],standalone:!1,decls:3,vars:0,consts:[[1,"app-container"]],template:function(s,r){s&1&&(_t(0,"div",0),Zn(1,"router-outlet")(2,"app-cookie-policy"),vt())},dependencies:[Pc,_s],styles:[".app-container[_ngcontent-%COMP%]{height:100%}"]});let i=e;return i})();var Y=(function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i})(Y||{}),Ze="*";function Wu(i,e=null){return{type:Y.Sequence,steps:i,options:e}}function po(i){return{type:Y.Style,styles:i,offset:null}}var Et=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Ci=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,n=0,s=0,r=this.players.length;r==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==r&&this._onFinish()}),o.onDestroy(()=>{++n==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(n=>{let s=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(s)})}getPosition(){let e=this.players.reduce((t,n)=>t===null||n.totalTime>t.totalTime?n:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},sn="!";function Uu(i){return new q(3e3,!1)}function pm(){return new q(3100,!1)}function mm(){return new q(3101,!1)}function gm(i){return new q(3001,!1)}function ym(i){return new q(3003,!1)}function _m(i){return new q(3004,!1)}function Hu(i,e){return new q(3005,!1)}function Vu(){return new q(3006,!1)}function qu(){return new q(3007,!1)}function Yu(i,e){return new q(3008,!1)}function Gu(i){return new q(3002,!1)}function Ku(i,e,t,n,s){return new q(3010,!1)}function Xu(){return new q(3011,!1)}function Qu(){return new q(3012,!1)}function Zu(){return new q(3200,!1)}function Ju(){return new q(3202,!1)}function ed(){return new q(3013,!1)}function td(i){return new q(3014,!1)}function id(i){return new q(3015,!1)}function nd(i){return new q(3016,!1)}function sd(i,e){return new q(3404,!1)}function vm(i){return new q(3502,!1)}function rd(i){return new q(3503,!1)}function od(){return new q(3300,!1)}function ad(i){return new q(3504,!1)}function ld(i){return new q(3301,!1)}function cd(i,e){return new q(3302,!1)}function ud(i){return new q(3303,!1)}function dd(i,e){return new q(3400,!1)}function hd(i){return new q(3401,!1)}function fd(i){return new q(3402,!1)}function pd(i,e){return new q(3505,!1)}function St(i){switch(i.length){case 0:return new Et;case 1:return i[0];default:return new Ci(i)}}function _o(i,e,t=new Map,n=new Map){let s=[],r=[],o=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==o,f=u&&a||new Map;l.forEach((m,p)=>{let d=p,h=m;if(p!=="offset")switch(d=i.normalizePropertyName(d,s),h){case sn:h=t.get(p);break;case Ze:h=n.get(p);break;default:h=i.normalizeStyleValue(p,d,h,s);break}f.set(d,h)}),u||r.push(f),a=f,o=c}),s.length)throw vm(s);return r}function vs(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&mo(t,"start",i)));break;case"done":i.onDone(()=>n(t&&mo(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&mo(t,"destroy",i)));break}}function mo(i,e,t){let n=t.totalTime,s=!!t.disabled,r=ws(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,s),o=i._data;return o!=null&&(r._data=o),r}function ws(i,e,t,n,s="",r=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:s,totalTime:r,disabled:!!o}}function Re(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function vo(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var wm=typeof document>"u"?null:document.documentElement;function bs(i){let e=i.parentNode||i.host||null;return e===wm?null:e}function bm(i){return i.substring(1,6)=="ebkit"}var Qt=null,ju=!1;function md(i){Qt||(Qt=Em()||{},ju=Qt.style?"WebkitAppearance"in Qt.style:!1);let e=!0;return Qt.style&&!bm(i)&&(e=i in Qt.style,!e&&ju&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in Qt.style)),e}function Em(){return typeof document<"u"?document.body:null}function wo(i,e){for(;e;){if(e===i)return!0;e=bs(e)}return!1}function bo(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var Sm=1e3,Eo="{{",Cm="}}",So="ng-enter",Es="ng-leave",rn="ng-trigger",on=".ng-trigger",Co="ng-animating",Ss=".ng-animating";function ot(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:go(parseFloat(e[1]),e[2])}function go(i,e){switch(e){case"s":return i*Sm;default:return i}}function an(i,e,t){return i.hasOwnProperty("duration")?i:Im(i,e,t)}var Tm=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Im(i,e,t){let n,s=0,r="";if(typeof i=="string"){let o=i.match(Tm);if(o===null)return e.push(Uu(i)),{duration:0,delay:0,easing:""};n=go(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(s=go(parseFloat(a),o[4]));let l=o[5];l&&(r=l)}else n=i;if(!t){let o=!1,a=e.length;n<0&&(e.push(pm()),o=!0),s<0&&(e.push(mm()),o=!0),o&&e.splice(a,0,Uu(i))}return{duration:n,delay:s,easing:r}}function gd(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function Je(i,e,t){e.forEach((n,s)=>{let r=Cs(s);t&&!t.has(s)&&t.set(s,i.style[r]),i.style[r]=n})}function Ot(i,e){e.forEach((t,n)=>{let s=Cs(n);i.style[s]=""})}function Ti(i){return Array.isArray(i)?i.length==1?i[0]:Wu(i):i}function yd(i,e,t){let n=e.params||{},s=To(i);s.length&&s.forEach(r=>{n.hasOwnProperty(r)||t.push(gm(r))})}var yo=new RegExp(`${Eo}\\s*(.+?)\\s*${Cm}`,"g");function To(i){let e=[];if(typeof i=="string"){let t;for(;t=yo.exec(i);)e.push(t[1]);yo.lastIndex=0}return e}function Ii(i,e,t){let n=`${i}`,s=n.replace(yo,(r,o)=>{let a=e[o];return a==null&&(t.push(ym(o)),a=""),a.toString()});return s==n?i:s}var Pm=/-+([a-z0-9])/g;function Cs(i){return i.replace(Pm,(...e)=>e[1].toUpperCase())}function _d(i,e){return i===0||e===0}function vd(i,e,t){if(t.size&&e.length){let n=e[0],s=[];if(t.forEach((r,o)=>{n.has(o)||s.push(o),n.set(o,r)}),s.length)for(let r=1;r<e.length;r++){let o=e[r];s.forEach(a=>o.set(a,Ts(i,a)))}}return e}function De(i,e,t){switch(e.type){case Y.Trigger:return i.visitTrigger(e,t);case Y.State:return i.visitState(e,t);case Y.Transition:return i.visitTransition(e,t);case Y.Sequence:return i.visitSequence(e,t);case Y.Group:return i.visitGroup(e,t);case Y.Animate:return i.visitAnimate(e,t);case Y.Keyframes:return i.visitKeyframes(e,t);case Y.Style:return i.visitStyle(e,t);case Y.Reference:return i.visitReference(e,t);case Y.AnimateChild:return i.visitAnimateChild(e,t);case Y.AnimateRef:return i.visitAnimateRef(e,t);case Y.Query:return i.visitQuery(e,t);case Y.Stagger:return i.visitStagger(e,t);default:throw _m(e.type)}}function Ts(i,e){return window.getComputedStyle(i)[e]}var Uo=(()=>{class i{validateStyleProperty(t){return md(t)}containsElement(t,n){return wo(t,n)}getParentElement(t){return bs(t)}query(t,n,s){return bo(t,n,s)}computeStyle(t,n,s){return s||""}animate(t,n,s,r,o,a=[],l){return new Et(s,r)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac})}return i})(),Jt=class{static NOOP=new Uo},ei=class{};var xm=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ks=class extends ei{normalizePropertyName(e,t){return Cs(e)}normalizeStyleValue(e,t,n,s){let r="",o=n.toString().trim();if(xm.has(t)&&n!==0&&n!=="0")if(typeof n=="number")r="px";else{let a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&s.push(Hu(e,n))}return o+r}};var As="*";function Mm(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>km(n,t,e)):t.push(i),t}function km(i,e,t){if(i[0]==":"){let l=Am(i,t);if(typeof l=="function"){e.push(l);return}i=l}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(id(i)),e;let s=n[1],r=n[2],o=n[3];e.push(wd(s,o));let a=s==As&&o==As;r[0]=="<"&&!a&&e.push(wd(o,s))}function Am(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(nd(i)),"* => *"}}var Is=new Set(["true","1"]),Ps=new Set(["false","0"]);function wd(i,e){let t=Is.has(i)||Ps.has(i),n=Is.has(e)||Ps.has(e);return(s,r)=>{let o=i==As||i==s,a=e==As||e==r;return!o&&t&&typeof s=="boolean"&&(o=s?Is.has(i):Ps.has(i)),!a&&n&&typeof r=="boolean"&&(a=r?Is.has(e):Ps.has(e)),o&&a}}var kd=":self",Nm=new RegExp(`s*${kd}s*,?`,"g");function Ad(i,e,t,n){return new Ao(i).build(e,t,n)}var bd="",Ao=class{_driver;constructor(e){this._driver=e}build(e,t,n){let s=new No(t);return this._resetContextStyleTimingState(s),De(this,Ti(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector=bd,e.collectedStyles=new Map,e.collectedStyles.set(bd,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,s=t.depCount=0,r=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(Vu()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Y.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,r.push(this.visitState(l,t))}),l.name=c}else if(a.type==Y.Transition){let l=this.visitTransition(a,t);n+=l.queryCount,s+=l.depCount,o.push(l)}else t.errors.push(qu())}),{type:Y.Trigger,name:e.name,states:r,transitions:o,queryCount:n,depCount:s,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(n.containsDynamicStyles){let r=new Set,o=s||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{To(l).forEach(c=>{o.hasOwnProperty(c)||r.add(c)})})}),r.size&&t.errors.push(Yu(e.name,[...r.values()]))}return{type:Y.State,name:e.name,style:n,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=De(this,Ti(e.animation),t),s=Mm(e.expr,t.errors);return{type:Y.Transition,matchers:s,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Zt(e.options)}}visitSequence(e,t){return{type:Y.Sequence,steps:e.steps.map(n=>De(this,n,t)),options:Zt(e.options)}}visitGroup(e,t){let n=t.currentTime,s=0,r=e.steps.map(o=>{t.currentTime=n;let a=De(this,o,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:Y.Group,steps:r,options:Zt(e.options)}}visitAnimate(e,t){let n=Lm(e.timings,t.errors);t.currentAnimateTimings=n;let s,r=e.styles?e.styles:po({});if(r.type==Y.Keyframes)s=this.visitKeyframes(r,t);else{let o=e.styles,a=!1;if(!o){a=!0;let c={};n.easing&&(c.easing=n.easing),o=po(c)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,s=l}return t.currentAnimateTimings=null,{type:Y.Animate,timings:n,style:s,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of s)typeof a=="string"?a===Ze?n.push(a):t.errors.push(Gu(a)):n.push(new Map(Object.entries(a)));let r=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!r)){for(let l of a.values())if(l.toString().indexOf(Eo)>=0){r=!0;break}}}),{type:Y.Style,styles:n,easing:o,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,s=t.currentTime,r=t.currentTime;n&&r>0&&(r-=n.duration+n.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),f=!0;u&&(r!=s&&r>=u.startTime&&s<=u.endTime&&(t.errors.push(Ku(l,u.startTime,u.endTime,r,s)),f=!1),r=u.startTime),f&&c.set(l,{startTime:r,endTime:s}),t.options&&yd(a,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:Y.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Xu()),n;let s=1,r=0,o=[],a=!1,l=!1,c=0,u=e.steps.map(v=>{let y=this._makeStyleAst(v,t),_=y.offset!=null?y.offset:Om(y.styles),b=0;return _!=null&&(r++,b=y.offset=_),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),y});l&&t.errors.push(Qu()),a&&t.errors.push(Zu());let f=e.steps.length,m=0;r>0&&r<f?t.errors.push(Ju()):r==0&&(m=s/(f-1));let p=f-1,d=t.currentTime,h=t.currentAnimateTimings,g=h.duration;return u.forEach((v,y)=>{let _=m>0?y==p?1:m*y:o[y],b=_*g;t.currentTime=d+h.delay+b,h.duration=b,this._validateStyleAst(v,t),v.offset=_,n.styles.push(v)}),n}visitReference(e,t){return{type:Y.Reference,animation:De(this,Ti(e.animation),t),options:Zt(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Y.AnimateChild,options:Zt(e.options)}}visitAnimateRef(e,t){return{type:Y.AnimateRef,animation:this.visitReference(e.animation,t),options:Zt(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;let[r,o]=Rm(e.selector);t.currentQuerySelector=n.length?n+" "+r:r,Re(t.collectedStyles,t.currentQuerySelector,new Map);let a=De(this,Ti(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:Y.Query,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Zt(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(ed());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:an(e.timings,t.errors,!0);return{type:Y.Stagger,animation:De(this,Ti(e.animation),t),timings:n,options:null}}};function Rm(i){let e=!!i.split(/\s*,\s*/).find(t=>t==kd);return e&&(i=i.replace(Nm,"")),i=i.replace(/@\*/g,on).replace(/@\w+/g,t=>on+"-"+t.slice(1)).replace(/:animating/g,Ss),[i,e]}function Dm(i){return i?ue({},i):null}var No=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Om(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Lm(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let r=an(i,e).duration;return Io(r,0,"")}let t=i;if(t.split(/\s+/).some(r=>r.charAt(0)=="{"&&r.charAt(1)=="{")){let r=Io(0,0,"");return r.dynamic=!0,r.strValue=t,r}let s=an(t,e);return Io(s.duration,s.delay,s.easing)}function Zt(i){return i?(i=ue({},i),i.params&&(i.params=Dm(i.params))):i={},i}function Io(i,e,t){return{duration:i,delay:e,easing:t}}function jo(i,e,t,n,s,r,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}var cn=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Fm=1,zm=":enter",$m=new RegExp(zm,"g"),Bm=":leave",Wm=new RegExp(Bm,"g");function Nd(i,e,t,n,s,r=new Map,o=new Map,a,l,c=[]){return new Ro().buildKeyframes(i,e,t,n,s,r,o,a,l,c)}var Ro=class{buildKeyframes(e,t,n,s,r,o,a,l,c,u=[]){c=c||new cn;let f=new Do(e,t,c,s,r,u,[]);f.options=l;let m=l.delay?ot(l.delay):0;f.currentTimeline.delayNextStep(m),f.currentTimeline.setStyles([o],null,f.errors,l),De(this,n,f);let p=f.timelines.filter(d=>d.containsAnimation());if(p.length&&a.size){let d;for(let h=p.length-1;h>=0;h--){let g=p[h];if(g.element===t){d=g;break}}d&&!d.allowOnlyTimelineStyles()&&d.setStyles([a],null,f.errors,l)}return p.length?p.map(d=>d.buildKeyframes()):[jo(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let s=t.createSubContext(e.options),r=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,s,s.options);r!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let s of e){let r=s?.delay;if(r){let o=typeof r=="number"?r:ot(Ii(r,s?.params??{},t.errors));n.delayNextStep(o)}}}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime,o=n.duration!=null?ot(n.duration):null,a=n.delay!=null?ot(n.delay):null;return o!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,o,a);r=Math.max(r,c.duration+c.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),De(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,s=t,r=e.options;if(r&&(r.params||r.delay)&&(s=t.createSubContext(r),s.transformIntoNewTimeline(),r.delay!=null)){s.previousNode.type==Y.Style&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=Ns);let o=ot(r.delay);s.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>De(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>n&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],s=t.currentTimeline.currentTime,r=e.options&&e.options.delay?ot(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);r&&a.delayNextStep(r),De(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,s=t.params?Ii(n,t.params,t.errors):n;return an(s,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),s.snapshotCurrentStyles());let r=e.style;r.type==Y.Keyframes?this.visitKeyframes(r,t):(t.incrementTime(n.duration),this.visitStyle(r,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,s=t.currentAnimateTimings;!s&&n.hasCurrentStyleProperties()&&n.forwardFrame();let r=s&&s.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(r):n.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,s=t.currentTimeline.duration,r=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*r),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+r),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,s=e.options||{},r=s.delay?ot(s.delay):0;r&&(t.previousNode.type===Y.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ns);let o=n,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;let f=t.createSubContext(e.options,c);r&&f.delayNextStep(r),c===t.element&&(l=f.currentTimeline),De(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let m=f.currentTimeline.currentTime;o=Math.max(o,m)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,s=t.currentTimeline,r=e.timings,o=Math.abs(r.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let f=u.currentTime;De(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=s.currentTime-f+(s.startTime-n.currentTimeline.startTime)}},Ns={},Do=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Ns;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,s,r,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.currentTimeline=l||new Rs(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,s=this.options;n.duration!=null&&(s.duration=ot(n.duration)),n.delay!=null&&(s.delay=ot(n.delay));let r=n.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ii(r[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(s=>{n[s]=t[s]})}}return e}createSubContext(e=null,t,n){let s=t||this.element,r=new i(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=Ns,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},r=new Oo(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,s,r,o){let a=[];if(s&&a.push(this.element),e.length>0){e=e.replace($m,"."+this._enterClassName),e=e.replace(Wm,"."+this._leaveClassName);let l=n!=1,c=this._driver.query(this.element,e,l);n!==0&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!r&&a.length==0&&o.push(td(t)),a}},Rs=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,s){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=s,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Fm,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Ze),this._currentKeyframe.set(t,Ze);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,s){t&&this._previousKeyframe.set("easing",t);let r=s&&s.params||{},o=Um(e,this._globalTimelineStyles);for(let[a,l]of o){let c=Ii(l,r,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ze),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let s=this._styleSummary.get(n);(!s||t.time>s.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,s=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,f)=>{u===sn?e.add(f):u===Ze&&t.add(f)}),n||c.set("offset",l/this.duration),s.push(c)});let r=[...e.values()],o=[...t.values()];if(n){let a=s[0],l=new Map(a);a.set("offset",0),l.set("offset",1),s=[a,l]}return jo(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}},Oo=class extends Rs{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,s,r,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){let r=[],o=n+t,a=t/o,l=new Map(e[0]);l.set("offset",0),r.push(l);let c=new Map(e[0]);c.set("offset",Ed(a)),r.push(c);let u=e.length-1;for(let f=1;f<=u;f++){let m=new Map(e[f]),p=m.get("offset"),d=t+p*n;m.set("offset",Ed(d/o)),r.push(m)}n=o,t=0,s="",e=r}return jo(this.element,e,this.preStyleProps,this.postStyleProps,n,t,s,!0)}};function Ed(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function Um(i,e){let t=new Map,n;return i.forEach(s=>{if(s==="*"){n??=e.keys();for(let r of n)t.set(r,Ze)}else for(let[r,o]of s)t.set(r,o)}),t}function Sd(i,e,t,n,s,r,o,a,l,c,u,f,m){return{type:0,element:i,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:r,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:f,errors:m}}var Po={},Ds=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,s){return jm(this.ast.matchers,e,t,n,s)}buildStyles(e,t,n){let s=this._stateStyles.get("*");return e!==void 0&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,n):new Map}build(e,t,n,s,r,o,a,l,c,u){let f=[],m=this.ast.options&&this.ast.options.params||Po,p=a&&a.params||Po,d=this.buildStyles(n,p,f),h=l&&l.params||Po,g=this.buildStyles(s,h,f),v=new Set,y=new Map,_=new Map,b=s==="void",k={params:Rd(h,m),delay:this.ast.options?.delay},O=u?[]:Nd(e,t,this.ast.animation,r,o,d,g,k,c,f),x=0;return O.forEach(R=>{x=Math.max(R.duration+R.delay,x)}),f.length?Sd(t,this._triggerName,n,s,b,d,g,[],[],y,_,x,f):(O.forEach(R=>{let S=R.element,L=Re(y,S,new Set);R.preStyleProps.forEach(N=>L.add(N));let $=Re(_,S,new Set);R.postStyleProps.forEach(N=>$.add(N)),S!==t&&v.add(S)}),Sd(t,this._triggerName,n,s,b,d,g,O,[...v.values()],y,_,x))}};function jm(i,e,t,n,s){return i.some(r=>r(e,t,n,s))}function Rd(i,e){let t=ue({},e);return Object.entries(i).forEach(([n,s])=>{s!=null&&(t[n]=s)}),t}var Lo=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,s=Rd(e,this.defaultParams);return this.styles.styles.forEach(r=>{typeof r!="string"&&r.forEach((o,a)=>{o&&(o=Ii(o,s,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(a,o)})}),n}};function Hm(i,e,t){return new Fo(i,e,t)}var Fo=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(s=>{let r=s.options&&s.options.params||{};this.states.set(s.name,new Lo(s.style,r,n))}),Cd(this.states,"true","1"),Cd(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new Ds(e,s,this.states))}),this.fallbackTransition=Vm(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,s){return this.transitionFactories.find(o=>o.match(e,t,n,s))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function Vm(i,e,t){let n=[(o,a)=>!0],s={type:Y.Sequence,steps:[],options:null},r={type:Y.Transition,animation:s,matchers:n,options:null,queryCount:0,depCount:0};return new Ds(i,r,e)}function Cd(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var qm=new cn,zo=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],s=[],r=Ad(this._driver,t,n,s);if(n.length)throw rd(n);this._animations.set(e,r)}_buildPlayer(e,t,n){let s=e.element,r=_o(this._normalizer,e.keyframes,t,n);return this._driver.animate(s,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let s=[],r=this._animations.get(e),o,a=new Map;if(r?(o=Nd(this._driver,t,r,So,Es,new Map,new Map,n,qm,s),o.forEach(u=>{let f=Re(a,u.element,new Map);u.postStyleProps.forEach(m=>f.set(m,null))})):(s.push(od()),o=[]),s.length)throw ad(s);a.forEach((u,f)=>{u.forEach((m,p)=>{u.set(p,this._driver.computeStyle(f,p,Ze))})});let l=o.map(u=>{let f=a.get(u.element);return this._buildPlayer(u,new Map,f)}),c=St(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw ld(e);return t}listen(e,t,n,s){let r=ws(t,"","","");return vs(this._getPlayer(e),n,r,s),()=>{}}command(e,t,n,s){if(n=="register"){this.register(e,s[0]);return}if(n=="create"){let o=s[0]||{};this.create(e,t,o);return}let r=this._getPlayer(e);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e);break}}},Td="ng-animate-queued",Ym=".ng-animate-queued",xo="ng-animate-disabled",Gm=".ng-animate-disabled",Km="ng-star-inserted",Xm=".ng-star-inserted",Qm=[],Dd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Zm={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},et="__ng_removed",un=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),s=n?e.value:e;if(this.value=eg(s),n){let r=e,{value:o}=r,a=Hl(r,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(s=>{n[s]==null&&(n[s]=t[s])})}}},ln="void",Mo=new un(ln),$o=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,He(t,this._hostClassName)}listen(e,t,n,s){if(!this._triggers.has(t))throw cd(n,t);if(n==null||n.length==0)throw ud(t);if(!tg(n))throw dd(n,t);let r=Re(this._elementListeners,e,[]),o={name:t,phase:n,callback:s};r.push(o);let a=Re(this._engine.statesByElement,e,new Map);return a.has(t)||(He(e,rn),He(e,rn+"-"+t),a.set(t,Mo)),()=>{this._engine.afterFlush(()=>{let l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw hd(e);return t}trigger(e,t,n,s=!0){let r=this._getTrigger(t),o=new dn(this.id,t,e),a=this._engine.statesByElement.get(e);a||(He(e,rn),He(e,rn+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new un(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=Mo),!(c.value===ln)&&l.value===c.value){if(!sg(l.params,c.params)){let h=[],g=r.matchStyles(l.value,l.params,h),v=r.matchStyles(c.value,c.params,h);h.length?this._engine.reportError(h):this._engine.afterFlush(()=>{Ot(e,g),Je(e,v)})}return}let m=Re(this._engine.playersByElement,e,[]);m.forEach(h=>{h.namespaceId==this.id&&h.triggerName==t&&h.queued&&h.destroy()});let p=r.matchTransition(l.value,c.value,e,c.params),d=!1;if(!p){if(!s)return;p=r.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:d}),d||(He(e,Td),o.onStart(()=>{Pi(e,Td)})),o.onDone(()=>{let h=this.players.indexOf(o);h>=0&&this.players.splice(h,1);let g=this._engine.playersByElement.get(e);if(g){let v=g.indexOf(o);v>=0&&g.splice(v,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,on,!0);n.forEach(s=>{if(s[et])return;let r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,n,s){let r=this._engine.statesByElement.get(e),o=new Map;if(r){let a=[];if(r.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,ln,s);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&St(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let s=new Set;t.forEach(r=>{let o=r.name;if(s.has(o))return;s.add(o);let l=this._triggers.get(o).fallbackTransition,c=n.get(o)||Mo,u=new un(ln),f=new dn(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(n.totalAnimations){let r=n.players.length?n.playersByQueriedElement.get(e):[];if(r&&r.length)s=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)n.markElementAsRemoved(this.id,e,!1,t);else{let r=e[et];(!r||r===Dd)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){He(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let s=n.player;if(s.destroyed)return;let r=n.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==n.triggerName){let l=ws(r,n.triggerName,n.fromState.value,n.toState.value);l._data=e,vs(n.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(n)}),this._queue=[],t.sort((n,s)=>{let r=n.transition.ast.depCount,o=s.transition.ast.depCount;return r==0||o==0?r-o:this._engine.driver.containsElement(n.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Bo=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new $o(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,s=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=s.get(a);if(l){let c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return s.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let s=this._namespaceLookup[e];s&&s.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let s=this._namespaceList.indexOf(n);s>=0&&this._namespaceList.splice(s,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let s of n.values())if(s.namespaceId){let r=this._fetchNamespace(s.namespaceId);r&&t.add(r)}}return t}trigger(e,t,n,s){if(xs(t)){let r=this._fetchNamespace(e);if(r)return r.trigger(t,n,s),!0}return!1}insertNode(e,t,n,s){if(!xs(t))return;let r=t[et];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,n)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),He(e,xo)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Pi(e,xo))}removeNode(e,t,n){if(xs(t)){let s=e?this._fetchNamespace(e):null;s?s.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let r=this.namespacesByHostElement.get(t);r&&r.id!==e&&r.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,s,r){this.collectedLeaveElements.push(t),t[et]={namespaceId:e,setForRemoval:s,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,n,s,r){return xs(t)?this._fetchNamespace(e).listen(t,n,s,r):()=>{}}_buildInstruction(e,t,n,s,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,s,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,on,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Ss,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return St(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[et];if(t&&t.setForRemoval){if(e[et]=Dd,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(xo)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Gm,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,s)=>this._balanceNamespaceList(n,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let s=this.collectedEnterElements[n];He(s,Km)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let s=0;s<n.length;s++)n[s]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let s=this.collectedLeaveElements[n];this.processLeaveNode(s)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?St(t).onDone(()=>{n.forEach(s=>s())}):n.forEach(s=>s())}}reportError(e){throw fd(e)}_flushAnimations(e,t){let n=new cn,s=[],r=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(C=>{u.add(C);let w=this.driver.query(C,Ym,!0);for(let E=0;E<w.length;E++)u.add(w[E])});let f=this.bodyNode,m=Array.from(this.statesByElement.keys()),p=xd(m,this.collectedEnterElements),d=new Map,h=0;p.forEach((C,w)=>{let E=So+h++;d.set(w,E),C.forEach(P=>He(P,E))});let g=[],v=new Set,y=new Set;for(let C=0;C<this.collectedLeaveElements.length;C++){let w=this.collectedLeaveElements[C],E=w[et];E&&E.setForRemoval&&(g.push(w),v.add(w),E.hasAnimation?this.driver.query(w,Xm,!0).forEach(P=>v.add(P)):y.add(w))}let _=new Map,b=xd(m,Array.from(v));b.forEach((C,w)=>{let E=Es+h++;_.set(w,E),C.forEach(P=>He(P,E))}),e.push(()=>{p.forEach((C,w)=>{let E=d.get(w);C.forEach(P=>Pi(P,E))}),b.forEach((C,w)=>{let E=_.get(w);C.forEach(P=>Pi(P,E))}),g.forEach(C=>{this.processLeaveNode(C)})});let k=[],O=[];for(let C=this._namespaceList.length-1;C>=0;C--)this._namespaceList[C].drainQueuedTransitions(t).forEach(E=>{let P=E.player,B=E.element;if(k.push(P),this.collectedEnterElements.length){let A=B[et];if(A&&A.setForMove){if(A.previousTriggersValues&&A.previousTriggersValues.has(E.triggerName)){let H=A.previousTriggersValues.get(E.triggerName),ie=this.statesByElement.get(E.element);if(ie&&ie.has(E.triggerName)){let Oe=ie.get(E.triggerName);Oe.value=H,ie.set(E.triggerName,Oe)}}P.destroy();return}}let Q=!f||!this.driver.containsElement(f,B),ee=_.get(B),ce=d.get(B),te=this._buildInstruction(E,n,ce,ee,Q);if(te.errors&&te.errors.length){O.push(te);return}if(Q){P.onStart(()=>Ot(B,te.fromStyles)),P.onDestroy(()=>Je(B,te.toStyles)),s.push(P);return}if(E.isFallbackTransition){P.onStart(()=>Ot(B,te.fromStyles)),P.onDestroy(()=>Je(B,te.toStyles)),s.push(P);return}let D=[];te.timelines.forEach(A=>{A.stretchStartingKeyframe=!0,this.disabledNodes.has(A.element)||D.push(A)}),te.timelines=D,n.append(B,te.timelines);let M={instruction:te,player:P,element:B};o.push(M),te.queriedElements.forEach(A=>Re(a,A,[]).push(P)),te.preStyleProps.forEach((A,H)=>{if(A.size){let ie=l.get(H);ie||l.set(H,ie=new Set),A.forEach((Oe,Ue)=>ie.add(Ue))}}),te.postStyleProps.forEach((A,H)=>{let ie=c.get(H);ie||c.set(H,ie=new Set),A.forEach((Oe,Ue)=>ie.add(Ue))})});if(O.length){let C=[];O.forEach(w=>{C.push(pd(w.triggerName,w.errors))}),k.forEach(w=>w.destroy()),this.reportError(C)}let x=new Map,R=new Map;o.forEach(C=>{let w=C.element;n.has(w)&&(R.set(w,w),this._beforeAnimationBuild(C.player.namespaceId,C.instruction,x))}),s.forEach(C=>{let w=C.element;this._getPreviousPlayers(w,!1,C.namespaceId,C.triggerName,null).forEach(P=>{Re(x,w,[]).push(P),P.destroy()})});let S=g.filter(C=>Md(C,l,c)),L=new Map;Pd(L,this.driver,y,c,Ze).forEach(C=>{Md(C,l,c)&&S.push(C)});let N=new Map;p.forEach((C,w)=>{Pd(N,this.driver,new Set(C),l,sn)}),S.forEach(C=>{let w=L.get(C),E=N.get(C);L.set(C,new Map([...w?.entries()??[],...E?.entries()??[]]))});let T=[],I=[],z={};o.forEach(C=>{let{element:w,player:E,instruction:P}=C;if(n.has(w)){if(u.has(w)){E.onDestroy(()=>Je(w,P.toStyles)),E.disabled=!0,E.overrideTotalTime(P.totalTime),s.push(E);return}let B=z;if(R.size>1){let ee=w,ce=[];for(;ee=ee.parentNode;){let te=R.get(ee);if(te){B=te;break}ce.push(ee)}ce.forEach(te=>R.set(te,B))}let Q=this._buildAnimation(E.namespaceId,P,x,r,N,L);if(E.setRealPlayer(Q),B===z)T.push(E);else{let ee=this.playersByElement.get(B);ee&&ee.length&&(E.parentPlayer=St(ee)),s.push(E)}}else Ot(w,P.fromStyles),E.onDestroy(()=>Je(w,P.toStyles)),I.push(E),u.has(w)&&s.push(E)}),I.forEach(C=>{let w=r.get(C.element);if(w&&w.length){let E=St(w);C.setRealPlayer(E)}}),s.forEach(C=>{C.parentPlayer?C.syncPlayerEvents(C.parentPlayer):C.destroy()});for(let C=0;C<g.length;C++){let w=g[C],E=w[et];if(Pi(w,Es),E&&E.hasAnimation)continue;let P=[];if(a.size){let Q=a.get(w);Q&&Q.length&&P.push(...Q);let ee=this.driver.query(w,Ss,!0);for(let ce=0;ce<ee.length;ce++){let te=a.get(ee[ce]);te&&te.length&&P.push(...te)}}let B=P.filter(Q=>!Q.destroyed);B.length?ig(this,w,B):this.processLeaveNode(w)}return g.length=0,T.forEach(C=>{this.players.push(C),C.onDone(()=>{C.destroy();let w=this.players.indexOf(C);this.players.splice(w,1)}),C.play()}),T}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,s,r){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!r||r==ln;a.forEach(c=>{c.queued||!l&&c.triggerName!=s||o.push(c)})}}return(n||s)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){let s=t.triggerName,r=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:s;for(let l of t.timelines){let c=l.element,u=c!==r,f=Re(n,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(p=>{let d=p.getRealPlayer();d.beforeDestroy&&d.beforeDestroy(),p.destroy(),f.push(p)})}Ot(r,t.fromStyles)}_buildAnimation(e,t,n,s,r,o){let a=t.triggerName,l=t.element,c=[],u=new Set,f=new Set,m=t.timelines.map(d=>{let h=d.element;u.add(h);let g=h[et];if(g&&g.removedBeforeQueried)return new Et(d.duration,d.delay);let v=h!==l,y=ng((n.get(h)||Qm).map(x=>x.getRealPlayer())).filter(x=>{let R=x;return R.element?R.element===h:!1}),_=r.get(h),b=o.get(h),k=_o(this._normalizer,d.keyframes,_,b),O=this._buildPlayer(d,k,y);if(d.subTimeline&&s&&f.add(h),v){let x=new dn(e,a,h);x.setRealPlayer(O),c.push(x)}return O});c.forEach(d=>{Re(this.playersByQueriedElement,d.element,[]).push(d),d.onDone(()=>Jm(this.playersByQueriedElement,d.element,d))}),u.forEach(d=>He(d,Co));let p=St(m);return p.onDestroy(()=>{u.forEach(d=>Pi(d,Co)),Je(l,t.toStyles)}),f.forEach(d=>{Re(s,d,[]).push(p)}),p}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Et(e.duration,e.delay)}},dn=class{namespaceId;triggerName;element;_player=new Et;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(s=>vs(e,n,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Re(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Jm(i,e,t){let n=i.get(e);if(n){if(n.length){let s=n.indexOf(t);n.splice(s,1)}n.length==0&&i.delete(e)}return n}function eg(i){return i??null}function xs(i){return i&&i.nodeType===1}function tg(i){return i=="start"||i=="done"}function Id(i,e){let t=i.style.display;return i.style.display=e??"none",t}function Pd(i,e,t,n,s){let r=[];t.forEach(l=>r.push(Id(l)));let o=[];n.forEach((l,c)=>{let u=new Map;l.forEach(f=>{let m=e.computeStyle(c,f,s);u.set(f,m),(!m||m.length==0)&&(c[et]=Zm,o.push(c))}),i.set(c,u)});let a=0;return t.forEach(l=>Id(l,r[a++])),o}function xd(i,e){let t=new Map;if(i.forEach(a=>t.set(a,[])),e.length==0)return t;let n=1,s=new Set(e),r=new Map;function o(a){if(!a)return n;let l=r.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:s.has(c)?l=n:l=o(c),r.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==n&&t.get(l).push(a)}),t}function He(i,e){i.classList?.add(e)}function Pi(i,e){i.classList?.remove(e)}function ig(i,e,t){St(t).onDone(()=>i.processLeaveNode(e))}function ng(i){let e=[];return Od(i,e),e}function Od(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof Ci?Od(n.players,e):e.push(n)}}function sg(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let s=0;s<t.length;s++){let r=t[s];if(!e.hasOwnProperty(r)||i[r]!==e[r])return!1}return!0}function Md(i,e,t){let n=t.get(i);if(!n)return!1;let s=e.get(i);return s?n.forEach(r=>s.add(r)):e.set(i,n),t.delete(i),!0}var xi=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new Bo(e.body,t,n),this._timelineEngine=new zo(e.body,t,n),this._transitionEngine.onRemovalComplete=(s,r)=>this.onRemovalComplete(s,r)}registerTrigger(e,t,n,s,r){let o=e+"-"+s,a=this._triggerCache[o];if(!a){let l=[],c=[],u=Ad(this._driver,r,l,c);if(l.length)throw sd(s,l);a=Hm(s,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,s){this._transitionEngine.insertNode(e,t,n,s)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,s){if(n.charAt(0)=="@"){let[r,o]=vo(n),a=s;this._timelineEngine.command(r,t,o,a)}else this._transitionEngine.trigger(e,t,n,s)}listen(e,t,n,s,r){if(n.charAt(0)=="@"){let[o,a]=vo(n);return this._timelineEngine.listen(o,t,a,r)}return this._transitionEngine.listen(e,t,n,s,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function rg(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=ko(e[0]),e.length>1&&(n=ko(e[e.length-1]))):e instanceof Map&&(t=ko(e)),t||n?new og(i,t,n):null}var og=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,s){this._element=t,this._startStyles=n,this._endStyles=s;let r=i.initialStylesByElement.get(t);r||i.initialStylesByElement.set(t,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Je(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Je(this._element,this._initialStyles),this._endStyles&&(Je(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Ot(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ot(this._element,this._endStyles),this._endStyles=null),Je(this._element,this._initialStyles),this._state=3)}}return i})();function ko(i){let e=null;return i.forEach((t,n)=>{ag(n)&&(e=e||new Map,e.set(n,t))}),e}function ag(i){return i==="display"||i==="position"}var Os=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,s){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=s,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();return t.addEventListener("finish",n),this.onDestroy(()=>{t.removeEventListener("finish",n)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){let s=this._convertKeyframesToObject(t);try{return e.animate(s,n)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,s)=>{s!=="offset"&&e.set(s,this._finished?n:Ts(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Ls=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return wo(e,t)}getParentElement(e){return bs(e)}query(e,t,n){return bo(e,t,n)}computeStyle(e,t,n){return Ts(e,t)}animate(e,t,n,s,r,o=[]){let a=s==0?"both":"forwards",l={duration:n,delay:s,fill:a};r&&(l.easing=r);let c=new Map,u=o.filter(p=>p instanceof Os);_d(n,s)&&u.forEach(p=>{p.currentSnapshot.forEach((d,h)=>c.set(h,d))});let f=gd(t).map(p=>new Map(p));f=vd(e,f,c);let m=rg(e,f);return new Os(e,f,l,m)}};var Ms="@",Ld="@.disabled",Fs=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,s){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=s}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,s=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,n,s){if(s){this.delegate.removeChild(e,t,n,s);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,s){this.delegate.setAttribute(e,t,n,s)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,s){this.delegate.setStyle(e,t,n,s)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Ms&&t==Ld?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,s){return this.delegate.listen(e,t,n,s)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Wo=class extends Fs{factory;constructor(e,t,n,s,r){super(t,n,s,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Ms?t.charAt(1)=="."&&t==Ld?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,s){if(t.charAt(0)==Ms){let r=lg(e),o=t.slice(1),a="";return o.charAt(0)!=Ms&&([o,a]=cg(o)),this.engine.listen(this.namespaceId,r,o,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,n,l)})}return this.delegate.listen(e,t,n,s)}};function lg(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function cg(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var zs=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(s,r)=>{r?.removeChild(null,s)}}createRenderer(e,t){let s=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(s);if(!u){let f=()=>c.delete(s);u=new Fs("",s,this.engine,f),c.set(s,u)}return u}let r=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(r,o,e,c.name,c)};return t.data.animation.forEach(a),new Wo(this,o,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let s=this._animationCallbacksBuffer;s.length==0&&queueMicrotask(()=>{this._zone.run(()=>{s.forEach(r=>{let[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),s.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var dg=(()=>{class i extends xi{constructor(t,n,s){super(t,n,s)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(W(dc),W(Jt),W(ei))};static \u0275prov=ne({token:i,factory:i.\u0275fac})}return i})();function hg(){return new ks}function fg(i,e,t){return new zs(i,e,t)}var zd=[{provide:ei,useFactory:hg},{provide:xi,useClass:dg},{provide:fc,useFactory:fg,deps:[wc,xi,ge]}],pg=[{provide:Jt,useClass:Uo},{provide:Ur,useValue:"NoopAnimations"},...zd],Fd=[{provide:Jt,useFactory:()=>new Ls},{provide:Ur,useFactory:()=>"BrowserAnimations"},...zd],$d=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?pg:Fd}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=be({type:i});static \u0275inj=we({providers:Fd,imports:[es]})}return i})();var Bd=(()=>{let e=class e{constructor(n,s,r){this.router=n,this.auth=s,this.storageService=r,this.refreshTokenInProgress=!1,this.tokenRefreshedSource=new pi,this.tokenRefreshed$=this.tokenRefreshedSource.asObservable()}refreshToken(){if(this.refreshTokenInProgress)return new Le(n=>{this.tokenRefreshed$.subscribe(()=>{n.next(!0),n.complete()})});{this.refreshTokenInProgress=!0;let n={refreshToken:JSON.parse(localStorage.getItem("refresh_token"))},s={"Accept-Language":"EN"};return this.auth.getRefreshToken(n,s).pipe(sc(r=>{this.updatedAuthData=r,this.refreshTokenInProgress=!1,this.tokenRefreshedSource.next(!0)}))}}handleResponseError(n,s,r){return n.status===400&&(n.error.response[0]=="Invalid Refresh token or token expired, Please login again using username and password."||n.error.response[0]=="Refresh token should not be empty."||n.error.response[0]=="Your session has been expired. Please login again."||n.error.response[0]==`You have been logged out because your account is active on another device.
Please login again using username and password.`)&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_type"),sessionStorage.setItem("logOut",JSON.stringify(!0)),this.router.navigate(["/login"])),n.status===401&&n.error.response[0]=="Your session has been expired. Please login again."&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_type"),sessionStorage.setItem("logOut",JSON.stringify(!0)),this.router.navigate(["/login"])),n.status===401&&n.error.response[0]=="Authentication Failed"&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_type"),sessionStorage.setItem("logOut",JSON.stringify(!0))),n.status===401&&n.error.response[0]!="Your session has been expired. Please login again."?this.refreshToken().pipe(de(o=>{this.storageService.setAccessToken(o.response.access_token);let a=o.response.access_token,l=o.response.token_type;return s=s.clone({setHeaders:{Authorization:l+" "+a,"Content-Type":"application/json"}}),r.handle(s)}),Yt(o=>{if(o.status!==401)return this.handleResponseError(o)})):Qn(n)}intercept(n,s){return this.updatedAuthData&&this.updatedAuthData.access_token&&(n=n.clone({setHeaders:{Authorization:this.updatedAuthData.token_type+" "+this.updatedAuthData.access_token,"Content-Type":"application/json"}})),s.handle(n).pipe(Yt(r=>this.handleResponseError(r,n,s)))}};e.\u0275fac=function(s){return new(s||e)(W(vi),W(Lc),W(kc))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})();var Wd="@firebase/database",Ud="1.0.20";var tl="";function il(i){tl=i}var Qo=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),le(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:is(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Zo=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return je(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var vh=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){let e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qo(e)}}catch{}return new Zo},ii=vh("localStorage"),Jo=vh("sessionStorage");var Ni=new rs("@firebase/database"),wh=(function(){let i=1;return function(){return i++}})(),bh=function(i){let e=Qc(i),t=new Xc;t.update(e);let n=t.digest();return $c.encodeByteArray(n)},On=function(...i){let e="";for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=On.apply(null,n):typeof n=="object"?e+=le(n):e+=n,e+=" "}return e},ni=null,jd=!0,Eh=function(i,e){F(!e||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(Ni.logLevel=Zc.VERBOSE,ni=Ni.log.bind(Ni),e&&Jo.set("logging_enabled",!0)):typeof i=="function"?ni=i:(ni=null,Jo.remove("logging_enabled"))},pe=function(...i){if(jd===!0&&(jd=!1,ni===null&&Jo.get("logging_enabled")===!0&&Eh(!0)),ni){let e=On.apply(null,i);ni(e)}},Ln=function(i){return function(...e){pe(i,...e)}},ea=function(...i){let e="FIREBASE INTERNAL ERROR: "+On(...i);Ni.error(e)},ct=function(...i){let e=`FIREBASE FATAL ERROR: ${On(...i)}`;throw Ni.error(e),new Error(e)},Ce=function(...i){let e="FIREBASE WARNING: "+On(...i);Ni.warn(e)},mg=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ce("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},hr=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},gg=function(i){if(st()||document.readyState==="complete")i();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},$t="[MIN_NAME]",Ct="[MAX_NAME]",ri=function(i,e){if(i===e)return 0;if(i===$t||e===Ct)return-1;if(e===$t||i===Ct)return 1;{let t=Hd(i),n=Hd(e);return t!==null?n!==null?t-n===0?i.length-e.length:t-n:-1:n!==null?1:i<e?-1:1}},yg=function(i,e){return i===e?0:i<e?-1:1},hn=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+le(e))},nl=function(i){if(typeof i!="object"||i===null)return le(i);let e=[];for(let n in i)e.push(n);e.sort();let t="{";for(let n=0;n<e.length;n++)n!==0&&(t+=","),t+=le(e[n]),t+=":",t+=nl(i[e[n]]);return t+="}",t},Sh=function(i,e){let t=i.length;if(t<=e)return[i];let n=[];for(let s=0;s<t;s+=e)s+e>t?n.push(i.substring(s,t)):n.push(i.substring(s,s+e));return n};function me(i,e){for(let t in i)i.hasOwnProperty(t)&&e(t,i[t])}var Ch=function(i){F(!hr(i),"Invalid JSON number");let e=11,t=52,n=(1<<e-1)-1,s,r,o,a,l;i===0?(r=0,o=0,s=1/i===-1/0?1:0):(s=i<0,i=Math.abs(i),i>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(i)/Math.LN2),n),r=a+n,o=Math.round(i*Math.pow(2,t-a)-Math.pow(2,t))):(r=0,o=Math.round(i/Math.pow(2,1-n-t))));let c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();let u=c.join(""),f="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},_g=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vg=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function wg(i,e){let t="Unknown Error";i==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?t="Client doesn't have permission to access the desired data.":i==="unavailable"&&(t="The service is unavailable");let n=new Error(i+" at "+e._path.toString()+": "+t);return n.code=i.toUpperCase(),n}var bg=new RegExp("^-?(0*)\\d{1,10}$"),Eg=-2147483648,Sg=2147483647,Hd=function(i){if(bg.test(i)){let e=Number(i);if(e>=Eg&&e<=Sg)return e}return null},Wi=function(i){try{i()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Ce("Exception was thrown by user callback.",t),e},Math.floor(0))}},Cg=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gn=function(i,e){let t=setTimeout(i,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var ta=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,eu(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Ce(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var ia=class{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(pe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ce(e)}},yn=(()=>{class i{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}i.OWNER="owner";return i})(),Bs="5",Th="v",Ih="s",Ph="r",xh="f",Mh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kh="ls",Ah="p",na="ac",Nh="websocket",Rh="long_polling";var Ws=class{constructor(e,t,n,s,r=!1,o="",a=!1,l=!1,c=null){this.secure=t,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ii.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ii.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Tg(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function Dh(i,e,t){F(typeof e=="string","typeof type must == string"),F(typeof t=="object","typeof params must == object");let n;if(e===Nh)n=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===Rh)n=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Tg(i)&&(t.ns=i.namespace);let s=[];return me(t,(r,o)=>{s.push(r+"="+o)}),n+s.join("&")}var sa=class{constructor(){this.counters_={}}incrementCounter(e,t=1){je(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Wc(this.counters_)}};var Ho={},Vo={};function sl(i){let e=i.toString();return Ho[e]||(Ho[e]=new sa),Ho[e]}function Ig(i,e){let t=i.toString();return Vo[t]||(Vo[t]=e()),Vo[t]}var ra=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&Wi(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Vd="start",Pg="close",xg="pLPCommand",Mg="pRTLPCB",Oh="id",Lh="pw",Fh="ser",kg="cb",Ag="seg",Ng="ts",Rg="d",Dg="dframe",zh=1870,$h=30,Og=zh-$h,Lg=25e3,Fg=3e4,bn=class i{constructor(e,t,n,s,r,o,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ln(e),this.stats_=sl(t),this.urlFn=l=>(this.appCheckToken&&(l[na]=this.appCheckToken),Dh(t,Rh,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ra(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Fg)),gg(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oa((...r)=>{let[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Vd)this.id=a,this.password=l;else if(o===Pg)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{let[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let n={};n[Vd]="t",n[Fh]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[kg]=this.scriptTagHolder.uniqueCallbackIdentifier),n[Th]=Bs,this.transportSessionId&&(n[Ih]=this.transportSessionId),this.lastSessionId&&(n[kh]=this.lastSessionId),this.applicationId&&(n[Ah]=this.applicationId),this.appCheckToken&&(n[na]=this.appCheckToken),typeof location<"u"&&location.hostname&&Mh.test(location.hostname)&&(n[Ph]=xh);let s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){i.forceAllow_=!0}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){return st()?!1:i.forceAllow_?!0:!i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_g()&&!vg()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=le(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=Bc(t),s=Sh(n,Og);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(st())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[Dg]="t",n[Oh]=e,n[Lh]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=le(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},oa=class i{constructor(e,t,n,s){if(this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,st())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=wh(),window[xg+this.uniqueCallbackIdentifier]=e,window[Mg+this.uniqueCallbackIdentifier]=t,this.myIFrame=i.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){pe("frame writing exception"),a.stack&&pe(a.stack),pe(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||pe("No IE domain setting required")}catch{let n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Oh]=this.myID,e[Lh]=this.myPW,e[Fh]=this.currentSerial;let t=this.urlFn(e),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$h+n.length<=zh;){let o=this.pendingSegs.shift();n=n+"&"+Ag+s+"="+o.seg+"&"+Ng+s+"="+o.ts+"&"+Rg+s+"="+o.d,s++}return t=t+n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(n,Math.floor(Lg)),r=()=>{clearTimeout(s),n()};this.addTag(e,r)}addTag(e,t){st()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{pe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var zg=16384,$g=45e3,Us=null;typeof MozWebSocket<"u"?Us=MozWebSocket:typeof WebSocket<"u"&&(Us=WebSocket);var ki=(()=>{class i{constructor(t,n,s,r,o,a,l){this.connId=t,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ln(this.connId),this.stats_=sl(n),this.connURL=i.connectionURL_(n,a,l,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,s,r,o){let a={};return a[Th]=Bs,!st()&&typeof location<"u"&&location.hostname&&Mh.test(location.hostname)&&(a[Ph]=xh),n&&(a[Ih]=n),s&&(a[kh]=s),r&&(a[na]=r),o&&(a[Ah]=o),Dh(t,Nh,a)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ii.set("previous_websocket_failure",!0);try{let s;if(st()){let r=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${Bs}/${tl}/${process.platform}/${r}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(s.proxy={origin:a})}this.mySock=new Us(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&Us!==null&&!i.forceDisallow_}static previouslyFailed(){return ii.isInMemoryStorage||ii.get("previous_websocket_failure")===!0}markConnectionHealthy(){ii.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let s=is(n);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(F(this.frames===null,"We already have a frame buffer"),t.length<=6){let n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();let n=le(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let s=Sh(n,zg);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor($g))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4;return i})(),Bh=(()=>{class i{static get ALL_TRANSPORTS(){return[bn,ki]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let n=ki&&ki.isAvailable(),s=n&&!ki.previouslyFailed();if(t.webSocketOnly&&(n||Ce("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ki];else{let r=this.transports_=[];for(let o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i.globalTransportInitialized_=!1;return i})(),Bg=6e4,Wg=5e3,Ug=10*1024,jg=100*1024,qo="t",qd="d",Hg="s",Yd="r",Vg="e",Gd="o",Kd="a",Xd="n",Qd="p",qg="h",aa=class{constructor(e,t,n,s,r,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ln("c:"+this.id+":"),this.transportManager_=new Bh(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));let s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=gn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>jg?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ug?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(qo in e){let t=e[qo];t===Kd?this.upgradeIfSecondaryHealthy_():t===Yd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Gd&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=hn("t",e),n=hn("d",e);if(t==="c")this.onSecondaryControl_(n);else if(t==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Qd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Kd,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xd,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=hn("t",e),n=hn("d",e);t==="c"?this.onControl_(n):t==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=hn(qo,e);if(qd in e){let n=e[qd];if(t===qg){let s=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===Xd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Hg?this.onConnectionShutdown_(n):t===Yd?this.onReset_(n):t===Vg?ea("Server Error: "+n):t===Gd?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ea("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,n=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Bs!==n&&Ce("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),gn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Bg))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Wg))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Qd,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ii.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var js=class{put(e,t,n,s){}merge(e,t,n,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}};var Hs=class{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let s=this.getInitialEvent(e);s&&t.apply(n,s)}off(e,t,n){this.validateEventType_(e);let s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===t&&(!n||n===s[r].context)){s.splice(r,1);return}}validateEventType_(e){F(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Vs=class i extends Hs{static getInstance(){return new i}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Qr()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Zd=32,Jd=768,J=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Z(){return new J("")}function G(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Bt(i){return i.pieces_.length-i.pieceNum_}function se(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new J(i.pieces_,e)}function rl(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Yg(i){let e="";for(let t=i.pieceNum_;t<i.pieces_.length;t++)i.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[t])));return e||"/"}function En(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function Wh(i){if(i.pieceNum_>=i.pieces_.length)return null;let e=[];for(let t=i.pieceNum_;t<i.pieces_.length-1;t++)e.push(i.pieces_[t]);return new J(e,0)}function oe(i,e){let t=[];for(let n=i.pieceNum_;n<i.pieces_.length;n++)t.push(i.pieces_[n]);if(e instanceof J)for(let n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{let n=e.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&t.push(n[s])}return new J(t,0)}function K(i){return i.pieceNum_>=i.pieces_.length}function Ie(i,e){let t=G(i),n=G(e);if(t===null)return e;if(t===n)return Ie(se(i),se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function Gg(i,e){let t=En(i,0),n=En(e,0);for(let s=0;s<t.length&&s<n.length;s++){let r=ri(t[s],n[s]);if(r!==0)return r}return t.length===n.length?0:t.length<n.length?-1:1}function ol(i,e){if(Bt(i)!==Bt(e))return!1;for(let t=i.pieceNum_,n=e.pieceNum_;t<=i.pieces_.length;t++,n++)if(i.pieces_[t]!==e.pieces_[n])return!1;return!0}function Ve(i,e){let t=i.pieceNum_,n=e.pieceNum_;if(Bt(i)>Bt(e))return!1;for(;t<i.pieces_.length;){if(i.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}var la=class{constructor(e,t){this.errorPrefix_=t,this.parts_=En(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=en(this.parts_[n]);Uh(this)}};function Kg(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=en(e),Uh(i)}function Xg(i){let e=i.parts_.pop();i.byteLength_-=en(e),i.parts_.length>0&&(i.byteLength_-=1)}function Uh(i){if(i.byteLength_>Jd)throw new Error(i.errorPrefix_+"has a key path longer than "+Jd+" bytes ("+i.byteLength_+").");if(i.parts_.length>Zd)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zd+") or object contains a cycle "+ti(i))}function ti(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}var ca=class i extends Hs{static getInstance(){return new i}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}};var fn=1e3,Qg=300*1e3,eh=30*1e3,Zg=1.3,Jg=3e4,ey="server_kill",th=3,al=(()=>{class i extends js{constructor(t,n,s,r,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=i.nextPersistentConnectionId_++,this.log_=Ln("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fn,this.maxReconnectDelay_=Qg,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!st())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ca.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Vs.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,s){let r=++this.requestNumber_,o={r,a:t,b:n};this.log_(le(o)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(t){this.initConnection_();let n=new Te,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(t,n,s,r){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),F(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:r,hashFn:n,query:t,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let n=this.outstandingGets_[t];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(t){let n=t.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);let o={p:s},a="q";t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;i.warnOnListenWarnings_(c,n),(this.listens.get(s)&&this.listens.get(s).get(r))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(s,r),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&je(t,"w")){let s=At(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Ce(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Yc(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=eh)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,n=qc(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{let o=r.s,a=r.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let n=t.s,s=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(t,n){let s=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),F(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,t._queryObject,n)}sendUnlisten_(t,n,s,r){this.log_("Unlisten on "+t+" for "+n);let o={p:t},a="n";r&&(o.q=s,o.t=r),this.sendRequest(a,o)}onDisconnectPut(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:s})}onDisconnectMerge(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:s})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,s,r){let o={p:n,d:s};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(t,n,s,r){this.putInternal("p",t,n,s,r)}merge(t,n,s,r){this.putInternal("m",t,n,s,r)}putInternal(t,n,s,r,o){this.initConnection_();let a={p:n,d:s};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:r}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){let n=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,s,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(t){if(this.connected_){let n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){let o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+le(t));let n=t.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):ea("Unrecognized action received from server: "+le(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=fn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Jg&&(this.reconnectDelay_=fn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Zg)}this.onConnectStatus_(!1)}establishConnection_(){return Xn(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+i.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,s())},u=function(m){F(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(m)};this.realtime_={close:c,sendRequest:u};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,p]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?pe("getToken() completed but was canceled"):(pe("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=p&&p.token,l=new aa(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,s,d=>{Ce(d+" ("+this.repoInfo_.toString()+")"),this.interrupt(ey)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Ce(m),c())}}})}interrupt(t){pe("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){pe("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ns(this.interruptReasons_)&&(this.reconnectDelay_=fn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let s;n?s=n.map(o=>nl(o)).join("$"):s="default";let r=this.removeListen_(t,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,n){let s=new J(t).toString(),r;if(this.listens.has(s)){let o=this.listens.get(s);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(t,n){pe("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=th&&(this.reconnectDelay_=eh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){pe("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=th&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},n="js";st()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),t["sdk."+n+"."+tl.replace(/\./g,"-")]=1,Qr()?t["framework.cordova"]=1:Vc()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Vs.getInstance().currentlyOnline();return ns(this.interruptReasons_)&&t}}i.nextPersistentConnectionId_=0,i.nextConnectionId_=0;return i})(),X=class i{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new i(e,t)}};var Ri=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new X($t,e),s=new X($t,t);return this.compare(n,s)!==0}minPost(){return X.MIN}};var $s,qs=class extends Ri{static get __EMPTY_NODE(){return $s}static set __EMPTY_NODE(e){$s=e}compare(e,t){return ri(e.name,t.name)}isDefinedOn(e){throw wi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return X.MIN}maxPost(){return new X(Ct,$s)}makePost(e,t){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new X(e,$s)}toString(){return".key"}},lt=new qs;var Ai=class{constructor(e,t,n,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},tt=(()=>{class i{constructor(t,n,s,r,o){this.key=t,this.value=n,this.color=s??i.RED,this.left=r??qe.EMPTY_NODE,this.right=o??qe.EMPTY_NODE}copy(t,n,s,r,o){return new i(t??this.key,n??this.value,s??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let r=this,o=s(t,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(t,n,s),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return qe.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let s,r;if(s=this,n(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(t,s.key)===0){if(s.right.isEmpty())return qe.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})(),ua=class{copy(e,t,n,s,r){return this}insert(e,t,n){return new tt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},qe=class i{constructor(e,t=i.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new i(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,tt.BLACK,null,null))}remove(e){return new i(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tt.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,s=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ai(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ai(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ai(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ai(this.root_,null,this.comparator_,!0,e)}};qe.EMPTY_NODE=new ua;function ty(i,e){return ri(i.name,e.name)}function ll(i,e){return ri(i,e)}var da;function iy(i){da=i}var jh=function(i){return typeof i=="number"?"number:"+Ch(i):"string:"+i},Hh=function(i){if(i.isLeafNode()){let e=i.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&je(e,".sv"),"Priority must be a string or number.")}else F(i===da||i.isEmpty(),"priority of unexpected type.");F(i===da||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var ih,Di=(()=>{class i{static set __childrenNodeConstructor(t){ih=t}static get __childrenNodeConstructor(){return ih}constructor(t,n=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Hh(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new i(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return K(t)?this:G(t)===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){let s=G(t);return s===null?n:n.isEmpty()&&s!==".priority"?this:(F(s!==".priority"||Bt(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(se(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+jh(this.priorityNode_.val())+":");let n=typeof this.value_;t+=n+":",n==="number"?t+=Ch(this.value_):t+=this.value_,this.lazyHash_=bh(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===i.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof i.__childrenNodeConstructor?-1:(F(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let n=typeof t.value_,s=typeof this.value_,r=i.VALUE_TYPE_ORDER.indexOf(n),o=i.VALUE_TYPE_ORDER.indexOf(s);return F(r>=0,"Unknown leaf type: "+n),F(o>=0,"Unknown leaf type: "+s),r===o?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}i.VALUE_TYPE_ORDER=["object","boolean","number","string"];return i})(),Vh,qh;function ny(i){Vh=i}function sy(i){qh=i}var ha=class extends Ri{compare(e,t){let n=e.node.getPriority(),s=t.node.getPriority(),r=n.compareTo(s);return r===0?ri(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return X.MIN}maxPost(){return new X(Ct,new Di("[PRIORITY-POST]",qh))}makePost(e,t){let n=Vh(e);return new X(t,new Di("[PRIORITY-POST]",n))}toString(){return".priority"}},re=new ha;var ry=Math.log(2),fa=class{constructor(e){let t=r=>parseInt(Math.log(r)/ry,10),n=r=>parseInt(Array(r+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let s=n(this.count);this.bits_=e+1&s}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Ys=function(i,e,t,n){i.sort(e);let s=function(l,c){let u=c-l,f,m;if(u===0)return null;if(u===1)return f=i[l],m=t?t(f):f,new tt(m,f.node,tt.BLACK,null,null);{let p=parseInt(u/2,10)+l,d=s(l,p),h=s(p+1,c);return f=i[p],m=t?t(f):f,new tt(m,f.node,tt.BLACK,d,h)}},r=function(l){let c=null,u=null,f=i.length,m=function(d,h){let g=f-d,v=f;f-=d;let y=s(g+1,v),_=i[g],b=t?t(_):_;p(new tt(b,_.node,h,null,y))},p=function(d){c?(c.left=d,c=d):(u=d,c=d)};for(let d=0;d<l.count;++d){let h=l.nextBitIsOne(),g=Math.pow(2,l.count-(d+1));h?m(g,tt.BLACK):(m(g,tt.BLACK),m(g,tt.RED))}return u},o=new fa(i.length),a=r(o);return new qe(n||e,a)};var Yo,Mi={},Oi=class i{static get Default(){return F(Mi&&re,"ChildrenNode.ts has not been loaded"),Yo=Yo||new i({".priority":Mi},{".priority":re}),Yo}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=At(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qe?t:null}hasIndex(e){return je(this.indexSet_,e.toString())}addIndex(e,t){F(e!==lt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],s=!1,r=t.getIterator(X.Wrap),o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),n.push(o),o=r.getNext();let a;s?a=Ys(n,e.getCompare()):a=Mi;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let u=Object.assign({},this.indexes_);return u[l]=a,new i(u,c)}addToIndexes(e,t){let n=Ji(this.indexes_,(s,r)=>{let o=At(this.indexSet_,r);if(F(o,"Missing index implementation for "+r),s===Mi)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(X.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Ys(a,o.getCompare())}else return Mi;else{let a=t.get(e.name),l=s;return a&&(l=l.remove(new X(e.name,a))),l.insert(e,e.node)}});return new i(n,this.indexSet_)}removeFromIndexes(e,t){let n=Ji(this.indexes_,s=>{if(s===Mi)return s;{let r=t.get(e.name);return r?s.remove(new X(e.name,r)):s}});return new i(n,this.indexSet_)}};var pn,j=(()=>{class i{static get EMPTY_NODE(){return pn||(pn=new i(new qe(ll),null,Oi.Default))}constructor(t,n,s){this.children_=t,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Hh(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pn}updatePriority(t){return this.children_.isEmpty()?this:new i(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let n=this.children_.get(t);return n===null?pn:n}}getChild(t){let n=G(t);return n===null?this:this.getImmediateChild(n).getChild(se(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(F(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{let s=new X(t,n),r,o;n.isEmpty()?(r=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(s,this.children_));let a=r.isEmpty()?pn:this.priorityNode_;return new i(r,a,o)}}updateChild(t,n){let s=G(t);if(s===null)return n;{F(G(t)!==".priority"||Bt(t)===1,".priority must be the last token in a path");let r=this.getImmediateChild(s).updateChild(se(t),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let n={},s=0,r=0,o=!0;if(this.forEachChild(re,(a,l)=>{n[a]=l.val(t),s++,o&&i.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!t&&o&&r<2*s){let a=[];for(let l in n)a[l]=n[l];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+jh(this.getPriority().val())+":"),this.forEachChild(re,(n,s)=>{let r=s.hash();r!==""&&(t+=":"+n+":"+r)}),this.lazyHash_=t===""?"":bh(t)}return this.lazyHash_}getPredecessorChildName(t,n,s){let r=this.resolveIndex_(s);if(r){let o=r.getPredecessorKey(new X(t,n));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let n=this.resolveIndex_(t);if(n){let s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){let n=this.getFirstChildName(t);return n?new X(n,this.children_.get(n)):null}getLastChildName(t){let n=this.resolveIndex_(t);if(n){let s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){let n=this.getLastChildName(t);return n?new X(n,this.children_.get(n)):null}forEachChild(t,n){let s=this.resolveIndex_(t);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){let s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(t,r=>r);{let r=this.children_.getIteratorFrom(t.name,X.Wrap),o=r.peek();for(;o!=null&&n.compare(o,t)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){let s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(t,r=>r);{let r=this.children_.getReverseIteratorFrom(t.name,X.Wrap),o=r.peek();for(;o!=null&&n.compare(o,t)>0;)r.getNext(),o=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Fn?-1:0}withIndex(t){if(t===lt||this.indexMap_.hasIndex(t))return this;{let n=this.indexMap_.addIndex(t,this.children_);return new i(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===lt||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let s=this.getIterator(re),r=n.getIterator(re),o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===lt?null:this.indexMap_.get(t.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})(),pa=class extends j{constructor(){super(new qe(ll),j.EMPTY_NODE,Oi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return j.EMPTY_NODE}isEmpty(){return!1}},Fn=new pa;Object.defineProperties(X,{MIN:{value:new X($t,j.EMPTY_NODE)},MAX:{value:new X(Ct,Fn)}});qs.__EMPTY_NODE=j.EMPTY_NODE;Di.__childrenNodeConstructor=j;iy(Fn);sy(Fn);var oy=!0;function ae(i,e=null){if(i===null)return j.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){let t=i;return new Di(t,ae(e))}if(!(i instanceof Array)&&oy){let t=[],n=!1;if(me(i,(o,a)=>{if(o.substring(0,1)!=="."){let l=ae(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),t.push(new X(o,l)))}}),t.length===0)return j.EMPTY_NODE;let r=Ys(t,ty,o=>o.name,ll);if(n){let o=Ys(t,re.getCompare());return new j(r,ae(e),new Oi({".priority":o},{".priority":re}))}else return new j(r,ae(e),Oi.Default)}else{let t=j.EMPTY_NODE;return me(i,(n,s)=>{if(je(i,n)&&n.substring(0,1)!=="."){let r=ae(s);(r.isLeafNode()||!r.isEmpty())&&(t=t.updateImmediateChild(n,r))}}),t.updatePriority(ae(e))}}ny(ae);var Sn=class extends Ri{constructor(e){super(),this.indexPath_=e,F(!K(e)&&G(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),s=this.extractChild(t.node),r=n.compareTo(s);return r===0?ri(e.name,t.name):r}makePost(e,t){let n=ae(e),s=j.EMPTY_NODE.updateChild(this.indexPath_,n);return new X(t,s)}maxPost(){let e=j.EMPTY_NODE.updateChild(this.indexPath_,Fn);return new X(Ct,e)}toString(){return En(this.indexPath_,0).join("/")}};var ma=class extends Ri{compare(e,t){let n=e.node.compareTo(t.node);return n===0?ri(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return X.MIN}maxPost(){return X.MAX}makePost(e,t){let n=ae(e);return new X(t,n)}toString(){return".value"}},cl=new ma;function Yh(i){return{type:"value",snapshotNode:i}}function Li(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function Cn(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function Tn(i,e,t){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:t}}function ay(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}var In=class{constructor(e){this.index_=e}updateChild(e,t,n,s,r,o){F(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(s).equals(n.getChild(s))&&a.isEmpty()===n.isEmpty()||(o!=null&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Cn(t,a)):F(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Li(t,n)):o.trackChildChange(Tn(t,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return n!=null&&(e.isLeafNode()||e.forEachChild(re,(s,r)=>{t.hasChild(s)||n.trackChildChange(Cn(s,r))}),t.isLeafNode()||t.forEachChild(re,(s,r)=>{if(e.hasChild(s)){let o=e.getImmediateChild(s);o.equals(r)||n.trackChildChange(Tn(s,r,o))}else n.trackChildChange(Li(s,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?j.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Gs=class i{constructor(e){this.indexedFilter_=new In(e.getIndex()),this.index_=e.getIndex(),this.startPost_=i.getStartPost_(e),this.endPost_=i.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,s,r,o){return this.matches(new X(t,n))||(n=j.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,s,r,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=j.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(j.EMPTY_NODE);let r=this;return t.forEachChild(re,(o,a)=>{r.matches(new X(o,a))||(s=s.updateImmediateChild(o,j.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var ga=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let n=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=t=>{let n=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new Gs(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,s,r,o){return this.rangedFilter_.matches(new X(t,n))||(n=j.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,s,r,o):this.fullLimitUpdateChild_(e,t,n,r,o)}updateFullNode(e,t,n){let s;if(t.isLeafNode()||t.isEmpty())s=j.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=j.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){let a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(j.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){let a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,j.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,s,r){let o;if(this.reverse_){let f=this.index_.getCompare();o=(m,p)=>f(p,m)}else o=this.index_.getCompare();let a=e;F(a.numChildren()===this.limit_,"");let l=new X(t,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){let f=a.getImmediateChild(t),m=s.getChildAfterChild(this.index_,c,this.reverse_);for(;m!=null&&(m.name===t||a.hasChild(m.name));)m=s.getChildAfterChild(this.index_,m,this.reverse_);let p=m==null?1:o(m,l);if(u&&!n.isEmpty()&&p>=0)return r?.trackChildChange(Tn(t,n,f)),a.updateImmediateChild(t,n);{r?.trackChildChange(Cn(t,f));let h=a.updateImmediateChild(t,j.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(r?.trackChildChange(Li(m.name,m.node)),h.updateImmediateChild(m.name,m.node)):h}}else return n.isEmpty()?e:u&&o(c,l)>=0?(r!=null&&(r.trackChildChange(Cn(c.name,c.node)),r.trackChildChange(Li(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(c.name,j.EMPTY_NODE)):e}};var Pn=class i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=re}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$t}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ct}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===re}copy(){let e=new i;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function ly(i){return i.loadsAllData()?new In(i.getIndex()):i.hasLimit()?new ga(i):new Gs(i)}function cy(i,e){let t=i.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function uy(i,e){let t=i.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function ya(i,e,t){let n=i.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,t!=null?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n}function dy(i,e,t){let n;return i.index_===lt||t?n=ya(i,e,t):n=ya(i,e,Ct),n.startAfterSet_=!0,n}function _a(i,e,t){let n=i.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,t!==void 0?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n}function hy(i,e,t){let n;return i.index_===lt||t?n=_a(i,e,t):n=_a(i,e,$t),n.endBeforeSet_=!0,n}function fr(i,e){let t=i.copy();return t.index_=e,t}function nh(i){let e={};if(i.isDefault())return e;let t;if(i.index_===re?t="$priority":i.index_===cl?t="$value":i.index_===lt?t="$key":(F(i.index_ instanceof Sn,"Unrecognized index type!"),t=i.index_.toString()),e.orderBy=le(t),i.startSet_){let n=i.startAfterSet_?"startAfter":"startAt";e[n]=le(i.indexStartValue_),i.startNameSet_&&(e[n]+=","+le(i.indexStartName_))}if(i.endSet_){let n=i.endBeforeSet_?"endBefore":"endAt";e[n]=le(i.indexEndValue_),i.endNameSet_&&(e[n]+=","+le(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function sh(i){let e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let t=i.viewFrom_;t===""&&(i.isViewFromLeft()?t="l":t="r"),e.vf=t}return i.index_!==re&&(e.i=i.index_.toString()),e}var va=class i extends js{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=Ln("p:rest:"),this.listens_={}}listen(e,t,n,s){let r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);let o=i.getListenId_(e,n),a={};this.listens_[o]=a;let l=nh(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let f=u;if(c===404&&(f=null,c=null),c===null&&this.onDataUpdate_(r,f,!1,n),At(this.listens_,o)===a){let m;c?c===401?m="permission_denied":m="rest_error:"+c:m="ok",s(m,null)}})}unlisten(e,t){let n=i.getListenId_(e,t);delete this.listens_[n]}get(e){let t=nh(e._queryParams),n=e._path.toString(),s=new Te;return this.restRequest_(n+".json",t,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(n,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(t.auth=s.accessToken),r&&r.token&&(t.ac=r.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Kc(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=is(a.responseText)}catch{Ce("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&Ce("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}};var wa=class{constructor(){this.rootNode_=j.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Ks(){return{value:null,children:new Map}}function Ui(i,e,t){if(K(e))i.value=t,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,t);else{let n=G(e);i.children.has(n)||i.children.set(n,Ks());let s=i.children.get(n);e=se(e),Ui(s,e,t)}}function ba(i,e){if(K(e))return i.value=null,i.children.clear(),!0;if(i.value!==null){if(i.value.isLeafNode())return!1;{let t=i.value;return i.value=null,t.forEachChild(re,(n,s)=>{Ui(i,new J(n),s)}),ba(i,e)}}else if(i.children.size>0){let t=G(e);return e=se(e),i.children.has(t)&&ba(i.children.get(t),e)&&i.children.delete(t),i.children.size===0}else return!0}function Ea(i,e,t){i.value!==null?t(e,i.value):fy(i,(n,s)=>{let r=new J(e.toString()+"/"+n);Ea(s,r,t)})}function fy(i,e){i.children.forEach((t,n)=>{e(n,t)})}var Sa=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&me(this.last_,(n,s)=>{t[n]=t[n]-s}),this.last_=e,t}};var rh=10*1e3,py=30*1e3,my=300*1e3,Ca=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Sa(e);let n=rh+(py-rh)*Math.random();gn(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;me(e,(s,r)=>{r>0&&je(this.statsToReport_,s)&&(t[s]=r,n=!0)}),n&&this.server_.reportStats(t),gn(this.reportStats_.bind(this),Math.floor(Math.random()*2*my))}};var at=(function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i})(at||{});function ul(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function hl(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var Ta=class i{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=at.ACK_USER_WRITE,this.source=ul()}operationForChild(e){if(K(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new J(e));return new i(Z(),t,this.revert)}}else return F(G(this.path)===e,"operationForChild called for unrelated child."),new i(se(this.path),this.affectedTree,this.revert)}};var Xs=class i{constructor(e,t){this.source=e,this.path=t,this.type=at.LISTEN_COMPLETE}operationForChild(e){return K(this.path)?new i(this.source,Z()):new i(this.source,se(this.path))}};var Fi=class i{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=at.OVERWRITE}operationForChild(e){return K(this.path)?new i(this.source,Z(),this.snap.getImmediateChild(e)):new i(this.source,se(this.path),this.snap)}};var xn=class i{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=at.MERGE}operationForChild(e){if(K(this.path)){let t=this.children.subtree(new J(e));return t.isEmpty()?null:t.value?new Fi(this.source,Z(),t.value):new i(this.source,Z(),t)}else return F(G(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new i(this.source,se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ut=class{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(K(e))return this.isFullyInitialized()&&!this.filtered_;let t=G(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Ia=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function gy(i,e,t,n){let s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(ay(o.childName,o.snapshotNode))}),mn(i,s,"child_removed",e,n,t),mn(i,s,"child_added",e,n,t),mn(i,s,"child_moved",r,n,t),mn(i,s,"child_changed",e,n,t),mn(i,s,"value",e,n,t),s}function mn(i,e,t,n,s,r){let o=n.filter(a=>a.type===t);o.sort((a,l)=>_y(i,a,l)),o.forEach(a=>{let l=yy(i,a,r);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,i.query_))})})}function yy(i,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function _y(i,e,t){if(e.childName==null||t.childName==null)throw wi("Should only compare child_ events.");let n=new X(e.childName,e.snapshotNode),s=new X(t.childName,t.snapshotNode);return i.index_.compare(n,s)}function pr(i,e){return{eventCache:i,serverCache:e}}function _n(i,e,t,n){return pr(new ut(e,t,n),i.serverCache)}function Gh(i,e,t,n){return pr(i.eventCache,new ut(e,t,n))}function Qs(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function si(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var Go,vy=()=>(Go||(Go=new qe(yg)),Go),Pe=class i{static fromObject(e){let t=new i(null);return me(e,(n,s)=>{t=t.set(new J(n),s)}),t}constructor(e,t=vy()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Z(),value:this.value};if(K(e))return null;{let n=G(e),s=this.children.get(n);if(s!==null){let r=s.findRootMostMatchingPathAndValue(se(e),t);return r!=null?{path:oe(new J(n),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(K(e))return this;{let t=G(e),n=this.children.get(t);return n!==null?n.subtree(se(e)):new i(null)}}set(e,t){if(K(e))return new i(t,this.children);{let n=G(e),r=(this.children.get(n)||new i(null)).set(se(e),t),o=this.children.insert(n,r);return new i(this.value,o)}}remove(e){if(K(e))return this.children.isEmpty()?new i(null):new i(null,this.children);{let t=G(e),n=this.children.get(t);if(n){let s=n.remove(se(e)),r;return s.isEmpty()?r=this.children.remove(t):r=this.children.insert(t,s),this.value===null&&r.isEmpty()?new i(null):new i(this.value,r)}else return this}}get(e){if(K(e))return this.value;{let t=G(e),n=this.children.get(t);return n?n.get(se(e)):null}}setTree(e,t){if(K(e))return t;{let n=G(e),r=(this.children.get(n)||new i(null)).setTree(se(e),t),o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),new i(this.value,o)}}fold(e){return this.fold_(Z(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((s,r)=>{n[s]=r.fold_(oe(e,s),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Z(),t)}findOnPath_(e,t,n){let s=this.value?n(t,this.value):!1;if(s)return s;if(K(e))return null;{let r=G(e),o=this.children.get(r);return o?o.findOnPath_(se(e),oe(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Z(),t)}foreachOnPath_(e,t,n){if(K(e))return this;{this.value&&n(t,this.value);let s=G(e),r=this.children.get(s);return r?r.foreachOnPath_(se(e),oe(t,s),n):new i(null)}}foreach(e){this.foreach_(Z(),e)}foreach_(e,t){this.children.inorderTraversal((n,s)=>{s.foreach_(oe(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}};var it=class i{constructor(e){this.writeTree_=e}static empty(){return new i(new Pe(null))}};function vn(i,e,t){if(K(e))return new it(new Pe(t));{let n=i.writeTree_.findRootMostValueAndPath(e);if(n!=null){let s=n.path,r=n.value,o=Ie(s,e);return r=r.updateChild(o,t),new it(i.writeTree_.set(s,r))}else{let s=new Pe(t),r=i.writeTree_.setTree(e,s);return new it(r)}}}function Pa(i,e,t){let n=i;return me(t,(s,r)=>{n=vn(n,oe(e,s),r)}),n}function oh(i,e){if(K(e))return it.empty();{let t=i.writeTree_.setTree(e,new Pe(null));return new it(t)}}function xa(i,e){return oi(i,e)!=null}function oi(i,e){let t=i.writeTree_.findRootMostValueAndPath(e);return t!=null?i.writeTree_.get(t.path).getChild(Ie(t.path,e)):null}function ah(i){let e=[],t=i.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(re,(n,s)=>{e.push(new X(n,s))}):i.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&e.push(new X(n,s.value))}),e}function Ft(i,e){if(K(e))return i;{let t=oi(i,e);return t!=null?new it(new Pe(t)):new it(i.writeTree_.subtree(e))}}function Ma(i){return i.writeTree_.isEmpty()}function zi(i,e){return Kh(Z(),i.writeTree_,e)}function Kh(i,e,t){if(e.value!=null)return t.updateChild(i,e.value);{let n=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(F(r.value!==null,"Priority writes must always be leaf nodes"),n=r.value):t=Kh(oe(i,s),r,t)}),!t.getChild(i).isEmpty()&&n!==null&&(t=t.updateChild(oe(i,".priority"),n)),t}}function mr(i,e){return Jh(e,i)}function wy(i,e,t,n,s){F(n>i.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),i.allWrites.push({path:e,snap:t,writeId:n,visible:s}),s&&(i.visibleWrites=vn(i.visibleWrites,e,t)),i.lastWriteId=n}function by(i,e,t,n){F(n>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:e,children:t,writeId:n,visible:!0}),i.visibleWrites=Pa(i.visibleWrites,e,t),i.lastWriteId=n}function Ey(i,e){for(let t=0;t<i.allWrites.length;t++){let n=i.allWrites[t];if(n.writeId===e)return n}return null}function Sy(i,e){let t=i.allWrites.findIndex(a=>a.writeId===e);F(t>=0,"removeWrite called with nonexistent writeId.");let n=i.allWrites[t];i.allWrites.splice(t,1);let s=n.visible,r=!1,o=i.allWrites.length-1;for(;s&&o>=0;){let a=i.allWrites[o];a.visible&&(o>=t&&Cy(a,n.path)?s=!1:Ve(n.path,a.path)&&(r=!0)),o--}if(s){if(r)return Ty(i),!0;if(n.snap)i.visibleWrites=oh(i.visibleWrites,n.path);else{let a=n.children;me(a,l=>{i.visibleWrites=oh(i.visibleWrites,oe(n.path,l))})}return!0}else return!1}function Cy(i,e){if(i.snap)return Ve(i.path,e);for(let t in i.children)if(i.children.hasOwnProperty(t)&&Ve(oe(i.path,t),e))return!0;return!1}function Ty(i){i.visibleWrites=Xh(i.allWrites,Iy,Z()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function Iy(i){return i.visible}function Xh(i,e,t){let n=it.empty();for(let s=0;s<i.length;++s){let r=i[s];if(e(r)){let o=r.path,a;if(r.snap)Ve(t,o)?(a=Ie(t,o),n=vn(n,a,r.snap)):Ve(o,t)&&(a=Ie(o,t),n=vn(n,Z(),r.snap.getChild(a)));else if(r.children){if(Ve(t,o))a=Ie(t,o),n=Pa(n,a,r.children);else if(Ve(o,t))if(a=Ie(o,t),K(a))n=Pa(n,Z(),r.children);else{let l=At(r.children,G(a));if(l){let c=l.getChild(se(a));n=vn(n,Z(),c)}}}else throw wi("WriteRecord should have .snap or .children")}}return n}function Qh(i,e,t,n,s){if(!n&&!s){let r=oi(i.visibleWrites,e);if(r!=null)return r;{let o=Ft(i.visibleWrites,e);if(Ma(o))return t;if(t==null&&!xa(o,Z()))return null;{let a=t||j.EMPTY_NODE;return zi(o,a)}}}else{let r=Ft(i.visibleWrites,e);if(!s&&Ma(r))return t;if(!s&&t==null&&!xa(r,Z()))return null;{let o=function(c){return(c.visible||s)&&(!n||!~n.indexOf(c.writeId))&&(Ve(c.path,e)||Ve(e,c.path))},a=Xh(i.allWrites,o,e),l=t||j.EMPTY_NODE;return zi(a,l)}}}function Py(i,e,t){let n=j.EMPTY_NODE,s=oi(i.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(re,(r,o)=>{n=n.updateImmediateChild(r,o)}),n;if(t){let r=Ft(i.visibleWrites,e);return t.forEachChild(re,(o,a)=>{let l=zi(Ft(r,new J(o)),a);n=n.updateImmediateChild(o,l)}),ah(r).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{let r=Ft(i.visibleWrites,e);return ah(r).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function xy(i,e,t,n,s){F(n||s,"Either existingEventSnap or existingServerSnap must exist");let r=oe(e,t);if(xa(i.visibleWrites,r))return null;{let o=Ft(i.visibleWrites,r);return Ma(o)?s.getChild(t):zi(o,s.getChild(t))}}function My(i,e,t,n){let s=oe(e,t),r=oi(i.visibleWrites,s);if(r!=null)return r;if(n.isCompleteForChild(t)){let o=Ft(i.visibleWrites,s);return zi(o,n.getNode().getImmediateChild(t))}else return null}function ky(i,e){return oi(i.visibleWrites,e)}function Ay(i,e,t,n,s,r,o){let a,l=Ft(i.visibleWrites,e),c=oi(l,Z());if(c!=null)a=c;else if(t!=null)a=zi(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],f=o.getCompare(),m=r?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),p=m.getNext();for(;p&&u.length<s;)f(p,n)!==0&&u.push(p),p=m.getNext();return u}else return[]}function Ny(){return{visibleWrites:it.empty(),allWrites:[],lastWriteId:-1}}function Zs(i,e,t,n){return Qh(i.writeTree,i.treePath,e,t,n)}function fl(i,e){return Py(i.writeTree,i.treePath,e)}function lh(i,e,t,n){return xy(i.writeTree,i.treePath,e,t,n)}function Js(i,e){return ky(i.writeTree,oe(i.treePath,e))}function Ry(i,e,t,n,s,r){return Ay(i.writeTree,i.treePath,e,t,n,s,r)}function pl(i,e,t){return My(i.writeTree,i.treePath,e,t)}function Zh(i,e){return Jh(oe(i.treePath,e),i.writeTree)}function Jh(i,e){return{treePath:i,writeTree:e}}var ka=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;F(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),F(n!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(n);if(s){let r=s.type;if(t==="child_added"&&r==="child_removed")this.changeMap.set(n,Tn(n,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&r==="child_added")this.changeMap.delete(n);else if(t==="child_removed"&&r==="child_changed")this.changeMap.set(n,Cn(n,s.oldSnap));else if(t==="child_changed"&&r==="child_added")this.changeMap.set(n,Li(n,e.snapshotNode));else if(t==="child_changed"&&r==="child_changed")this.changeMap.set(n,Tn(n,e.snapshotNode,s.oldSnap));else throw wi("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}};var Aa=class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}},ef=new Aa,Mn=class{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let n=this.optCompleteServerCache_!=null?new ut(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pl(this.writes_,e,n)}}getChildAfterChild(e,t,n){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:si(this.viewCache_),r=Ry(this.writes_,s,t,1,n,e);return r.length===0?null:r[0]}};function Dy(i){return{filter:i}}function Oy(i,e){F(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function Ly(i,e,t,n,s){let r=new ka,o,a;if(t.type===at.OVERWRITE){let c=t;c.source.fromUser?o=Na(i,e,c.path,c.snap,n,s,r):(F(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!K(c.path),o=er(i,e,c.path,c.snap,n,s,a,r))}else if(t.type===at.MERGE){let c=t;c.source.fromUser?o=zy(i,e,c.path,c.children,n,s,r):(F(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Ra(i,e,c.path,c.children,n,s,a,r))}else if(t.type===at.ACK_USER_WRITE){let c=t;c.revert?o=Wy(i,e,c.path,n,s,r):o=$y(i,e,c.path,c.affectedTree,n,s,r)}else if(t.type===at.LISTEN_COMPLETE)o=By(i,e,t.path,n,r);else throw wi("Unknown operation type: "+t.type);let l=r.getChanges();return Fy(e,o,l),{viewCache:o,changes:l}}function Fy(i,e,t){let n=e.eventCache;if(n.isFullyInitialized()){let s=n.getNode().isLeafNode()||n.getNode().isEmpty(),r=Qs(i);(t.length>0||!i.eventCache.isFullyInitialized()||s&&!n.getNode().equals(r)||!n.getNode().getPriority().equals(r.getPriority()))&&t.push(Yh(Qs(e)))}}function tf(i,e,t,n,s,r){let o=e.eventCache;if(Js(n,t)!=null)return e;{let a,l;if(K(t))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=si(e),u=c instanceof j?c:j.EMPTY_NODE,f=fl(n,u);a=i.filter.updateFullNode(e.eventCache.getNode(),f,r)}else{let c=Zs(n,si(e));a=i.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{let c=G(t);if(c===".priority"){F(Bt(t)===1,"Can't have a priority with additional path components");let u=o.getNode();l=e.serverCache.getNode();let f=lh(n,t,u,l);f!=null?a=i.filter.updatePriority(u,f):a=o.getNode()}else{let u=se(t),f;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let m=lh(n,t,o.getNode(),l);m!=null?f=o.getNode().getImmediateChild(c).updateChild(u,m):f=o.getNode().getImmediateChild(c)}else f=pl(n,c,e.serverCache);f!=null?a=i.filter.updateChild(o.getNode(),c,f,u,s,r):a=o.getNode()}}return _n(e,a,o.isFullyInitialized()||K(t),i.filter.filtersNodes())}}function er(i,e,t,n,s,r,o,a){let l=e.serverCache,c,u=o?i.filter:i.filter.getIndexedFilter();if(K(t))c=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){let p=l.getNode().updateChild(t,n);c=u.updateFullNode(l.getNode(),p,null)}else{let p=G(t);if(!l.isCompleteForPath(t)&&Bt(t)>1)return e;let d=se(t),g=l.getNode().getImmediateChild(p).updateChild(d,n);p===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),p,g,d,ef,null)}let f=Gh(e,c,l.isFullyInitialized()||K(t),u.filtersNodes()),m=new Mn(s,f,r);return tf(i,f,t,s,m,a)}function Na(i,e,t,n,s,r,o){let a=e.eventCache,l,c,u=new Mn(s,e,r);if(K(t))c=i.filter.updateFullNode(e.eventCache.getNode(),n,o),l=_n(e,c,!0,i.filter.filtersNodes());else{let f=G(t);if(f===".priority")c=i.filter.updatePriority(e.eventCache.getNode(),n),l=_n(e,c,a.isFullyInitialized(),a.isFiltered());else{let m=se(t),p=a.getNode().getImmediateChild(f),d;if(K(m))d=n;else{let h=u.getCompleteChild(f);h!=null?rl(m)===".priority"&&h.getChild(Wh(m)).isEmpty()?d=h:d=h.updateChild(m,n):d=j.EMPTY_NODE}if(p.equals(d))l=e;else{let h=i.filter.updateChild(a.getNode(),f,d,m,u,o);l=_n(e,h,a.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function ch(i,e){return i.eventCache.isCompleteForChild(e)}function zy(i,e,t,n,s,r,o){let a=e;return n.foreach((l,c)=>{let u=oe(t,l);ch(e,G(u))&&(a=Na(i,a,u,c,s,r,o))}),n.foreach((l,c)=>{let u=oe(t,l);ch(e,G(u))||(a=Na(i,a,u,c,s,r,o))}),a}function uh(i,e,t){return t.foreach((n,s)=>{e=e.updateChild(n,s)}),e}function Ra(i,e,t,n,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;K(t)?c=n:c=new Pe(null).setTree(t,n);let u=e.serverCache.getNode();return c.children.inorderTraversal((f,m)=>{if(u.hasChild(f)){let p=e.serverCache.getNode().getImmediateChild(f),d=uh(i,p,m);l=er(i,l,new J(f),d,s,r,o,a)}}),c.children.inorderTraversal((f,m)=>{let p=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!u.hasChild(f)&&!p){let d=e.serverCache.getNode().getImmediateChild(f),h=uh(i,d,m);l=er(i,l,new J(f),h,s,r,o,a)}}),l}function $y(i,e,t,n,s,r,o){if(Js(s,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(K(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return er(i,e,t,l.getNode().getChild(t),s,r,a,o);if(K(t)){let c=new Pe(null);return l.getNode().forEachChild(lt,(u,f)=>{c=c.set(new J(u),f)}),Ra(i,e,t,c,s,r,a,o)}else return e}else{let c=new Pe(null);return n.foreach((u,f)=>{let m=oe(t,u);l.isCompleteForPath(m)&&(c=c.set(u,l.getNode().getChild(m)))}),Ra(i,e,t,c,s,r,a,o)}}function By(i,e,t,n,s){let r=e.serverCache,o=Gh(e,r.getNode(),r.isFullyInitialized()||K(t),r.isFiltered());return tf(i,o,t,n,ef,s)}function Wy(i,e,t,n,s,r){let o;if(Js(n,t)!=null)return e;{let a=new Mn(n,e,s),l=e.eventCache.getNode(),c;if(K(t)||G(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Zs(n,si(e));else{let f=e.serverCache.getNode();F(f instanceof j,"serverChildren would be complete if leaf node"),u=fl(n,f)}u=u,c=i.filter.updateFullNode(l,u,r)}else{let u=G(t),f=pl(n,u,e.serverCache);f==null&&e.serverCache.isCompleteForChild(u)&&(f=l.getImmediateChild(u)),f!=null?c=i.filter.updateChild(l,u,f,se(t),a,r):e.eventCache.getNode().hasChild(u)?c=i.filter.updateChild(l,u,j.EMPTY_NODE,se(t),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Zs(n,si(e)),o.isLeafNode()&&(c=i.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||Js(n,Z())!=null,_n(e,c,o,i.filter.filtersNodes())}}var Da=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,s=new In(n.getIndex()),r=ly(n);this.processor_=Dy(r);let o=t.serverCache,a=t.eventCache,l=s.updateFullNode(j.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(j.EMPTY_NODE,a.getNode(),null),u=new ut(l,o.isFullyInitialized(),s.filtersNodes()),f=new ut(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=pr(f,u),this.eventGenerator_=new Ia(this.query_)}get query(){return this.query_}};function Uy(i){return i.viewCache_.serverCache.getNode()}function jy(i){return Qs(i.viewCache_)}function Hy(i,e){let t=si(i.viewCache_);return t&&(i.query._queryParams.loadsAllData()||!K(e)&&!t.getImmediateChild(G(e)).isEmpty())?t.getChild(e):null}function dh(i){return i.eventRegistrations_.length===0}function Vy(i,e){i.eventRegistrations_.push(e)}function hh(i,e,t){let n=[];if(t){F(e==null,"A cancel should cancel all event registrations.");let s=i.query._path;i.eventRegistrations_.forEach(r=>{let o=r.createCancelEvent(t,s);o&&n.push(o)})}if(e){let s=[];for(let r=0;r<i.eventRegistrations_.length;++r){let o=i.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(i.eventRegistrations_.slice(r+1));break}}i.eventRegistrations_=s}else i.eventRegistrations_=[];return n}function fh(i,e,t,n){e.type===at.MERGE&&e.source.queryId!==null&&(F(si(i.viewCache_),"We should always have a full cache before handling merges"),F(Qs(i.viewCache_),"Missing event cache, even though we have a server cache"));let s=i.viewCache_,r=Ly(i.processor_,s,e,t,n);return Oy(i.processor_,r.viewCache),F(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=r.viewCache,nf(i,r.changes,r.viewCache.eventCache.getNode(),null)}function qy(i,e){let t=i.viewCache_.eventCache,n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(re,(r,o)=>{n.push(Li(r,o))}),t.isFullyInitialized()&&n.push(Yh(t.getNode())),nf(i,n,t.getNode(),e)}function nf(i,e,t,n){let s=n?[n]:i.eventRegistrations_;return gy(i.eventGenerator_,e,t,s)}var tr,ir=class{constructor(){this.views=new Map}};function Yy(i){F(!tr,"__referenceConstructor has already been defined"),tr=i}function Gy(){return F(tr,"Reference.ts has not been loaded"),tr}function Ky(i){return i.views.size===0}function ml(i,e,t,n){let s=e.source.queryId;if(s!==null){let r=i.views.get(s);return F(r!=null,"SyncTree gave us an op for an invalid query."),fh(r,e,t,n)}else{let r=[];for(let o of i.views.values())r=r.concat(fh(o,e,t,n));return r}}function sf(i,e,t,n,s){let r=e._queryIdentifier,o=i.views.get(r);if(!o){let a=Zs(t,s?n:null),l=!1;a?l=!0:n instanceof j?(a=fl(t,n),l=!1):(a=j.EMPTY_NODE,l=!1);let c=pr(new ut(a,l,!1),new ut(n,s,!1));return new Da(e,c)}return o}function Xy(i,e,t,n,s,r){let o=sf(i,e,n,s,r);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,o),Vy(o,t),qy(o,t)}function Qy(i,e,t,n){let s=e._queryIdentifier,r=[],o=[],a=Wt(i);if(s==="default")for(let[l,c]of i.views.entries())o=o.concat(hh(c,t,n)),dh(c)&&(i.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{let l=i.views.get(s);l&&(o=o.concat(hh(l,t,n)),dh(l)&&(i.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!Wt(i)&&r.push(new(Gy())(e._repo,e._path)),{removed:r,events:o}}function rf(i){let e=[];for(let t of i.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function zt(i,e){let t=null;for(let n of i.views.values())t=t||Hy(n,e);return t}function of(i,e){if(e._queryParams.loadsAllData())return gr(i);{let n=e._queryIdentifier;return i.views.get(n)}}function af(i,e){return of(i,e)!=null}function Wt(i){return gr(i)!=null}function gr(i){for(let e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var nr;function Zy(i){F(!nr,"__referenceConstructor has already been defined"),nr=i}function Jy(){return F(nr,"Reference.ts has not been loaded"),nr}var e_=1,sr=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pe(null),this.pendingWriteTree_=Ny(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function gl(i,e,t,n,s){return wy(i.pendingWriteTree_,e,t,n,s),s?ji(i,new Fi(ul(),e,t)):[]}function t_(i,e,t,n){by(i.pendingWriteTree_,e,t,n);let s=Pe.fromObject(t);return ji(i,new xn(ul(),e,s))}function Lt(i,e,t=!1){let n=Ey(i.pendingWriteTree_,e);if(Sy(i.pendingWriteTree_,e)){let r=new Pe(null);return n.snap!=null?r=r.set(Z(),!0):me(n.children,o=>{r=r.set(new J(o),!0)}),ji(i,new Ta(n.path,r,t))}else return[]}function zn(i,e,t){return ji(i,new Fi(dl(),e,t))}function i_(i,e,t){let n=Pe.fromObject(t);return ji(i,new xn(dl(),e,n))}function n_(i,e){return ji(i,new Xs(dl(),e))}function s_(i,e,t){let n=yl(i,t);if(n){let s=_l(n),r=s.path,o=s.queryId,a=Ie(r,e),l=new Xs(hl(o),a);return vl(i,r,l)}else return[]}function rr(i,e,t,n,s=!1){let r=e._path,o=i.syncPointTree_.get(r),a=[];if(o&&(e._queryIdentifier==="default"||af(o,e))){let l=Qy(o,e,t,n);Ky(o)&&(i.syncPointTree_=i.syncPointTree_.remove(r));let c=l.removed;if(a=l.events,!s){let u=c.findIndex(m=>m._queryParams.loadsAllData())!==-1,f=i.syncPointTree_.findOnPath(r,(m,p)=>Wt(p));if(u&&!f){let m=i.syncPointTree_.subtree(r);if(!m.isEmpty()){let p=a_(m);for(let d=0;d<p.length;++d){let h=p[d],g=h.query,v=df(i,h);i.listenProvider_.startListening(wn(g),kn(i,g),v.hashFn,v.onComplete)}}}!f&&c.length>0&&!n&&(u?i.listenProvider_.stopListening(wn(e),null):c.forEach(m=>{let p=i.queryToTagMap.get(_r(m));i.listenProvider_.stopListening(wn(m),p)}))}l_(i,c)}return a}function lf(i,e,t,n){let s=yl(i,n);if(s!=null){let r=_l(s),o=r.path,a=r.queryId,l=Ie(o,e),c=new Fi(hl(a),l,t);return vl(i,o,c)}else return[]}function r_(i,e,t,n){let s=yl(i,n);if(s){let r=_l(s),o=r.path,a=r.queryId,l=Ie(o,e),c=Pe.fromObject(t),u=new xn(hl(a),l,c);return vl(i,o,u)}else return[]}function Oa(i,e,t,n=!1){let s=e._path,r=null,o=!1;i.syncPointTree_.foreachOnPath(s,(m,p)=>{let d=Ie(m,s);r=r||zt(p,d),o=o||Wt(p)});let a=i.syncPointTree_.get(s);a?(o=o||Wt(a),r=r||zt(a,Z())):(a=new ir,i.syncPointTree_=i.syncPointTree_.set(s,a));let l;r!=null?l=!0:(l=!1,r=j.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((p,d)=>{let h=zt(d,Z());h&&(r=r.updateImmediateChild(p,h))}));let c=af(a,e);if(!c&&!e._queryParams.loadsAllData()){let m=_r(e);F(!i.queryToTagMap.has(m),"View does not exist, but we have a tag");let p=c_();i.queryToTagMap.set(m,p),i.tagToQueryMap.set(p,m)}let u=mr(i.pendingWriteTree_,s),f=Xy(a,e,t,u,r,l);if(!c&&!o&&!n){let m=of(a,e);f=f.concat(u_(i,e,m))}return f}function yr(i,e,t){let s=i.pendingWriteTree_,r=i.syncPointTree_.findOnPath(e,(o,a)=>{let l=Ie(o,e),c=zt(a,l);if(c)return c});return Qh(s,e,r,t,!0)}function o_(i,e){let t=e._path,n=null;i.syncPointTree_.foreachOnPath(t,(c,u)=>{let f=Ie(c,t);n=n||zt(u,f)});let s=i.syncPointTree_.get(t);s?n=n||zt(s,Z()):(s=new ir,i.syncPointTree_=i.syncPointTree_.set(t,s));let r=n!=null,o=r?new ut(n,!0,!1):null,a=mr(i.pendingWriteTree_,e._path),l=sf(s,e,a,r?o.getNode():j.EMPTY_NODE,r);return jy(l)}function ji(i,e){return cf(e,i.syncPointTree_,null,mr(i.pendingWriteTree_,Z()))}function cf(i,e,t,n){if(K(i.path))return uf(i,e,t,n);{let s=e.get(Z());t==null&&s!=null&&(t=zt(s,Z()));let r=[],o=G(i.path),a=i.operationForChild(o),l=e.children.get(o);if(l&&a){let c=t?t.getImmediateChild(o):null,u=Zh(n,o);r=r.concat(cf(a,l,c,u))}return s&&(r=r.concat(ml(s,i,n,t))),r}}function uf(i,e,t,n){let s=e.get(Z());t==null&&s!=null&&(t=zt(s,Z()));let r=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,c=Zh(n,o),u=i.operationForChild(o);u&&(r=r.concat(uf(u,a,l,c)))}),s&&(r=r.concat(ml(s,i,n,t))),r}function df(i,e){let t=e.query,n=kn(i,t);return{hashFn:()=>(Uy(e)||j.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return n?s_(i,t._path,n):n_(i,t._path);{let r=wg(s,t);return rr(i,t,null,r)}}}}function kn(i,e){let t=_r(e);return i.queryToTagMap.get(t)}function _r(i){return i._path.toString()+"$"+i._queryIdentifier}function yl(i,e){return i.tagToQueryMap.get(e)}function _l(i){let e=i.indexOf("$");return F(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new J(i.substr(0,e))}}function vl(i,e,t){let n=i.syncPointTree_.get(e);F(n,"Missing sync point for query tag that we're tracking");let s=mr(i.pendingWriteTree_,e);return ml(n,t,s,null)}function a_(i){return i.fold((e,t,n)=>{if(t&&Wt(t))return[gr(t)];{let s=[];return t&&(s=rf(t)),me(n,(r,o)=>{s=s.concat(o)}),s}})}function wn(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(Jy())(i._repo,i._path):i}function l_(i,e){for(let t=0;t<e.length;++t){let n=e[t];if(!n._queryParams.loadsAllData()){let s=_r(n),r=i.queryToTagMap.get(s);i.queryToTagMap.delete(s),i.tagToQueryMap.delete(r)}}}function c_(){return e_++}function u_(i,e,t){let n=e._path,s=kn(i,e),r=df(i,t),o=i.listenProvider_.startListening(wn(e),s,r.hashFn,r.onComplete),a=i.syncPointTree_.subtree(n);if(s)F(!Wt(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,f)=>{if(!K(c)&&u&&Wt(u))return[gr(u).query];{let m=[];return u&&(m=m.concat(rf(u).map(p=>p.query))),me(f,(p,d)=>{m=m.concat(d)}),m}});for(let c=0;c<l.length;++c){let u=l[c];i.listenProvider_.stopListening(wn(u),kn(i,u))}}return o}var La=class i{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new i(t)}node(){return this.node_}},Fa=class i{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=oe(this.path_,e);return new i(this.syncTree_,t)}node(){return yr(this.syncTree_,this.path_)}},d_=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},ph=function(i,e,t){if(!i||typeof i!="object")return i;if(F(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return h_(i[".sv"],e,t);if(typeof i[".sv"]=="object")return f_(i[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},h_=function(i,e,t){switch(i){case"timestamp":return t.timestamp;default:F(!1,"Unexpected server value: "+i)}},f_=function(i,e,t){i.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(i,null,2));let n=i.increment;typeof n!="number"&&F(!1,"Unexpected increment value: "+n);let s=e.node();if(F(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;let o=s.getValue();return typeof o!="number"?n:o+n},hf=function(i,e,t,n){return bl(e,new Fa(t,i),n)},wl=function(i,e,t){return bl(i,new La(e),t)};function bl(i,e,t){let n=i.getPriority().val(),s=ph(n,e.getImmediateChild(".priority"),t),r;if(i.isLeafNode()){let o=i,a=ph(o.getValue(),e,t);return a!==o.getValue()||s!==o.getPriority().val()?new Di(a,ae(s)):i}else{let o=i;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Di(s))),o.forEachChild(re,(a,l)=>{let c=bl(l,e.getImmediateChild(a),t);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}var An=class{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}};function vr(i,e){let t=e instanceof J?e:new J(e),n=i,s=G(t);for(;s!==null;){let r=At(n.node.children,s)||{children:{},childCount:0};n=new An(s,n,r),t=se(t),s=G(t)}return n}function ai(i){return i.node.value}function El(i,e){i.node.value=e,za(i)}function ff(i){return i.node.childCount>0}function p_(i){return ai(i)===void 0&&!ff(i)}function wr(i,e){me(i.node.children,(t,n)=>{e(new An(t,i,n))})}function pf(i,e,t,n){t&&!n&&e(i),wr(i,s=>{pf(s,e,!0,n)}),t&&n&&e(i)}function m_(i,e,t){let n=t?i:i.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function $n(i){return new J(i.parent===null?i.name:$n(i.parent)+"/"+i.name)}function za(i){i.parent!==null&&g_(i.parent,i.name,i)}function g_(i,e,t){let n=p_(t),s=je(i.node.children,e);n&&s?(delete i.node.children[e],i.node.childCount--,za(i)):!n&&!s&&(i.node.children[e]=t.node,i.node.childCount++,za(i))}var y_=/[\[\].#$\/\u0000-\u001F\u007F]/,__=/[\[\].#$\u0000-\u001F\u007F]/,Ko=10*1024*1024,br=function(i){return typeof i=="string"&&i.length!==0&&!y_.test(i)},mf=function(i){return typeof i=="string"&&i.length!==0&&!__.test(i)},v_=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),mf(i)},Nn=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!hr(i)||i&&typeof i=="object"&&je(i,".sv")},dt=function(i,e,t,n){n&&e===void 0||Bn(Me(i,"value"),e,t)},Bn=function(i,e,t){let n=t instanceof J?new la(t,i):t;if(e===void 0)throw new Error(i+"contains undefined "+ti(n));if(typeof e=="function")throw new Error(i+"contains a function "+ti(n)+" with contents = "+e.toString());if(hr(e))throw new Error(i+"contains "+e.toString()+" "+ti(n));if(typeof e=="string"&&e.length>Ko/3&&en(e)>Ko)throw new Error(i+"contains a string greater than "+Ko+" utf8 bytes "+ti(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(me(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!br(o)))throw new Error(i+" contains an invalid key ("+o+") "+ti(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Kg(n,o),Bn(i,a,n),Xg(n)}),s&&r)throw new Error(i+' contains ".value" child '+ti(n)+" in addition to actual children.")}},w_=function(i,e){let t,n;for(t=0;t<e.length;t++){n=e[t];let r=En(n);for(let o=0;o<r.length;o++)if(!(r[o]===".priority"&&o===r.length-1)){if(!br(r[o]))throw new Error(i+"contains an invalid key ("+r[o]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Gg);let s=null;for(t=0;t<e.length;t++){if(n=e[t],s!==null&&Ve(s,n))throw new Error(i+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}},gf=function(i,e,t,n){if(n&&e===void 0)return;let s=Me(i,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");let r=[];me(e,(o,a)=>{let l=new J(o);if(Bn(s,a,oe(t,l)),rl(l)===".priority"&&!Nn(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(l)}),w_(s,r)},Sl=function(i,e,t){if(!(t&&e===void 0)){if(hr(e))throw new Error(Me(i,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nn(e))throw new Error(Me(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Wn=function(i,e,t,n){if(!(n&&t===void 0)&&!br(t))throw new Error(Me(i,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Hi=function(i,e,t,n){if(!(n&&t===void 0)&&!mf(t))throw new Error(Me(i,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},b_=function(i,e,t,n){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Hi(i,e,t,n)},ze=function(i,e){if(G(e)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},yf=function(i,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!br(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!v_(t))throw new Error(Me(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var $a=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Er(i,e){let t=null;for(let n=0;n<e.length;n++){let s=e[n],r=s.getPath();t!==null&&!ol(r,t.path)&&(i.eventLists_.push(t),t=null),t===null&&(t={events:[],path:r}),t.events.push(s)}t&&i.eventLists_.push(t)}function _f(i,e,t){Er(i,t),vf(i,n=>ol(n,e))}function $e(i,e,t){Er(i,t),vf(i,n=>Ve(n,e)||Ve(e,n))}function vf(i,e){i.recursionDepth_++;let t=!0;for(let n=0;n<i.eventLists_.length;n++){let s=i.eventLists_[n];if(s){let r=s.path;e(r)?(E_(i.eventLists_[n]),i.eventLists_[n]=null):t=!1}}t&&(i.eventLists_=[]),i.recursionDepth_--}function E_(i){for(let e=0;e<i.events.length;e++){let t=i.events[e];if(t!==null){i.events[e]=null;let n=t.getEventRunner();ni&&pe("event: "+t.toString()),Wi(n)}}}var wf="repo_interrupt",S_=25,Ba=class{constructor(e,t,n,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $a,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ks(),this.transactionQueueTree_=new An,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function C_(i,e,t){if(i.stats_=sl(i.repoInfo_),i.forceRestClient_||Cg())i.server_=new va(i.repoInfo_,(n,s,r,o)=>{mh(i,n,s,r,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>gh(i,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{le(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}i.persistentConnection_=new al(i.repoInfo_,e,(n,s,r,o)=>{mh(i,n,s,r,o)},n=>{gh(i,n)},n=>{T_(i,n)},i.authTokenProvider_,i.appCheckProvider_,t),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(n=>{i.server_.refreshAuthToken(n)}),i.appCheckProvider_.addTokenChangeListener(n=>{i.server_.refreshAppCheckToken(n.token)}),i.statsReporter_=Ig(i.repoInfo_,()=>new Ca(i.stats_,i.server_)),i.infoData_=new wa,i.infoSyncTree_=new sr({startListening:(n,s,r,o)=>{let a=[],l=i.infoData_.getNode(n._path);return l.isEmpty()||(a=zn(i.infoSyncTree_,n._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Cl(i,"connected",!1),i.serverSyncTree_=new sr({startListening:(n,s,r,o)=>(i.server_.listen(n,r,s,(a,l)=>{let c=o(a,l);$e(i.eventQueue_,n._path,c)}),[]),stopListening:(n,s)=>{i.server_.unlisten(n,s)}})}function bf(i){let t=i.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Un(i){return d_({timestamp:bf(i)})}function mh(i,e,t,n,s){i.dataUpdateCount++;let r=new J(e);t=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,t):t;let o=[];if(s)if(n){let l=Ji(t,c=>ae(c));o=r_(i.serverSyncTree_,r,l,s)}else{let l=ae(t);o=lf(i.serverSyncTree_,r,l,s)}else if(n){let l=Ji(t,c=>ae(c));o=i_(i.serverSyncTree_,r,l)}else{let l=ae(t);o=zn(i.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=$i(i,r)),$e(i.eventQueue_,a,o)}function gh(i,e){Cl(i,"connected",e),e===!1&&x_(i)}function T_(i,e){me(e,(t,n)=>{Cl(i,t,n)})}function Cl(i,e,t){let n=new J("/.info/"+e),s=ae(t);i.infoData_.updateSnapshot(n,s);let r=zn(i.infoSyncTree_,n,s);$e(i.eventQueue_,n,r)}function Sr(i){return i.nextWriteId_++}function I_(i,e,t){let n=o_(i.serverSyncTree_,e);return n!=null?Promise.resolve(n):i.server_.get(e).then(s=>{let r=ae(s).withIndex(e._queryParams.getIndex());Oa(i.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=zn(i.serverSyncTree_,e._path,r);else{let a=kn(i.serverSyncTree_,e);o=lf(i.serverSyncTree_,e._path,r,a)}return $e(i.eventQueue_,e._path,o),rr(i.serverSyncTree_,e,t,null,!0),r},s=>(Vi(i,"get for query "+le(e)+" failed: "+s),Promise.reject(new Error(s))))}function Tl(i,e,t,n,s){Vi(i,"set",{path:e.toString(),value:t,priority:n});let r=Un(i),o=ae(t,n),a=yr(i.serverSyncTree_,e),l=wl(o,a,r),c=Sr(i),u=gl(i.serverSyncTree_,e,l,c,!0);Er(i.eventQueue_,u),i.server_.put(e.toString(),o.val(!0),(m,p)=>{let d=m==="ok";d||Ce("set at "+e+" failed: "+m);let h=Lt(i.serverSyncTree_,c,!d);$e(i.eventQueue_,e,h),Ut(i,s,m,p)});let f=Pl(i,e);$i(i,f),$e(i.eventQueue_,f,[])}function P_(i,e,t,n){Vi(i,"update",{path:e.toString(),value:t});let s=!0,r=Un(i),o={};if(me(t,(a,l)=>{s=!1,o[a]=hf(oe(e,a),ae(l),i.serverSyncTree_,r)}),s)pe("update() called with empty data.  Don't do anything."),Ut(i,n,"ok",void 0);else{let a=Sr(i),l=t_(i.serverSyncTree_,e,o,a);Er(i.eventQueue_,l),i.server_.merge(e.toString(),t,(c,u)=>{let f=c==="ok";f||Ce("update at "+e+" failed: "+c);let m=Lt(i.serverSyncTree_,a,!f),p=m.length>0?$i(i,e):e;$e(i.eventQueue_,p,m),Ut(i,n,c,u)}),me(t,c=>{let u=Pl(i,oe(e,c));$i(i,u)}),$e(i.eventQueue_,e,[])}}function x_(i){Vi(i,"onDisconnectEvents");let e=Un(i),t=Ks();Ea(i.onDisconnect_,Z(),(s,r)=>{let o=hf(s,r,i.serverSyncTree_,e);Ui(t,s,o)});let n=[];Ea(t,Z(),(s,r)=>{n=n.concat(zn(i.serverSyncTree_,s,r));let o=Pl(i,s);$i(i,o)}),i.onDisconnect_=Ks(),$e(i.eventQueue_,Z(),n)}function M_(i,e,t){i.server_.onDisconnectCancel(e.toString(),(n,s)=>{n==="ok"&&ba(i.onDisconnect_,e),Ut(i,t,n,s)})}function yh(i,e,t,n){let s=ae(t);i.server_.onDisconnectPut(e.toString(),s.val(!0),(r,o)=>{r==="ok"&&Ui(i.onDisconnect_,e,s),Ut(i,n,r,o)})}function k_(i,e,t,n,s){let r=ae(t,n);i.server_.onDisconnectPut(e.toString(),r.val(!0),(o,a)=>{o==="ok"&&Ui(i.onDisconnect_,e,r),Ut(i,s,o,a)})}function A_(i,e,t,n){if(ns(t)){pe("onDisconnect().update() called with empty data.  Don't do anything."),Ut(i,n,"ok",void 0);return}i.server_.onDisconnectMerge(e.toString(),t,(s,r)=>{s==="ok"&&me(t,(o,a)=>{let l=ae(a);Ui(i.onDisconnect_,oe(e,o),l)}),Ut(i,n,s,r)})}function N_(i,e,t){let n;G(e._path)===".info"?n=Oa(i.infoSyncTree_,e,t):n=Oa(i.serverSyncTree_,e,t),_f(i.eventQueue_,e._path,n)}function Wa(i,e,t){let n;G(e._path)===".info"?n=rr(i.infoSyncTree_,e,t):n=rr(i.serverSyncTree_,e,t),_f(i.eventQueue_,e._path,n)}function Ef(i){i.persistentConnection_&&i.persistentConnection_.interrupt(wf)}function R_(i){i.persistentConnection_&&i.persistentConnection_.resume(wf)}function Vi(i,...e){let t="";i.persistentConnection_&&(t=i.persistentConnection_.id+":"),pe(t,...e)}function Ut(i,e,t,n){e&&Wi(()=>{if(t==="ok")e(null);else{let s=(t||"error").toUpperCase(),r=s;n&&(r+=": "+n);let o=new Error(r);o.code=s,e(o)}})}function D_(i,e,t,n,s,r){Vi(i,"transaction on "+e);let o={path:e,update:t,onComplete:n,status:null,order:wh(),applyLocally:r,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Il(i,e,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Bn("transaction failed: Data returned ",l,o.path),o.status=0;let c=vr(i.transactionQueueTree_,e),u=ai(c)||[];u.push(o),El(c,u);let f;typeof l=="object"&&l!==null&&je(l,".priority")?(f=At(l,".priority"),F(Nn(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(yr(i.serverSyncTree_,e)||j.EMPTY_NODE).getPriority().val();let m=Un(i),p=ae(l,f),d=wl(p,a,m);o.currentOutputSnapshotRaw=p,o.currentOutputSnapshotResolved=d,o.currentWriteId=Sr(i);let h=gl(i.serverSyncTree_,e,d,o.currentWriteId,o.applyLocally);$e(i.eventQueue_,e,h),Cr(i,i.transactionQueueTree_)}}function Il(i,e,t){return yr(i.serverSyncTree_,e,t)||j.EMPTY_NODE}function Cr(i,e=i.transactionQueueTree_){if(e||Tr(i,e),ai(e)){let t=Cf(i,e);F(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&O_(i,$n(e),t)}else ff(e)&&wr(e,t=>{Cr(i,t)})}function O_(i,e,t){let n=t.map(c=>c.currentWriteId),s=Il(i,e,n),r=s,o=s.hash();for(let c=0;c<t.length;c++){let u=t[c];F(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let f=Ie(e,u.path);r=r.updateChild(f,u.currentOutputSnapshotRaw)}let a=r.val(!0),l=e;i.server_.put(l.toString(),a,c=>{Vi(i,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let f=[];for(let m=0;m<t.length;m++)t[m].status=2,u=u.concat(Lt(i.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Tr(i,vr(i.transactionQueueTree_,e)),Cr(i,i.transactionQueueTree_),$e(i.eventQueue_,e,u);for(let m=0;m<f.length;m++)Wi(f[m])}else{if(c==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{Ce("transaction at "+l.toString()+" failed: "+c);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=c}$i(i,e)}},o)}function $i(i,e){let t=Sf(i,e),n=$n(t),s=Cf(i,t);return L_(i,s,n),n}function L_(i,e,t){if(e.length===0)return;let n=[],s=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=Ie(t,l.path),u=!1,f;if(F(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,f=l.abortReason,s=s.concat(Lt(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=S_)u=!0,f="maxretry",s=s.concat(Lt(i.serverSyncTree_,l.currentWriteId,!0));else{let m=Il(i,l.path,o);l.currentInputSnapshot=m;let p=e[a].update(m.val());if(p!==void 0){Bn("transaction failed: Data returned ",p,l.path);let d=ae(p);typeof p=="object"&&p!=null&&je(p,".priority")||(d=d.updatePriority(m.getPriority()));let g=l.currentWriteId,v=Un(i),y=wl(d,m,v);l.currentOutputSnapshotRaw=d,l.currentOutputSnapshotResolved=y,l.currentWriteId=Sr(i),o.splice(o.indexOf(g),1),s=s.concat(gl(i.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),s=s.concat(Lt(i.serverSyncTree_,g,!0))}else u=!0,f="nodata",s=s.concat(Lt(i.serverSyncTree_,l.currentWriteId,!0))}$e(i.eventQueue_,t,s),s=[],u&&(e[a].status=2,(function(m){setTimeout(m,Math.floor(0))})(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(f),!1,null))))}Tr(i,i.transactionQueueTree_);for(let a=0;a<n.length;a++)Wi(n[a]);Cr(i,i.transactionQueueTree_)}function Sf(i,e){let t,n=i.transactionQueueTree_;for(t=G(e);t!==null&&ai(n)===void 0;)n=vr(n,t),e=se(e),t=G(e);return n}function Cf(i,e){let t=[];return Tf(i,e,t),t.sort((n,s)=>n.order-s.order),t}function Tf(i,e,t){let n=ai(e);if(n)for(let s=0;s<n.length;s++)t.push(n[s]);wr(e,s=>{Tf(i,s,t)})}function Tr(i,e){let t=ai(e);if(t){let n=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[n]=t[s],n++);t.length=n,El(e,t.length>0?t:void 0)}wr(e,n=>{Tr(i,n)})}function Pl(i,e){let t=$n(Sf(i,e)),n=vr(i.transactionQueueTree_,e);return m_(n,s=>{Xo(i,s)}),Xo(i,n),pf(n,s=>{Xo(i,s)}),t}function Xo(i,e){let t=ai(e);if(t){let n=[],s=[],r=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(F(r===o-1,"All SENT items should be at beginning of queue."),r=o,t[o].status=3,t[o].abortReason="set"):(F(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),s=s.concat(Lt(i.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?El(e,void 0):t.length=r+1,$e(i.eventQueue_,$n(e),s);for(let o=0;o<n.length;o++)Wi(n[o])}}function F_(i){let e="",t=i.split("/");for(let n=0;n<t.length;n++)if(t[n].length>0){let s=t[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function z_(i){let e={};i.charAt(0)==="?"&&(i=i.substring(1));for(let t of i.split("&")){if(t.length===0)continue;let n=t.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Ce(`Invalid query segment '${t}' in query '${i}'`)}return e}var Ua=function(i,e){let t=$_(i),n=t.namespace;t.domain==="firebase.com"&&ct(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&t.domain!=="localhost"&&ct("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||mg();let s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Ws(t.host,t.secure,n,s,e,"",n!==t.subdomain),path:new J(t.pathString)}},$_=function(i){let e="",t="",n="",s="",r="",o=!0,a="https",l=443;if(typeof i=="string"){let c=i.indexOf("//");c>=0&&(a=i.substring(0,c-1),i=i.substring(c+2));let u=i.indexOf("/");u===-1&&(u=i.length);let f=i.indexOf("?");f===-1&&(f=i.length),e=i.substring(0,Math.min(u,f)),u<f&&(s=F_(i.substring(u,f)));let m=z_(i.substring(Math.min(i.length,f)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let p=e.slice(0,c);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{let d=e.indexOf(".");n=e.substring(0,d).toLowerCase(),t=e.substring(d+1),r=n}"ns"in m&&(r=m.ns)}return{host:e,port:l,domain:t,subdomain:n,secure:o,scheme:a,pathString:s,namespace:r}};var _h="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",B_=(function(){let i=0,e=[];return function(t){let n=t===i;i=t;let s,r=new Array(8);for(s=7;s>=0;s--)r[s]=_h.charAt(t%64),t=Math.floor(t/64);F(t===0,"Cannot push at time == 0");let o=r.join("");if(n){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=_h.charAt(e[s]);return F(o.length===20,"nextPushId: Length should be 20."),o}})();var or=class{constructor(e,t,n,s){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=s}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+le(this.snapshot.exportVal())}},ar=class{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Rn=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return F(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var lr=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new Te;return M_(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ze("OnDisconnect.remove",this._path);let e=new Te;return yh(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ze("OnDisconnect.set",this._path),dt("OnDisconnect.set",e,this._path,!1);let t=new Te;return yh(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ze("OnDisconnect.setWithPriority",this._path),dt("OnDisconnect.setWithPriority",e,this._path,!1),Sl("OnDisconnect.setWithPriority",t,!1);let n=new Te;return k_(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){ze("OnDisconnect.update",this._path),gf("OnDisconnect.update",e,this._path,!1);let t=new Te;return A_(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var xe=class i{constructor(e,t,n,s){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=s}get key(){return K(this._path)?null:rl(this._path)}get ref(){return new Be(this._repo,this._path)}get _queryIdentifier(){let e=sh(this._queryParams),t=nl(e);return t==="{}"?"default":t}get _queryObject(){return sh(this._queryParams)}isEqual(e){if(e=ke(e),!(e instanceof i))return!1;let t=this._repo===e._repo,n=ol(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Yg(this._path)}};function Ir(i,e){if(i._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ht(i){let e=null,t=null;if(i.hasStart()&&(e=i.getIndexStartValue()),i.hasEnd()&&(t=i.getIndexEndValue()),i.getIndex()===lt){let n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==$t)throw new Error(n);if(typeof e!="string")throw new Error(s)}if(i.hasEnd()){if(i.getIndexEndName()!==Ct)throw new Error(n);if(typeof t!="string")throw new Error(s)}}else if(i.getIndex()===re){if(e!=null&&!Nn(e)||t!=null&&!Nn(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(F(i.getIndex()instanceof Sn||i.getIndex()===cl,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Pr(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Be=class i extends xe{constructor(e,t){super(e,t,new Pn,!1)}get parent(){let e=Wh(this._path);return e===null?null:new i(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Bi=class i{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new J(e),n=jt(this.ref,e);return new i(this._node.getChild(t),n,re)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new i(s,jt(this.ref,n),re)))}hasChild(e){let t=new J(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function xl(i,e){return i=ke(i),i._checkNotDeleted("ref"),e!==void 0?jt(i._root,e):i._root}function Ml(i,e){i=ke(i),i._checkNotDeleted("refFromURL");let t=Ua(e,i._repo.repoInfo_.nodeAdmin);yf("refFromURL",t);let n=t.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&n.host!==i._repo.repoInfo_.host&&ct("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+i._repo.repoInfo_.host+")"),xl(i,t.path.toString())}function jt(i,e){return i=ke(i),G(i._path)===null?b_("child","path",e,!1):Hi("child","path",e,!1),new Be(i._repo,oe(i._path,e))}function If(i,e){i=ke(i),ze("push",i._path),dt("push",e,i._path,!0);let t=bf(i._repo),n=B_(t),s=jt(i,n),r=jt(i,n),o;return e!=null?o=xr(r,e).then(()=>r):o=Promise.resolve(r),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function Pf(i){return ze("remove",i._path),xr(i,null)}function xr(i,e){i=ke(i),ze("set",i._path),dt("set",e,i._path,!1);let t=new Te;return Tl(i._repo,i._path,e,null,t.wrapCallback(()=>{})),t.promise}function xf(i,e){i=ke(i),ze("setPriority",i._path),Sl("setPriority",e,!1);let t=new Te;return Tl(i._repo,oe(i._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function Mf(i,e,t){if(ze("setWithPriority",i._path),dt("setWithPriority",e,i._path,!1),Sl("setWithPriority",t,!1),i.key===".length"||i.key===".keys")throw"setWithPriority failed: "+i.key+" is a read-only object.";let n=new Te;return Tl(i._repo,i._path,e,t,n.wrapCallback(()=>{})),n.promise}function kf(i,e){gf("update",e,i._path,!1);let t=new Te;return P_(i._repo,i._path,e,t.wrapCallback(()=>{})),t.promise}function Af(i){i=ke(i);let e=new Rn(()=>{}),t=new Dn(e);return I_(i._repo,i,t).then(n=>new Bi(n,new Be(i._repo,i._path),i._queryParams.getIndex()))}var Dn=class i{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let n=t._queryParams.getIndex();return new or("value",this,new Bi(e.snapshotNode,new Be(t._repo,t._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ar(this,e,t):null}matches(e){return e instanceof i?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},cr=class i{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ar(this,e,t):null}createEvent(e,t){F(e.childName!=null,"Child events should have a childName.");let n=jt(new Be(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new or(e.type,this,new Bi(e.snapshotNode,n,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof i?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function jn(i,e,t,n,s){let r;if(typeof n=="object"&&(r=void 0,s=n),typeof n=="function"&&(r=n),s&&s.onlyOnce){let l=t,c=(u,f)=>{Wa(i._repo,i,a),l(u,f)};c.userCallback=t.userCallback,c.context=t.context,t=c}let o=new Rn(t,r||void 0),a=e==="value"?new Dn(o):new cr(e,o);return N_(i._repo,i,a),()=>Wa(i._repo,i,a)}function Mr(i,e,t,n){return jn(i,"value",e,t,n)}function kl(i,e,t,n){return jn(i,"child_added",e,t,n)}function Al(i,e,t,n){return jn(i,"child_changed",e,t,n)}function Nl(i,e,t,n){return jn(i,"child_moved",e,t,n)}function Rl(i,e,t,n){return jn(i,"child_removed",e,t,n)}function Dl(i,e,t){let n=null,s=t?new Rn(t):null;e==="value"?n=new Dn(s):e&&(n=new cr(e,s)),Wa(i._repo,i,n)}var We=class{},ur=class extends We{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){dt("endAt",this._value,e._path,!0);let t=_a(e._queryParams,this._value,this._key);if(Pr(t),Ht(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xe(e._repo,e._path,t,e._orderByCalled)}};function Nf(i,e){return Wn("endAt","key",e,!0),new ur(i,e)}var ja=class extends We{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){dt("endBefore",this._value,e._path,!1);let t=hy(e._queryParams,this._value,this._key);if(Pr(t),Ht(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xe(e._repo,e._path,t,e._orderByCalled)}};function Rf(i,e){return Wn("endBefore","key",e,!0),new ja(i,e)}var dr=class extends We{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){dt("startAt",this._value,e._path,!0);let t=ya(e._queryParams,this._value,this._key);if(Pr(t),Ht(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xe(e._repo,e._path,t,e._orderByCalled)}};function Df(i=null,e){return Wn("startAt","key",e,!0),new dr(i,e)}var Ha=class extends We{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){dt("startAfter",this._value,e._path,!1);let t=dy(e._queryParams,this._value,this._key);if(Pr(t),Ht(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xe(e._repo,e._path,t,e._orderByCalled)}};function Of(i,e){return Wn("startAfter","key",e,!0),new Ha(i,e)}var Va=class extends We{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xe(e._repo,e._path,cy(e._queryParams,this._limit),e._orderByCalled)}};function Lf(i){if(typeof i!="number"||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Va(i)}var qa=class extends We{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xe(e._repo,e._path,uy(e._queryParams,this._limit),e._orderByCalled)}};function Ff(i){if(typeof i!="number"||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new qa(i)}var Ya=class extends We{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Ir(e,"orderByChild");let t=new J(this._path);if(K(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let n=new Sn(t),s=fr(e._queryParams,n);return Ht(s),new xe(e._repo,e._path,s,!0)}};function zf(i){if(i==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(i==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(i==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Hi("orderByChild","path",i,!1),new Ya(i)}var Ga=class extends We{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Ir(e,"orderByKey");let t=fr(e._queryParams,lt);return Ht(t),new xe(e._repo,e._path,t,!0)}};function $f(){return new Ga}var Ka=class extends We{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Ir(e,"orderByPriority");let t=fr(e._queryParams,re);return Ht(t),new xe(e._repo,e._path,t,!0)}};function Bf(){return new Ka}var Xa=class extends We{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Ir(e,"orderByValue");let t=fr(e._queryParams,cl);return Ht(t),new xe(e._repo,e._path,t,!0)}};function Wf(){return new Xa}var Qa=class extends We{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(dt("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ur(this._value,this._key)._apply(new dr(this._value,this._key)._apply(e))}};function Uf(i,e){return Wn("equalTo","key",e,!0),new Qa(i,e)}function Ye(i,...e){let t=ke(i);for(let n of e)t=n._apply(t);return t}Yy(Be);Zy(Be);var W_="FIREBASE_DATABASE_EMULATOR_HOST",Za={},U_=!1;function j_(i,e,t,n){let s=e.lastIndexOf(":"),r=e.substring(0,s),o=Xr(r);i.repoInfo_=new Ws(e,o,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,t),n&&(i.authTokenProvider_=n)}function Ol(i,e,t,n,s){let r=n||i.options.databaseURL;r===void 0&&(i.options.projectId||ct("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pe("Using default host for project ",i.options.projectId),r=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=Ua(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[W_]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=Ua(r,s),a=o.repoInfo):l=!o.repoInfo.secure;let u=s&&l?new yn(yn.OWNER):new ia(i.name,i.options,e);yf("Invalid Firebase Database URL",o),K(o.path)||ct("Database URL must point to the root of a Firebase Database (not including a child path).");let f=V_(a,i,u,new ta(i,t));return new Ja(f,i)}function H_(i,e){let t=Za[e];(!t||t[i.key]!==i)&&ct(`Database ${e}(${i.repoInfo_}) has already been deleted.`),Ef(i),delete t[i.key]}function V_(i,e,t,n){let s=Za[e.name];s||(s={},Za[e.name]=s);let r=s[i.toURLString()];return r&&ct("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Ba(i,U_,t,n),s[i.toURLString()]=r,r}var Ja=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(C_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Be(this._repo,Z())),this._rootInternal}_delete(){return this._rootInternal!==null&&(H_(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ct("Cannot call "+e+" on a deleted database.")}};function jf(){Bh.IS_TRANSPORT_INITIALIZED&&Ce("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Hf(){jf(),bn.forceDisallow()}function Vf(){jf(),ki.forceDisallow(),bn.forceAllow()}function qf(i,e,t,n={}){i=ke(i),i._checkNotDeleted("useEmulator");let s=`${e}:${t}`,r=i._repoInternal;if(i._instanceStarted){if(s===i._repoInternal.repoInfo_.host&&Gc(n,r.repoInfo_.emulatorOptions))return;ct("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&ct('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new yn(yn.OWNER);else if(n.mockUserToken){let a=typeof n.mockUserToken=="string"?n.mockUserToken:jc(n.mockUserToken,i.app.options.projectId);o=new yn(a)}Xr(e)&&(Uc(e),Hc("Database",!0)),j_(r,s,n,o)}function Yf(i){i=ke(i),i._checkNotDeleted("goOffline"),Ef(i._repo)}function Gf(i){i=ke(i),i._checkNotDeleted("goOnline"),R_(i._repo)}function Kf(i,e){Eh(i,e)}function q_(i){il(tu),Jc(new bi("database",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return Ol(n,s,r,t)},"PUBLIC").setMultipleInstances(!0)),eo(Wd,Ud,i),eo(Wd,Ud,"esm2017")}var Y_={".sv":"timestamp"};function Xf(){return Y_}function Qf(i){return{".sv":{increment:i}}}var el=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Zf(i,e,t){var n;if(i=ke(i),ze("Reference.transaction",i._path),i.key===".length"||i.key===".keys")throw"Reference.transaction failed: "+i.key+" is a read-only object.";let s=(n=t?.applyLocally)!==null&&n!==void 0?n:!0,r=new Te,o=(l,c,u)=>{let f=null;l?r.reject(l):(f=new Bi(u,new Be(i._repo,i._path),re),r.resolve(new el(c,f)))},a=Mr(i,()=>{});return D_(i._repo,i._path,e,o,a,s),r.promise}al.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};al.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};q_();var G_="@firebase/database-compat",K_="2.0.11";var X_=new rs("@firebase/database-compat"),Jf=function(i){let e="FIREBASE WARNING: "+i;X_.warn(e)};var Q_=function(i,e,t,n){if(!(n&&t===void 0)&&typeof t!="boolean")throw new Error(Me(i,e)+"must be a boolean.")},Z_=function(i,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Me(i,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var Ll=class{constructor(e){this._delegate=e}cancel(e){U("OnDisconnect.cancel",0,1,arguments.length),he("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),n=>e(n)),t}remove(e){U("OnDisconnect.remove",0,1,arguments.length),he("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),n=>e(n)),t}set(e,t){U("OnDisconnect.set",1,2,arguments.length),he("OnDisconnect.set","onComplete",t,!0);let n=this._delegate.set(e);return t&&n.then(()=>t(null),s=>t(s)),n}setWithPriority(e,t,n){U("OnDisconnect.setWithPriority",2,3,arguments.length),he("OnDisconnect.setWithPriority","onComplete",n,!0);let s=this._delegate.setWithPriority(e,t);return n&&s.then(()=>n(null),r=>n(r)),s}update(e,t){if(U("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let s={};for(let r=0;r<e.length;++r)s[""+r]=e[r];e=s,Jf("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}he("OnDisconnect.update","onComplete",t,!0);let n=this._delegate.update(e);return t&&n.then(()=>t(null),s=>t(s)),n}};var Fl=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return U("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var li=class i{constructor(e,t){this._database=e,this._delegate=t}val(){return U("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return U("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return U("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return U("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return U("DataSnapshot.child",0,1,arguments.length),e=String(e),Hi("DataSnapshot.child","path",e,!1),new i(this._database,this._delegate.child(e))}hasChild(e){return U("DataSnapshot.hasChild",1,1,arguments.length),Hi("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return U("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return U("DataSnapshot.forEach",1,1,arguments.length),he("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new i(this._database,t)))}hasChildren(){return U("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return U("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return U("DataSnapshot.ref",0,0,arguments.length),new Tt(this._database,this._delegate.ref)}get ref(){return this.getRef()}},kr=class i{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,s){var r;U("Query.on",2,4,arguments.length),he("Query.on","callback",t,!1);let o=i.getCancelAndContextArgs_("Query.on",n,s),a=(c,u)=>{t.call(o.context,new li(this.database,c),u)};a.userCallback=t,a.context=o.context;let l=(r=o.cancel)===null||r===void 0?void 0:r.bind(o.context);switch(e){case"value":return Mr(this._delegate,a,l),t;case"child_added":return kl(this._delegate,a,l),t;case"child_removed":return Rl(this._delegate,a,l),t;case"child_changed":return Al(this._delegate,a,l),t;case"child_moved":return Nl(this._delegate,a,l),t;default:throw new Error(Me("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(U("Query.off",0,3,arguments.length),Z_("Query.off",e,!0),he("Query.off","callback",t,!0),Zr("Query.off","context",n,!0),t){let s=()=>{};s.userCallback=t,s.context=n,Dl(this._delegate,e,s)}else Dl(this._delegate,e)}get(){return Af(this._delegate).then(e=>new li(this.database,e))}once(e,t,n,s){U("Query.once",1,4,arguments.length),he("Query.once","callback",t,!0);let r=i.getCancelAndContextArgs_("Query.once",n,s),o=new Te,a=(c,u)=>{let f=new li(this.database,c);t&&t.call(r.context,f,u),o.resolve(f)};a.userCallback=t,a.context=r.context;let l=c=>{r.cancel&&r.cancel.call(r.context,c),o.reject(c)};switch(e){case"value":Mr(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":kl(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Rl(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Al(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Nl(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Me("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return U("Query.limitToFirst",1,1,arguments.length),new i(this.database,Ye(this._delegate,Lf(e)))}limitToLast(e){return U("Query.limitToLast",1,1,arguments.length),new i(this.database,Ye(this._delegate,Ff(e)))}orderByChild(e){return U("Query.orderByChild",1,1,arguments.length),new i(this.database,Ye(this._delegate,zf(e)))}orderByKey(){return U("Query.orderByKey",0,0,arguments.length),new i(this.database,Ye(this._delegate,$f()))}orderByPriority(){return U("Query.orderByPriority",0,0,arguments.length),new i(this.database,Ye(this._delegate,Bf()))}orderByValue(){return U("Query.orderByValue",0,0,arguments.length),new i(this.database,Ye(this._delegate,Wf()))}startAt(e=null,t){return U("Query.startAt",0,2,arguments.length),new i(this.database,Ye(this._delegate,Df(e,t)))}startAfter(e=null,t){return U("Query.startAfter",0,2,arguments.length),new i(this.database,Ye(this._delegate,Of(e,t)))}endAt(e=null,t){return U("Query.endAt",0,2,arguments.length),new i(this.database,Ye(this._delegate,Nf(e,t)))}endBefore(e=null,t){return U("Query.endBefore",0,2,arguments.length),new i(this.database,Ye(this._delegate,Rf(e,t)))}equalTo(e,t){return U("Query.equalTo",1,2,arguments.length),new i(this.database,Ye(this._delegate,Uf(e,t)))}toString(){return U("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return U("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(U("Query.isEqual",1,1,arguments.length),!(e instanceof i)){let t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){let s={cancel:void 0,context:void 0};if(t&&n)s.cancel=t,he(e,"cancel",s.cancel,!0),s.context=n,Zr(e,"context",s.context,!0);else if(t)if(typeof t=="object"&&t!==null)s.context=t;else if(typeof t=="function")s.cancel=t;else throw new Error(Me(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return s}get ref(){return new Tt(this.database,new Be(this._delegate._repo,this._delegate._path))}},Tt=class i extends kr{constructor(e,t){super(e,new xe(t._repo,t._path,new Pn,!1)),this.database=e,this._delegate=t}getKey(){return U("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return U("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new i(this.database,jt(this._delegate,e))}getParent(){U("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new i(this.database,e):null}getRoot(){return U("Reference.root",0,0,arguments.length),new i(this.database,this._delegate.root)}set(e,t){U("Reference.set",1,2,arguments.length),he("Reference.set","onComplete",t,!0);let n=xr(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}update(e,t){if(U("Reference.update",1,2,arguments.length),Array.isArray(e)){let s={};for(let r=0;r<e.length;++r)s[""+r]=e[r];e=s,Jf("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ze("Reference.update",this._delegate._path),he("Reference.update","onComplete",t,!0);let n=kf(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}setWithPriority(e,t,n){U("Reference.setWithPriority",2,3,arguments.length),he("Reference.setWithPriority","onComplete",n,!0);let s=Mf(this._delegate,e,t);return n&&s.then(()=>n(null),r=>n(r)),s}remove(e){U("Reference.remove",0,1,arguments.length),he("Reference.remove","onComplete",e,!0);let t=Pf(this._delegate);return e&&t.then(()=>e(null),n=>e(n)),t}transaction(e,t,n){U("Reference.transaction",1,3,arguments.length),he("Reference.transaction","transactionUpdate",e,!1),he("Reference.transaction","onComplete",t,!0),Q_("Reference.transaction","applyLocally",n,!0);let s=Zf(this._delegate,e,{applyLocally:n}).then(r=>new Fl(r.committed,new li(this.database,r.snapshot)));return t&&s.then(r=>t(null,r.committed,r.snapshot),r=>t(r,!1,null)),s}setPriority(e,t){U("Reference.setPriority",1,2,arguments.length),he("Reference.setPriority","onComplete",t,!0);let n=xf(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}push(e,t){U("Reference.push",0,2,arguments.length),he("Reference.push","onComplete",t,!0);let n=If(this._delegate,e),s=n.then(o=>new i(this.database,o));t&&s.then(()=>t(null),o=>t(o));let r=new i(this.database,n);return r.then=s.then.bind(s),r.catch=s.catch.bind(s,void 0),r}onDisconnect(){return ze("Reference.onDisconnect",this._delegate._path),new Ll(new lr(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var ci=class{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Hf,forceLongPolling:Vf}}useEmulator(e,t,n={}){qf(this._delegate,e,t,n)}ref(e){if(U("database.ref",0,1,arguments.length),e instanceof Tt){let t=Ml(this._delegate,e.toString());return new Tt(this,t)}else{let t=xl(this._delegate,e);return new Tt(this,t)}}refFromURL(e){U("database.refFromURL",1,1,arguments.length);let n=Ml(this._delegate,e);return new Tt(this,n)}goOffline(){return U("database.goOffline",0,0,arguments.length),Yf(this._delegate)}goOnline(){return U("database.goOnline",0,0,arguments.length),Gf(this._delegate)}};ci.ServerValue={TIMESTAMP:Xf(),increment:i=>Qf(i)};function J_({app:i,url:e,version:t,customAuthImpl:n,customAppCheckImpl:s,namespace:r,nodeAdmin:o=!1}){il(t);let a=new Jr("database-standalone"),l=new ss("auth-internal",a);l.setComponent(new bi("auth-internal",()=>n,"PRIVATE"));let c;return s&&(c=new ss("app-check-internal",a),c.setComponent(new bi("app-check-internal",()=>s,"PRIVATE"))),{instance:new ci(Ol(i,l,c,e,o),i),namespace:r}}var ev=Object.freeze({__proto__:null,initStandalone:J_});var tv=ci.ServerValue;function iv(i){i.INTERNAL.registerComponent(new bi("database-compat",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new ci(s,n)},"PUBLIC").setServiceProps({Reference:Tt,Query:kr,Database:ci,DataSnapshot:li,enableLogging:Kf,INTERNAL:ev,ServerValue:tv}).setMultipleInstances(!0)),i.registerVersion(G_,K_)}iv(Ei);function Hn(i,e,t="on",n=Yl){return new Le(s=>{let r=null;return r=i[t](e,(o,a)=>{n.schedule(()=>{s.next({snapshot:o,prevKey:a})}),t==="once"&&n.schedule(()=>s.complete())},o=>{n.schedule(()=>s.error(o))}),t==="on"?{unsubscribe(){r!=null&&i.off(e,r)}}:{unsubscribe(){}}}).pipe(ve(s=>{let{snapshot:r,prevKey:o}=s,a=null;return r.exists()&&(a=r.key),{type:e,payload:r,prevKey:o,key:a}}),tc())}function nv(i){return typeof i=="string"}function sv(i){return typeof i.exportVal=="function"}function sp(i){return i==null}function rp(i){return typeof i.set=="function"}function ep(i,e){return rp(e)?e:i.ref(e)}function op(i,e){if(nv(i))return e.stringCase();if(rp(i))return e.firebaseCase();if(sv(i))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof i}`)}function ap(i){return(sp(i)||i.length===0)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function lp(i,e,t){e=ap(e);let n=e.map(s=>Hn(i,s,"on",t));return Zi(...n)}function rv(i,e,t){let n=lp(i,e).pipe(zr((s,r)=>[...s,r],[]));return av(i,n,t)}function ov(i,e){return Hn(i,"value","on",e).pipe(ve(t=>{let n;return t.payload.forEach(s=>(n=s.key,!1)),{data:t,lastKeyToLoad:n}}))}function av(i,e,t){return ov(i,t).pipe(oc(e),ve(([s,r])=>{let o=s.lastKeyToLoad,a=r.map(l=>l.key);return{actions:r,lastKeyToLoad:o,loadedKeys:a}}),nc(s=>s.loadedKeys.indexOf(s.lastKeyToLoad)===-1),ve(s=>s.actions))}function tp(i,e){return function(n,s){return op(n,{stringCase:()=>i.child(n)[e](s),firebaseCase:()=>n[e](s),snapshotCase:()=>n.ref[e](s)})}}function lv(i){return function(t){return t?op(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}}function cv(i,e,t){return Hn(i,"value","once",t).pipe(de(n=>{let s=[mi(n)];return e.forEach(r=>s.push(Hn(i,r,"on",t))),Zi(...s).pipe(zr(dv,[]))}),ec())}function cp(i,e){let t=i.length;for(let n=0;n<t;n++)if(i[n].payload.key===e)return n;return-1}function uv(i,e){if(sp(e))return 0;{let t=cp(i,e);return t===-1?i.length:t+1}}function dv(i,e){let{payload:t,prevKey:n,key:s}=e,r=cp(i,s),o=uv(i,n);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,i=[...i,c],!1})}return i;case"child_added":if(r>-1)(i[r-1]?.key||null)!==n&&(i=i.filter(l=>l.payload.key!==t.key),i.splice(o,0,e));else{if(n==null)return[e,...i];i=i.slice(),i.splice(o,0,e)}return i;case"child_removed":return i.filter(a=>a.payload.key!==t.key);case"child_changed":return i.map(a=>a.payload.key===s?e:a);case"child_moved":if(r>-1){let a=i.splice(r,1)[0];return i=i.slice(),i.splice(o,0,a),i}return i;default:return i}}function ip(i,e,t){return e=ap(e),cv(i,e,t)}function hv(i,e,t){let n=e.schedulers.outsideAngular,s=Qe(ge).run(()=>i.ref);return{query:i,update:tp(s,"update"),set:tp(s,"set"),push:r=>s.push(r),remove:lv(s),snapshotChanges(r){return ip(i,r,n).pipe(Gt(t))},stateChanges(r){return lp(i,r,n).pipe(Gt(t))},auditTrail(r){return rv(i,r,n).pipe(Gt(t))},valueChanges(r,o){return ip(i,r,n).pipe(ve(l=>l.map(c=>o&&o.idField?Kn(ue({},c.payload.val()),{[o.idField]:c.key}):c.payload.val())),Gt(t))}}}function np(i,e){return function(){return Hn(i,"value","on",e)}}function fv(i,e,t){return{query:i,snapshotChanges(){return np(i,e.schedulers.outsideAngular)().pipe(Gt(t))},update(n){return i.ref.update(n)},set(n){return i.ref.set(n)},remove(){return i.ref.remove()},valueChanges(){return np(i,e.schedulers.outsideAngular)().pipe(Gt(t),ve(s=>s.payload.exists()?s.payload.val():null))}}}var pv=new xt("angularfire2.realtimeDatabaseURL"),mv=new xt("angularfire2.database.use-emulator"),gv=(()=>{class i{schedulers;database;injector=Qe(cc);constructor(t,n,s,r,o,a,l,c,u,f,m,p,d,h,g){this.schedulers=a;let v=l,y=us(t,o,n);c&&du(y,o,u,m,p,d,f,h),this.database=ds(`${y.name}.database.${s}`,"AngularFireDatabase",y.name,()=>{let _=o.runOutsideAngular(()=>y.database(s||void 0));return v&&_.useEmulator(...v),_},[v])}list(t,n){let s=Qe(ge).runOutsideAngular(()=>ep(this.database,t)),r=s;return n&&(r=n(s)),hv(r,this,this.injector)}object(t){let n=Qe(ge).runOutsideAngular(()=>ep(this.database,t));return fv(n,this,this.injector)}createPushId(){return Qe(ge).runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(n){return new(n||i)(W(ls),W(cs,8),W(pv,8),W(yi),W(ge),W(as),W(mv,8),W(hu,8),W(ru,8),W(ou,8),W(au,8),W(lu,8),W(cu,8),W(uu,8),W(iu,8))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),up=(()=>{class i{constructor(){Ei.registerVersion("angularfire",os.full,"rtdb-compat")}static \u0275fac=function(n){return new(n||i)};static \u0275mod=be({type:i});static \u0275inj=we({providers:[gv]})}return i})();var dp=3e4,zl=new Ec(()=>dp),hp=(()=>{let e=class e{constructor(n){this.commonFunction=n,this.options={timeOutVal:3e4,timedOut:!0}}intercept(n,s){let r=n.context;if(!r.has(zl)){let o=this.options.timedOut;if(o===!1)return s.handle(n);o&&this.options.timeOutVal!==dp&&r.set(zl,this.options.timeOutVal)}return s.handle(n).pipe(Kl(r.get(zl)),Yt(o=>this.handleResponseError(o,n,s)))}handleResponseError(n,s,r){return n.message=="Timeout has occurred"&&this.commonFunction.displaySnackBarMessage("We'll be right back! Looks like something went wrong but we have our best minds working on it.","failure"),Qn(n)}};e.\u0275fac=function(s){return new(s||e)(W(kt))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})();var $l="Service workers are disabled or not supported by this browser",qi=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Le(n=>n.error(new q(5601,!1)));else{let n=null,s=new pi;this.worker=new Le(c=>(n!==null&&c.next(n),s.subscribe(u=>c.next(u))));let r=()=>{let{controller:c}=e;c!==null&&(n=c,s.next(n))};e.addEventListener("controllerchange",r),r(),this.registration=this.worker.pipe(de(()=>e.getRegistration().then(c=>{if(!c)throw new q(5601,!1);return c})));let o=new pi;this.events=o.asObservable();let a=c=>{let{data:u}=c;u?.type&&o.next(u)};e.addEventListener("message",a),t?.get(jr,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",r),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(n=>{this.worker.pipe(gi(1)).subscribe(s=>{s.postMessage(ue({action:e},t)),n()})})}postMessageWithOperation(e,t,n){let s=this.waitForOperationCompleted(n),r=this.postMessage(e,t);return Promise.all([r,s]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=n=>n.type===e:t=n=>e.includes(n.type),this.events.pipe(qt(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(gi(1))}waitForOperationCompleted(e){return new Promise((t,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(qt(s=>s.nonce===e),gi(1),ve(s=>{if(s.result!==void 0)return s.result;throw new Error(s.error)})).subscribe({next:t,error:n})})}get isEnabled(){return!!this.serviceWorker}},pp=(()=>{class i{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new pi;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Pt,this.notificationClicks=Pt,this.notificationCloses=Pt,this.pushSubscriptionChanges=Pt,this.subscription=Pt;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ve(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ve(s=>s.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(ve(s=>s.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(ve(s=>s.data)),this.pushManager=this.sw.registration.pipe(ve(s=>s.pushManager));let n=this.pushManager.pipe(de(s=>s.getSubscription()));this.subscription=new Le(s=>{let r=n.subscribe(s),o=this.subscriptionChanges.subscribe(s);return()=>{r.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error($l));let n={userVisibleOnly:!0},s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(s.length));for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return n.applicationServerKey=r,new Promise((o,a)=>{this.pushManager.pipe(de(l=>l.subscribe(n)),gi(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),o(l)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error($l));let t=n=>{if(n===null)throw new q(5602,!1);return n.unsubscribe().then(s=>{if(!s)throw new q(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,s)=>{this.subscription.pipe(gi(1),de(t)).subscribe({next:n,error:s})})}decodeBase64(t){return atob(t)}static \u0275fac=function(n){return new(n||i)(W(qi))};static \u0275prov=ne({token:i,factory:i.\u0275fac})}return i})(),mp=(()=>{class i{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Pt,this.unrecoverable=Pt;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error($l));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new q(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(n){return new(n||i)(W(qi))};static \u0275prov=ne({token:i,factory:i.\u0275fac})}return i})();var gp=new xt("");function yv(){let i=Qe(Vn);if(!("serviceWorker"in navigator&&i.enabled!==!1))return;let e=Qe(gp),t=Qe(ge),n=Qe(jr);t.runOutsideAngular(()=>{let s=navigator.serviceWorker,r=()=>s.controller?.postMessage({action:"INITIALIZE"});s.addEventListener("controllerchange",r),n.onDestroy(()=>{s.removeEventListener("controllerchange",r)})}),t.runOutsideAngular(()=>{let s,{registrationStrategy:r}=i;if(typeof r=="function")s=new Promise(o=>r().subscribe(()=>o()));else{let[o,...a]=(r||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":s=Promise.resolve();break;case"registerWithDelay":s=fp(+a[0]||0);break;case"registerWhenStable":s=Promise.race([n.whenStable(),fp(+a[0])]);break;default:throw new q(5600,!1)}}s.then(()=>{n.destroyed||navigator.serviceWorker.register(e,{scope:i.scope,updateViaCache:i.updateViaCache,type:i.type}).catch(o=>console.error(ac(5604,!1)))})})}function fp(i){return new Promise(e=>setTimeout(e,i))}function _v(i,e){return new qi(i.enabled!==!1?navigator.serviceWorker:void 0,e)}var Vn=class{enabled;updateViaCache;type;scope;registrationStrategy};function vv(i,e={}){return lc([pp,mp,{provide:gp,useValue:i},{provide:Vn,useValue:e},{provide:qi,useFactory:_v,deps:[Vn,uc]},mc(yv)])}var yp=(()=>{class i{static register(t,n={}){return{ngModule:i,providers:[vv(t,n)]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=be({type:i});static \u0275inj=we({providers:[pp,mp]})}return i})();var _p=(()=>{let e=class e extends Si{constructor(n,s){super(),this.http=n,this.zone=s,this.pingInterval=600,this.onPing=new nt,this.onPingResponse=new nt}request(n){return typeof n=="string"?this.pingRequest=new Yr("GET",n):n instanceof Yr?this.pingRequest=n:n===null&&(this.pingRequest=null),this.pingRequest}interval(n){if(!isNaN(n)&&n>0)this.pingInterval=n;else if(!isNaN(n)&&n<=0)throw new Error("Interval value must be greater than zero.");return this.pingInterval}ping(){this.onPing.emit(null),this.pingRequest&&this.http.request(this.pingRequest).subscribe(n=>{this.onPingResponse.emit(n)},n=>{this.onPingResponse.emit(n)})}start(){this.stop(),this.zone.runOutsideAngular(()=>{this.pingHandle=setInterval(()=>{this.zone.run(()=>{this.ping()})},this.pingInterval*1e3)})}stop(){this.hasPingHandle()&&(clearInterval(this.pingHandle),this.pingHandle=null)}ngOnDestroy(){this.stop()}isRunning(){return this.hasPingHandle()}hasPingHandle(){return this.pingHandle!==null&&typeof this.pingHandle<"u"}};e.\u0275fac=function(s){return new(s||e)(W(ts),W(ge))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),vp=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[_p,{provide:Si,useExisting:_p}]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=be({type:e}),e.\u0275inj=we({imports:[Fu.forRoot()]});let i=e;return i})();var wp=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=be({type:e,bootstrap:[Bu]}),e.\u0275inj=we({providers:[gs,ms,ys,_c,{provide:Tu,useValue:"en-GB"},{provide:Gr,useClass:Bd,multi:!0},{provide:Gr,useClass:hp,multi:!0},Sc(Cc())],imports:[es,Du,$d,yu,xc,Nc,Dc,Rc,Mu,Jn,Su,Pu,Oc,xu,vp.forRoot(),up,fu,$u,su.initializeApp(wt.firebase),Iu,yp.register("ngsw-worker.js",{enabled:wt.production,registrationStrategy:"registerWhenStable:30000"}),_s]});let i=e;return i})();function bp(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;t({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let r,o=ye();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};let a=o.createElement("div");function l(d,h){let g=e.params.virtual;if(g.cache&&e.virtual.cache[h])return e.virtual.cache[h];let v;return g.renderSlide?(v=g.renderSlide.call(e,d,h),typeof v=="string"&&(fe(a,v),v=a.children[0])):e.isElement?v=Ee("swiper-slide"):v=Ee("div",e.params.slideClass),v.setAttribute("data-swiper-slide-index",h),g.renderSlide||fe(v,d),g.cache&&(e.virtual.cache[h]=v),v}function c(d,h,g){let{slidesPerView:v,slidesPerGroup:y,centeredSlides:_,loop:b,initialSlide:k}=e.params;if(h&&!b&&k>0)return;let{addSlidesBefore:O,addSlidesAfter:x}=e.params.virtual,{from:R,to:S,slides:L,slidesGrid:$,offset:N}=e.virtual;e.params.cssMode||e.updateActiveIndex();let T=typeof g>"u"?e.activeIndex||0:g,I;e.rtlTranslate?I="right":I=e.isHorizontal()?"left":"top";let z,C;_?(z=Math.floor(v/2)+y+x,C=Math.floor(v/2)+y+O):(z=v+(y-1)+x,C=(b?v:y)+O);let w=T-C,E=T+z;b||(w=Math.max(w,0),E=Math.min(E,L.length-1));let P=(e.slidesGrid[w]||0)-(e.slidesGrid[0]||0);b&&T>=C?(w-=C,_||(P+=e.slidesGrid[0])):b&&T<C&&(w=-C,_&&(P+=e.slidesGrid[0])),Object.assign(e.virtual,{from:w,to:E,offset:P,slidesGrid:e.slidesGrid,slidesBefore:C,slidesAfter:z});function B(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s("virtualUpdate")}if(R===w&&S===E&&!d){e.slidesGrid!==$&&P!==N&&e.slides.forEach(M=>{M.style[I]=`${P-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),s("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:P,from:w,to:E,slides:(function(){let A=[];for(let H=w;H<=E;H+=1)A.push(L[H]);return A})()}),e.params.virtual.renderExternalUpdate?B():s("virtualUpdate");return}let Q=[],ee=[],ce=M=>{let A=M;return M<0?A=L.length+M:A>=L.length&&(A=A-L.length),A};if(d)e.slides.filter(M=>M.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(M=>{M.remove()});else for(let M=R;M<=S;M+=1)if(M<w||M>E){let A=ce(M);e.slides.filter(H=>H.matches(`.${e.params.slideClass}[data-swiper-slide-index="${A}"], swiper-slide[data-swiper-slide-index="${A}"]`)).forEach(H=>{H.remove()})}let te=b?-L.length:0,D=b?L.length*2:L.length;for(let M=te;M<D;M+=1)if(M>=w&&M<=E){let A=ce(M);typeof S>"u"||d?ee.push(A):(M>S&&ee.push(A),M<R&&Q.push(A))}if(ee.forEach(M=>{e.slidesEl.append(l(L[M],M))}),b)for(let M=Q.length-1;M>=0;M-=1){let A=Q[M];e.slidesEl.prepend(l(L[A],A))}else Q.sort((M,A)=>A-M),Q.forEach(M=>{e.slidesEl.prepend(l(L[M],M))});Ne(e.slidesEl,".swiper-slide, swiper-slide").forEach(M=>{M.style[I]=`${P-Math.abs(e.cssOverflowAdjustment())}px`}),B()}function u(d){if(typeof d=="object"&&"length"in d)for(let h=0;h<d.length;h+=1)d[h]&&e.virtual.slides.push(d[h]);else e.virtual.slides.push(d);c(!0)}function f(d){let h=e.activeIndex,g=h+1,v=1;if(Array.isArray(d)){for(let y=0;y<d.length;y+=1)d[y]&&e.virtual.slides.unshift(d[y]);g=h+d.length,v=d.length}else e.virtual.slides.unshift(d);if(e.params.virtual.cache){let y=e.virtual.cache,_={};Object.keys(y).forEach(b=>{let k=y[b],O=k.getAttribute("data-swiper-slide-index");O&&k.setAttribute("data-swiper-slide-index",parseInt(O,10)+v),_[parseInt(b,10)+v]=k}),e.virtual.cache=_}c(!0),e.slideTo(g,0)}function m(d){if(typeof d>"u"||d===null)return;let h=e.activeIndex;if(Array.isArray(d))for(let g=d.length-1;g>=0;g-=1)e.params.virtual.cache&&(delete e.virtual.cache[d[g]],Object.keys(e.virtual.cache).forEach(v=>{v>d&&(e.virtual.cache[v-1]=e.virtual.cache[v],e.virtual.cache[v-1].setAttribute("data-swiper-slide-index",v-1),delete e.virtual.cache[v])})),e.virtual.slides.splice(d[g],1),d[g]<h&&(h-=1),h=Math.max(h,0);else e.params.virtual.cache&&(delete e.virtual.cache[d],Object.keys(e.virtual.cache).forEach(g=>{g>d&&(e.virtual.cache[g-1]=e.virtual.cache[g],e.virtual.cache[g-1].setAttribute("data-swiper-slide-index",g-1),delete e.virtual.cache[g])})),e.virtual.slides.splice(d,1),d<h&&(h-=1),h=Math.max(h,0);c(!0),e.slideTo(h,0)}function p(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),c(!0),e.slideTo(0,0)}n("beforeInit",()=>{if(!e.params.virtual.enabled)return;let d;if(typeof e.passedParams.virtual.slides>"u"){let h=[...e.slidesEl.children].filter(g=>g.matches(`.${e.params.slideClass}, swiper-slide`));h&&h.length&&(e.virtual.slides=[...h],d=!0,h.forEach((g,v)=>{g.setAttribute("data-swiper-slide-index",v),e.virtual.cache[v]=g,g.remove()}))}d||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,c(!1,!0)}),n("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(r),r=setTimeout(()=>{c()},100)):c())}),n("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&wu(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:u,prependSlide:f,removeSlide:m,removeAllSlides:p,update:c})}function Ep(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r=ye(),o=Fe();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function a(u){if(!e.enabled)return;let{rtlTranslate:f}=e,m=u;m.originalEvent&&(m=m.originalEvent);let p=m.keyCode||m.charCode,d=e.params.keyboard.pageUpDown,h=d&&p===33,g=d&&p===34,v=p===37,y=p===39,_=p===38,b=p===40;if(!e.allowSlideNext&&(e.isHorizontal()&&y||e.isVertical()&&b||g)||!e.allowSlidePrev&&(e.isHorizontal()&&v||e.isVertical()&&_||h))return!1;if(!(m.shiftKey||m.altKey||m.ctrlKey||m.metaKey)&&!(r.activeElement&&(r.activeElement.isContentEditable||r.activeElement.nodeName&&(r.activeElement.nodeName.toLowerCase()==="input"||r.activeElement.nodeName.toLowerCase()==="textarea")))){if(e.params.keyboard.onlyInViewport&&(h||g||v||y||_||b)){let k=!1;if(bt(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&bt(e.el,`.${e.params.slideActiveClass}`).length===0)return;let O=e.el,x=O.clientWidth,R=O.clientHeight,S=o.innerWidth,L=o.innerHeight,$=Xt(O);f&&($.left-=O.scrollLeft);let N=[[$.left,$.top],[$.left+x,$.top],[$.left,$.top+R],[$.left+x,$.top+R]];for(let T=0;T<N.length;T+=1){let I=N[T];if(I[0]>=0&&I[0]<=S&&I[1]>=0&&I[1]<=L){if(I[0]===0&&I[1]===0)continue;k=!0}}if(!k)return}e.isHorizontal()?((h||g||v||y)&&(m.preventDefault?m.preventDefault():m.returnValue=!1),((g||y)&&!f||(h||v)&&f)&&e.slideNext(),((h||v)&&!f||(g||y)&&f)&&e.slidePrev()):((h||g||_||b)&&(m.preventDefault?m.preventDefault():m.returnValue=!1),(g||b)&&e.slideNext(),(h||_)&&e.slidePrev()),s("keyPress",p)}}function l(){e.keyboard.enabled||(r.addEventListener("keydown",a),e.keyboard.enabled=!0)}function c(){e.keyboard.enabled&&(r.removeEventListener("keydown",a),e.keyboard.enabled=!1)}n("init",()=>{e.params.keyboard.enabled&&l()}),n("destroy",()=>{e.keyboard.enabled&&c()}),Object.assign(e.keyboard,{enable:l,disable:c})}function Sp(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r=Fe();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let o,a=rt(),l,c=[];function u(_){let x=0,R=0,S=0,L=0;return"detail"in _&&(R=_.detail),"wheelDelta"in _&&(R=-_.wheelDelta/120),"wheelDeltaY"in _&&(R=-_.wheelDeltaY/120),"wheelDeltaX"in _&&(x=-_.wheelDeltaX/120),"axis"in _&&_.axis===_.HORIZONTAL_AXIS&&(x=R,R=0),S=x*10,L=R*10,"deltaY"in _&&(L=_.deltaY),"deltaX"in _&&(S=_.deltaX),_.shiftKey&&!S&&(S=L,L=0),(S||L)&&_.deltaMode&&(_.deltaMode===1?(S*=40,L*=40):(S*=800,L*=800)),S&&!x&&(x=S<1?-1:1),L&&!R&&(R=L<1?-1:1),{spinX:x,spinY:R,pixelX:S,pixelY:L}}function f(){e.enabled&&(e.mouseEntered=!0)}function m(){e.enabled&&(e.mouseEntered=!1)}function p(_){return e.params.mousewheel.thresholdDelta&&_.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&rt()-a<e.params.mousewheel.thresholdTime?!1:_.delta>=6&&rt()-a<60?!0:(_.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),s("scroll",_.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),s("scroll",_.raw)),a=new r.Date().getTime(),!1)}function d(_){let b=e.params.mousewheel;if(_.direction<0){if(e.isEnd&&!e.params.loop&&b.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&b.releaseOnEdges)return!0;return!1}function h(_){let b=_,k=!0;if(!e.enabled||_.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;let O=e.params.mousewheel;e.params.cssMode&&b.preventDefault();let x=e.el;e.params.mousewheel.eventsTarget!=="container"&&(x=document.querySelector(e.params.mousewheel.eventsTarget));let R=x&&x.contains(b.target);if(!e.mouseEntered&&!R&&!O.releaseOnEdges)return!0;b.originalEvent&&(b=b.originalEvent);let S=0,L=e.rtlTranslate?-1:1,$=u(b);if(O.forceToAxis)if(e.isHorizontal())if(Math.abs($.pixelX)>Math.abs($.pixelY))S=-$.pixelX*L;else return!0;else if(Math.abs($.pixelY)>Math.abs($.pixelX))S=-$.pixelY;else return!0;else S=Math.abs($.pixelX)>Math.abs($.pixelY)?-$.pixelX*L:-$.pixelY;if(S===0)return!0;O.invert&&(S=-S);let N=e.getTranslate()+S*O.sensitivity;if(N>=e.minTranslate()&&(N=e.minTranslate()),N<=e.maxTranslate()&&(N=e.maxTranslate()),k=e.params.loop?!0:!(N===e.minTranslate()||N===e.maxTranslate()),k&&e.params.nested&&b.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){let T={time:rt(),delta:Math.abs(S),direction:Math.sign(S),raw:_};c.length>=2&&c.shift();let I=c.length?c[c.length-1]:void 0;if(c.push(T),I?(T.direction!==I.direction||T.delta>I.delta||T.time>I.time+150)&&p(T):p(T),d(T))return!0}else{let T={time:rt(),delta:Math.abs(S),direction:Math.sign(S)},I=l&&T.time<l.time+500&&T.delta<=l.delta&&T.direction===l.direction;if(!I){l=void 0;let z=e.getTranslate()+S*O.sensitivity,C=e.isBeginning,w=e.isEnd;if(z>=e.minTranslate()&&(z=e.minTranslate()),z<=e.maxTranslate()&&(z=e.maxTranslate()),e.setTransition(0),e.setTranslate(z),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!C&&e.isBeginning||!w&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:T.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(o),o=void 0,c.length>=15&&c.shift();let E=c.length?c[c.length-1]:void 0,P=c[0];if(c.push(T),E&&(T.delta>E.delta||T.direction!==E.direction))c.splice(0);else if(c.length>=15&&T.time-P.time<500&&P.delta-T.delta>=1&&T.delta<=6){let B=S>0?.8:.2;l=T,c.splice(0),o=Kt(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,B)},0)}o||(o=Kt(()=>{if(e.destroyed||!e.params)return;let B=.5;l=T,c.splice(0),e.slideToClosest(e.params.speed,!0,void 0,B)},500))}if(I||s("scroll",b),e.params.autoplay&&e.params.autoplay.disableOnInteraction&&e.autoplay.stop(),O.releaseOnEdges&&(z===e.minTranslate()||z===e.maxTranslate()))return!0}}return b.preventDefault?b.preventDefault():b.returnValue=!1,!1}function g(_){let b=e.el;e.params.mousewheel.eventsTarget!=="container"&&(b=document.querySelector(e.params.mousewheel.eventsTarget)),b[_]("mouseenter",f),b[_]("mouseleave",m),b[_]("wheel",h)}function v(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",h),!0):e.mousewheel.enabled?!1:(g("addEventListener"),e.mousewheel.enabled=!0,!0)}function y(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,h),!0):e.mousewheel.enabled?(g("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&y(),e.params.mousewheel.enabled&&v()}),n("destroy",()=>{e.params.cssMode&&v(),e.mousewheel.enabled&&y()}),Object.assign(e.mousewheel,{enable:v,disable:y})}function Yi(i,e,t,n){return i.params.createElements&&Object.keys(n).forEach(s=>{if(!t[s]&&t.auto===!0){let r=Ne(i.el,`.${n[s]}`)[0];r||(r=Ee("div",n[s]),r.className=n[s],i.el.append(r)),t[s]=r,e[s]=r}}),t}function Cp(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(d){let h;return d&&typeof d=="string"&&e.isElement&&(h=e.el.querySelector(d)||e.hostEl.querySelector(d),h)?h:(d&&(typeof d=="string"&&(h=[...document.querySelectorAll(d)]),e.params.uniqueNavElements&&typeof d=="string"&&h&&h.length>1&&e.el.querySelectorAll(d).length===1?h=e.el.querySelector(d):h&&h.length===1&&(h=h[0])),d&&!h?d:h)}function o(d,h){let g=e.params.navigation;d=V(d),d.forEach(v=>{v&&(v.classList[h?"add":"remove"](...g.disabledClass.split(" ")),v.tagName==="BUTTON"&&(v.disabled=h),e.params.watchOverflow&&e.enabled&&v.classList[e.isLocked?"add":"remove"](g.lockClass))})}function a(){let{nextEl:d,prevEl:h}=e.navigation;if(e.params.loop){o(h,!1),o(d,!1);return}o(h,e.isBeginning&&!e.params.rewind),o(d,e.isEnd&&!e.params.rewind)}function l(d){d.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function c(d){d.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function u(){let d=e.params.navigation;if(e.params.navigation=Yi(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(d.nextEl||d.prevEl))return;let h=r(d.nextEl),g=r(d.prevEl);Object.assign(e.navigation,{nextEl:h,prevEl:g}),h=V(h),g=V(g);let v=(y,_)=>{y&&y.addEventListener("click",_==="next"?c:l),!e.enabled&&y&&y.classList.add(...d.lockClass.split(" "))};h.forEach(y=>v(y,"next")),g.forEach(y=>v(y,"prev"))}function f(){let{nextEl:d,prevEl:h}=e.navigation;d=V(d),h=V(h);let g=(v,y)=>{v.removeEventListener("click",y==="next"?c:l),v.classList.remove(...e.params.navigation.disabledClass.split(" "))};d.forEach(v=>g(v,"next")),h.forEach(v=>g(v,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?p():(u(),a())}),n("toEdge fromEdge lock unlock",()=>{a()}),n("destroy",()=>{f()}),n("enable disable",()=>{let{nextEl:d,prevEl:h}=e.navigation;if(d=V(d),h=V(h),e.enabled){a();return}[...d,...h].filter(g=>!!g).forEach(g=>g.classList.add(e.params.navigation.lockClass))}),n("click",(d,h)=>{let{nextEl:g,prevEl:v}=e.navigation;g=V(g),v=V(v);let y=h.target,_=v.includes(y)||g.includes(y);if(e.isElement&&!_){let b=h.path||h.composedPath&&h.composedPath();b&&(_=b.find(k=>g.includes(k)||v.includes(k)))}if(e.params.navigation.hideOnClick&&!_){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let b;g.length?b=g[0].classList.contains(e.params.navigation.hiddenClass):v.length&&(b=v[0].classList.contains(e.params.navigation.hiddenClass)),s(b===!0?"navigationShow":"navigationHide"),[...g,...v].filter(k=>!!k).forEach(k=>k.classList.toggle(e.params.navigation.hiddenClass))}});let m=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),a()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(e.navigation,{enable:m,disable:p,update:a,init:u,destroy:f})}function Ge(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function Tp(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:y=>y,formatFractionTotal:y=>y,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let o,a=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(y,_){let{bulletActiveClass:b}=e.params.pagination;y&&(y=y[`${_==="prev"?"previous":"next"}ElementSibling`],y&&(y.classList.add(`${b}-${_}`),y=y[`${_==="prev"?"previous":"next"}ElementSibling`],y&&y.classList.add(`${b}-${_}-${_}`)))}function u(y,_,b){if(y=y%b,_=_%b,_===y+1)return"next";if(_===y-1)return"previous"}function f(y){let _=y.target.closest(Ge(e.params.pagination.bulletClass));if(!_)return;y.preventDefault();let b=tn(_)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===b)return;let k=u(e.realIndex,b,e.slides.length);k==="next"?e.slideNext():k==="previous"?e.slidePrev():e.slideToLoop(b)}else e.slideTo(b)}function m(){let y=e.rtl,_=e.params.pagination;if(l())return;let b=e.pagination.el;b=V(b);let k,O,x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,R=e.params.loop?Math.ceil(x/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(O=e.previousRealIndex||0,k=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(k=e.snapIndex,O=e.previousSnapIndex):(O=e.previousIndex||0,k=e.activeIndex||0),_.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){let S=e.pagination.bullets,L,$,N;if(_.dynamicBullets&&(o=bu(S[0],e.isHorizontal()?"width":"height",!0),b.forEach(T=>{T.style[e.isHorizontal()?"width":"height"]=`${o*(_.dynamicMainBullets+4)}px`}),_.dynamicMainBullets>1&&O!==void 0&&(a+=k-(O||0),a>_.dynamicMainBullets-1?a=_.dynamicMainBullets-1:a<0&&(a=0)),L=Math.max(k-a,0),$=L+(Math.min(S.length,_.dynamicMainBullets)-1),N=($+L)/2),S.forEach(T=>{let I=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(z=>`${_.bulletActiveClass}${z}`)].map(z=>typeof z=="string"&&z.includes(" ")?z.split(" "):z).flat();T.classList.remove(...I)}),b.length>1)S.forEach(T=>{let I=tn(T);I===k?T.classList.add(..._.bulletActiveClass.split(" ")):e.isElement&&T.setAttribute("part","bullet"),_.dynamicBullets&&(I>=L&&I<=$&&T.classList.add(...`${_.bulletActiveClass}-main`.split(" ")),I===L&&c(T,"prev"),I===$&&c(T,"next"))});else{let T=S[k];if(T&&T.classList.add(..._.bulletActiveClass.split(" ")),e.isElement&&S.forEach((I,z)=>{I.setAttribute("part",z===k?"bullet-active":"bullet")}),_.dynamicBullets){let I=S[L],z=S[$];for(let C=L;C<=$;C+=1)S[C]&&S[C].classList.add(...`${_.bulletActiveClass}-main`.split(" "));c(I,"prev"),c(z,"next")}}if(_.dynamicBullets){let T=Math.min(S.length,_.dynamicMainBullets+4),I=(o*T-o)/2-N*o,z=y?"right":"left";S.forEach(C=>{C.style[e.isHorizontal()?z:"top"]=`${I}px`})}}b.forEach((S,L)=>{if(_.type==="fraction"&&(S.querySelectorAll(Ge(_.currentClass)).forEach($=>{$.textContent=_.formatFractionCurrent(k+1)}),S.querySelectorAll(Ge(_.totalClass)).forEach($=>{$.textContent=_.formatFractionTotal(R)})),_.type==="progressbar"){let $;_.progressbarOpposite?$=e.isHorizontal()?"vertical":"horizontal":$=e.isHorizontal()?"horizontal":"vertical";let N=(k+1)/R,T=1,I=1;$==="horizontal"?T=N:I=N,S.querySelectorAll(Ge(_.progressbarFillClass)).forEach(z=>{z.style.transform=`translate3d(0,0,0) scaleX(${T}) scaleY(${I})`,z.style.transitionDuration=`${e.params.speed}ms`})}_.type==="custom"&&_.renderCustom?(fe(S,_.renderCustom(e,k+1,R)),L===0&&s("paginationRender",S)):(L===0&&s("paginationRender",S),s("paginationUpdate",S)),e.params.watchOverflow&&e.enabled&&S.classList[e.isLocked?"add":"remove"](_.lockClass)})}function p(){let y=e.params.pagination;if(l())return;let _=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length,b=e.pagination.el;b=V(b);let k="";if(y.type==="bullets"){let O=e.params.loop?Math.ceil(_/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&O>_&&(O=_);for(let x=0;x<O;x+=1)y.renderBullet?k+=y.renderBullet.call(e,x,y.bulletClass):k+=`<${y.bulletElement} ${e.isElement?'part="bullet"':""} class="${y.bulletClass}"></${y.bulletElement}>`}y.type==="fraction"&&(y.renderFraction?k=y.renderFraction.call(e,y.currentClass,y.totalClass):k=`<span class="${y.currentClass}"></span> / <span class="${y.totalClass}"></span>`),y.type==="progressbar"&&(y.renderProgressbar?k=y.renderProgressbar.call(e,y.progressbarFillClass):k=`<span class="${y.progressbarFillClass}"></span>`),e.pagination.bullets=[],b.forEach(O=>{y.type!=="custom"&&fe(O,k||""),y.type==="bullets"&&e.pagination.bullets.push(...O.querySelectorAll(Ge(y.bulletClass)))}),y.type!=="custom"&&s("paginationRender",b[0])}function d(){e.params.pagination=Yi(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});let y=e.params.pagination;if(!y.el)return;let _;typeof y.el=="string"&&e.isElement&&(_=e.el.querySelector(y.el)),!_&&typeof y.el=="string"&&(_=[...document.querySelectorAll(y.el)]),_||(_=y.el),!(!_||_.length===0)&&(e.params.uniqueNavElements&&typeof y.el=="string"&&Array.isArray(_)&&_.length>1&&(_=[...e.el.querySelectorAll(y.el)],_.length>1&&(_=_.find(b=>bt(b,".swiper")[0]===e.el))),Array.isArray(_)&&_.length===1&&(_=_[0]),Object.assign(e.pagination,{el:_}),_=V(_),_.forEach(b=>{y.type==="bullets"&&y.clickable&&b.classList.add(...(y.clickableClass||"").split(" ")),b.classList.add(y.modifierClass+y.type),b.classList.add(e.isHorizontal()?y.horizontalClass:y.verticalClass),y.type==="bullets"&&y.dynamicBullets&&(b.classList.add(`${y.modifierClass}${y.type}-dynamic`),a=0,y.dynamicMainBullets<1&&(y.dynamicMainBullets=1)),y.type==="progressbar"&&y.progressbarOpposite&&b.classList.add(y.progressbarOppositeClass),y.clickable&&b.addEventListener("click",f),e.enabled||b.classList.add(y.lockClass)}))}function h(){let y=e.params.pagination;if(l())return;let _=e.pagination.el;_&&(_=V(_),_.forEach(b=>{b.classList.remove(y.hiddenClass),b.classList.remove(y.modifierClass+y.type),b.classList.remove(e.isHorizontal()?y.horizontalClass:y.verticalClass),y.clickable&&(b.classList.remove(...(y.clickableClass||"").split(" ")),b.removeEventListener("click",f))})),e.pagination.bullets&&e.pagination.bullets.forEach(b=>b.classList.remove(...y.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;let y=e.params.pagination,{el:_}=e.pagination;_=V(_),_.forEach(b=>{b.classList.remove(y.horizontalClass,y.verticalClass),b.classList.add(e.isHorizontal()?y.horizontalClass:y.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?v():(d(),p(),m())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&m()}),n("snapIndexChange",()=>{m()}),n("snapGridLengthChange",()=>{p(),m()}),n("destroy",()=>{h()}),n("enable disable",()=>{let{el:y}=e.pagination;y&&(y=V(y),y.forEach(_=>_.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{m()}),n("click",(y,_)=>{let b=_.target,k=V(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&k&&k.length>0&&!b.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&b===e.navigation.nextEl||e.navigation.prevEl&&b===e.navigation.prevEl))return;let O=k[0].classList.contains(e.params.pagination.hiddenClass);s(O===!0?"paginationShow":"paginationHide"),k.forEach(x=>x.classList.toggle(e.params.pagination.hiddenClass))}});let g=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:y}=e.pagination;y&&(y=V(y),y.forEach(_=>_.classList.remove(e.params.pagination.paginationDisabledClass))),d(),p(),m()},v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:y}=e.pagination;y&&(y=V(y),y.forEach(_=>_.classList.add(e.params.pagination.paginationDisabledClass))),h()};Object.assign(e.pagination,{enable:g,disable:v,render:p,update:m,init:d,destroy:h})}function Ip(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r=ye(),o=!1,a=null,l=null,c,u,f,m;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function p(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;let{scrollbar:N,rtlTranslate:T}=e,{dragEl:I,el:z}=N,C=e.params.scrollbar,w=e.params.loop?e.progressLoop:e.progress,E=u,P=(f-u)*w;T?(P=-P,P>0?(E=u-P,P=0):-P+u>f&&(E=f+P)):P<0?(E=u+P,P=0):P+u>f&&(E=f-P),e.isHorizontal()?(I.style.transform=`translate3d(${P}px, 0, 0)`,I.style.width=`${E}px`):(I.style.transform=`translate3d(0px, ${P}px, 0)`,I.style.height=`${E}px`),C.hide&&(clearTimeout(a),z.style.opacity=1,a=setTimeout(()=>{z.style.opacity=0,z.style.transitionDuration="400ms"},1e3))}function d(N){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${N}ms`)}function h(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;let{scrollbar:N}=e,{dragEl:T,el:I}=N;T.style.width="",T.style.height="",f=e.isHorizontal()?I.offsetWidth:I.offsetHeight,m=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?u=f*m:u=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?T.style.width=`${u}px`:T.style.height=`${u}px`,m>=1?I.style.display="none":I.style.display="",e.params.scrollbar.hide&&(I.style.opacity=0),e.params.watchOverflow&&e.enabled&&N.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function g(N){return e.isHorizontal()?N.clientX:N.clientY}function v(N){let{scrollbar:T,rtlTranslate:I}=e,{el:z}=T,C;C=(g(N)-Xt(z)[e.isHorizontal()?"left":"top"]-(c!==null?c:u/2))/(f-u),C=Math.max(Math.min(C,1),0),I&&(C=1-C);let w=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*C;e.updateProgress(w),e.setTranslate(w),e.updateActiveIndex(),e.updateSlidesClasses()}function y(N){let T=e.params.scrollbar,{scrollbar:I,wrapperEl:z}=e,{el:C,dragEl:w}=I;o=!0,c=N.target===w?g(N)-N.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,N.preventDefault(),N.stopPropagation(),z.style.transitionDuration="100ms",w.style.transitionDuration="100ms",v(N),clearTimeout(l),C.style.transitionDuration="0ms",T.hide&&(C.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),s("scrollbarDragStart",N)}function _(N){let{scrollbar:T,wrapperEl:I}=e,{el:z,dragEl:C}=T;o&&(N.preventDefault&&N.cancelable?N.preventDefault():N.returnValue=!1,v(N),I.style.transitionDuration="0ms",z.style.transitionDuration="0ms",C.style.transitionDuration="0ms",s("scrollbarDragMove",N))}function b(N){let T=e.params.scrollbar,{scrollbar:I,wrapperEl:z}=e,{el:C}=I;o&&(o=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",z.style.transitionDuration=""),T.hide&&(clearTimeout(l),l=Kt(()=>{C.style.opacity=0,C.style.transitionDuration="400ms"},1e3)),s("scrollbarDragEnd",N),T.snapOnRelease&&e.slideToClosest())}function k(N){let{scrollbar:T,params:I}=e,z=T.el;if(!z)return;let C=z,w=I.passiveListeners?{passive:!1,capture:!1}:!1,E=I.passiveListeners?{passive:!0,capture:!1}:!1;if(!C)return;let P=N==="on"?"addEventListener":"removeEventListener";C[P]("pointerdown",y,w),r[P]("pointermove",_,w),r[P]("pointerup",b,E)}function O(){!e.params.scrollbar.el||!e.scrollbar.el||k("on")}function x(){!e.params.scrollbar.el||!e.scrollbar.el||k("off")}function R(){let{scrollbar:N,el:T}=e;e.params.scrollbar=Yi(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});let I=e.params.scrollbar;if(!I.el)return;let z;if(typeof I.el=="string"&&e.isElement&&(z=e.el.querySelector(I.el)),!z&&typeof I.el=="string"){if(z=r.querySelectorAll(I.el),!z.length)return}else z||(z=I.el);e.params.uniqueNavElements&&typeof I.el=="string"&&z.length>1&&T.querySelectorAll(I.el).length===1&&(z=T.querySelector(I.el)),z.length>0&&(z=z[0]),z.classList.add(e.isHorizontal()?I.horizontalClass:I.verticalClass);let C;z&&(C=z.querySelector(Ge(e.params.scrollbar.dragClass)),C||(C=Ee("div",e.params.scrollbar.dragClass),z.append(C))),Object.assign(N,{el:z,dragEl:C}),I.draggable&&O(),z&&z.classList[e.enabled?"remove":"add"](...Nt(e.params.scrollbar.lockClass))}function S(){let N=e.params.scrollbar,T=e.scrollbar.el;T&&T.classList.remove(...Nt(e.isHorizontal()?N.horizontalClass:N.verticalClass)),x()}n("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;let N=e.params.scrollbar,{el:T}=e.scrollbar;T=V(T),T.forEach(I=>{I.classList.remove(N.horizontalClass,N.verticalClass),I.classList.add(e.isHorizontal()?N.horizontalClass:N.verticalClass)})}),n("init",()=>{e.params.scrollbar.enabled===!1?$():(R(),h(),p())}),n("update resize observerUpdate lock unlock changeDirection",()=>{h()}),n("setTranslate",()=>{p()}),n("setTransition",(N,T)=>{d(T)}),n("enable disable",()=>{let{el:N}=e.scrollbar;N&&N.classList[e.enabled?"remove":"add"](...Nt(e.params.scrollbar.lockClass))}),n("destroy",()=>{S()});let L=()=>{e.el.classList.remove(...Nt(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...Nt(e.params.scrollbar.scrollbarDisabledClass)),R(),h(),p()},$=()=>{e.el.classList.add(...Nt(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...Nt(e.params.scrollbar.scrollbarDisabledClass)),S()};Object.assign(e.scrollbar,{enable:L,disable:$,updateSize:h,setTranslate:p,init:R,destroy:S})}function Pp(i){let{swiper:e,extendParams:t,on:n}=i;t({parallax:{enabled:!1}});let s="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",r=(l,c)=>{let{rtl:u}=e,f=u?-1:1,m=l.getAttribute("data-swiper-parallax")||"0",p=l.getAttribute("data-swiper-parallax-x"),d=l.getAttribute("data-swiper-parallax-y"),h=l.getAttribute("data-swiper-parallax-scale"),g=l.getAttribute("data-swiper-parallax-opacity"),v=l.getAttribute("data-swiper-parallax-rotate");if(p||d?(p=p||"0",d=d||"0"):e.isHorizontal()?(p=m,d="0"):(d=m,p="0"),p.indexOf("%")>=0?p=`${parseInt(p,10)*c*f}%`:p=`${p*c*f}px`,d.indexOf("%")>=0?d=`${parseInt(d,10)*c}%`:d=`${d*c}px`,typeof g<"u"&&g!==null){let _=g-(g-1)*(1-Math.abs(c));l.style.opacity=_}let y=`translate3d(${p}, ${d}, 0px)`;if(typeof h<"u"&&h!==null){let _=h-(h-1)*(1-Math.abs(c));y+=` scale(${_})`}if(v&&typeof v<"u"&&v!==null){let _=v*c*-1;y+=` rotate(${_}deg)`}l.style.transform=y},o=()=>{let{el:l,slides:c,progress:u,snapGrid:f,isElement:m}=e,p=Ne(l,s);e.isElement&&p.push(...Ne(e.hostEl,s)),p.forEach(d=>{r(d,u)}),c.forEach((d,h)=>{let g=d.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(g+=Math.ceil(h/2)-u*(f.length-1)),g=Math.min(Math.max(g,-1),1),d.querySelectorAll(`${s}, [data-swiper-parallax-rotate]`).forEach(v=>{r(v,g)})})},a=function(l){l===void 0&&(l=e.params.speed);let{el:c,hostEl:u}=e,f=[...c.querySelectorAll(s)];e.isElement&&f.push(...u.querySelectorAll(s)),f.forEach(m=>{let p=parseInt(m.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(p=0),m.style.transitionDuration=`${p}ms`})};n("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),n("init",()=>{e.params.parallax.enabled&&o()}),n("setTranslate",()=>{e.params.parallax.enabled&&o()}),n("setTransition",(l,c)=>{e.params.parallax.enabled&&a(c)})}function xp(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r=Fe();t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,panOnMouseMove:!1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let o=1,a=!1,l=!1,c={x:0,y:0},u=-3,f,m,p=[],d={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},h={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},g={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},v=1;Object.defineProperty(e.zoom,"scale",{get(){return v},set(D){if(v!==D){let M=d.imageEl,A=d.slideEl;s("zoomChange",D,M,A)}v=D}});function y(){if(p.length<2)return 1;let D=p[0].pageX,M=p[0].pageY,A=p[1].pageX,H=p[1].pageY;return Math.sqrt((A-D)**2+(H-M)**2)}function _(){let D=e.params.zoom,M=d.imageWrapEl.getAttribute("data-swiper-zoom")||D.maxRatio;if(D.limitToOriginalSize&&d.imageEl&&d.imageEl.naturalWidth){let A=d.imageEl.naturalWidth/d.imageEl.offsetWidth;return Math.min(A,M)}return M}function b(){if(p.length<2)return{x:null,y:null};let D=d.imageEl.getBoundingClientRect();return[(p[0].pageX+(p[1].pageX-p[0].pageX)/2-D.x-r.scrollX)/o,(p[0].pageY+(p[1].pageY-p[0].pageY)/2-D.y-r.scrollY)/o]}function k(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function O(D){let M=k();return!!(D.target.matches(M)||e.slides.filter(A=>A.contains(D.target)).length>0)}function x(D){let M=`.${e.params.zoom.containerClass}`;return!!(D.target.matches(M)||[...e.hostEl.querySelectorAll(M)].filter(A=>A.contains(D.target)).length>0)}function R(D){if(D.pointerType==="mouse"&&p.splice(0,p.length),!O(D))return;let M=e.params.zoom;if(f=!1,m=!1,p.push(D),!(p.length<2)){if(f=!0,d.scaleStart=y(),!d.slideEl){d.slideEl=D.target.closest(`.${e.params.slideClass}, swiper-slide`),d.slideEl||(d.slideEl=e.slides[e.activeIndex]);let A=d.slideEl.querySelector(`.${M.containerClass}`);if(A&&(A=A.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=A,A?d.imageWrapEl=bt(d.imageEl,`.${M.containerClass}`)[0]:d.imageWrapEl=void 0,!d.imageWrapEl){d.imageEl=void 0;return}d.maxRatio=_()}if(d.imageEl){let[A,H]=b();d.originX=A,d.originY=H,d.imageEl.style.transitionDuration="0ms"}a=!0}}function S(D){if(!O(D))return;let M=e.params.zoom,A=e.zoom,H=p.findIndex(ie=>ie.pointerId===D.pointerId);H>=0&&(p[H]=D),!(p.length<2)&&(m=!0,d.scaleMove=y(),d.imageEl&&(A.scale=d.scaleMove/d.scaleStart*o,A.scale>d.maxRatio&&(A.scale=d.maxRatio-1+(A.scale-d.maxRatio+1)**.5),A.scale<M.minRatio&&(A.scale=M.minRatio+1-(M.minRatio-A.scale+1)**.5),d.imageEl.style.transform=`translate3d(0,0,0) scale(${A.scale})`))}function L(D){if(!O(D)||D.pointerType==="mouse"&&D.type==="pointerout")return;let M=e.params.zoom,A=e.zoom,H=p.findIndex(ie=>ie.pointerId===D.pointerId);H>=0&&p.splice(H,1),!(!f||!m)&&(f=!1,m=!1,d.imageEl&&(A.scale=Math.max(Math.min(A.scale,d.maxRatio),M.minRatio),d.imageEl.style.transitionDuration=`${e.params.speed}ms`,d.imageEl.style.transform=`translate3d(0,0,0) scale(${A.scale})`,o=A.scale,a=!1,A.scale>1&&d.slideEl?d.slideEl.classList.add(`${M.zoomedSlideClass}`):A.scale<=1&&d.slideEl&&d.slideEl.classList.remove(`${M.zoomedSlideClass}`),A.scale===1&&(d.originX=0,d.originY=0,d.slideEl=void 0)))}let $;function N(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function T(){clearTimeout($),e.touchEventsData.preventTouchMoveFromPointerMove=!0,$=setTimeout(()=>{e.destroyed||N()})}function I(D){let M=e.device;if(!d.imageEl||h.isTouched)return;M.android&&D.cancelable&&D.preventDefault(),h.isTouched=!0;let A=p.length>0?p[0]:D;h.touchesStart.x=A.pageX,h.touchesStart.y=A.pageY}function z(D){let A=D.pointerType==="mouse"&&e.params.zoom.panOnMouseMove;if(!O(D)||!x(D))return;let H=e.zoom;if(!d.imageEl)return;if(!h.isTouched||!d.slideEl){A&&E(D);return}if(A){E(D);return}h.isMoved||(h.width=d.imageEl.offsetWidth||d.imageEl.clientWidth,h.height=d.imageEl.offsetHeight||d.imageEl.clientHeight,h.startX=to(d.imageWrapEl,"x")||0,h.startY=to(d.imageWrapEl,"y")||0,d.slideWidth=d.slideEl.offsetWidth,d.slideHeight=d.slideEl.offsetHeight,d.imageWrapEl.style.transitionDuration="0ms");let ie=h.width*H.scale,Oe=h.height*H.scale;if(h.minX=Math.min(d.slideWidth/2-ie/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-Oe/2,0),h.maxY=-h.minY,h.touchesCurrent.x=p.length>0?p[0].pageX:D.pageX,h.touchesCurrent.y=p.length>0?p[0].pageY:D.pageY,Math.max(Math.abs(h.touchesCurrent.x-h.touchesStart.x),Math.abs(h.touchesCurrent.y-h.touchesStart.y))>5&&(e.allowClick=!1),!h.isMoved&&!a){if(e.isHorizontal()&&(Math.floor(h.minX)===Math.floor(h.startX)&&h.touchesCurrent.x<h.touchesStart.x||Math.floor(h.maxX)===Math.floor(h.startX)&&h.touchesCurrent.x>h.touchesStart.x)){h.isTouched=!1,N();return}if(!e.isHorizontal()&&(Math.floor(h.minY)===Math.floor(h.startY)&&h.touchesCurrent.y<h.touchesStart.y||Math.floor(h.maxY)===Math.floor(h.startY)&&h.touchesCurrent.y>h.touchesStart.y)){h.isTouched=!1,N();return}}D.cancelable&&D.preventDefault(),D.stopPropagation(),T(),h.isMoved=!0;let pt=(H.scale-o)/(d.maxRatio-e.params.zoom.minRatio),{originX:It,originY:_e}=d;h.currentX=h.touchesCurrent.x-h.touchesStart.x+h.startX+pt*(h.width-It*2),h.currentY=h.touchesCurrent.y-h.touchesStart.y+h.startY+pt*(h.height-_e*2),h.currentX<h.minX&&(h.currentX=h.minX+1-(h.minX-h.currentX+1)**.8),h.currentX>h.maxX&&(h.currentX=h.maxX-1+(h.currentX-h.maxX+1)**.8),h.currentY<h.minY&&(h.currentY=h.minY+1-(h.minY-h.currentY+1)**.8),h.currentY>h.maxY&&(h.currentY=h.maxY-1+(h.currentY-h.maxY+1)**.8),g.prevPositionX||(g.prevPositionX=h.touchesCurrent.x),g.prevPositionY||(g.prevPositionY=h.touchesCurrent.y),g.prevTime||(g.prevTime=Date.now()),g.x=(h.touchesCurrent.x-g.prevPositionX)/(Date.now()-g.prevTime)/2,g.y=(h.touchesCurrent.y-g.prevPositionY)/(Date.now()-g.prevTime)/2,Math.abs(h.touchesCurrent.x-g.prevPositionX)<2&&(g.x=0),Math.abs(h.touchesCurrent.y-g.prevPositionY)<2&&(g.y=0),g.prevPositionX=h.touchesCurrent.x,g.prevPositionY=h.touchesCurrent.y,g.prevTime=Date.now(),d.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function C(){let D=e.zoom;if(p.length=0,!d.imageEl)return;if(!h.isTouched||!h.isMoved){h.isTouched=!1,h.isMoved=!1;return}h.isTouched=!1,h.isMoved=!1;let M=300,A=300,H=g.x*M,ie=h.currentX+H,Oe=g.y*A,Ue=h.currentY+Oe;g.x!==0&&(M=Math.abs((ie-h.currentX)/g.x)),g.y!==0&&(A=Math.abs((Ue-h.currentY)/g.y));let pt=Math.max(M,A);h.currentX=ie,h.currentY=Ue;let It=h.width*D.scale,_e=h.height*D.scale;h.minX=Math.min(d.slideWidth/2-It/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-_e/2,0),h.maxY=-h.minY,h.currentX=Math.max(Math.min(h.currentX,h.maxX),h.minX),h.currentY=Math.max(Math.min(h.currentY,h.maxY),h.minY),d.imageWrapEl.style.transitionDuration=`${pt}ms`,d.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function w(){let D=e.zoom;d.slideEl&&e.activeIndex!==e.slides.indexOf(d.slideEl)&&(d.imageEl&&(d.imageEl.style.transform="translate3d(0,0,0) scale(1)"),d.imageWrapEl&&(d.imageWrapEl.style.transform="translate3d(0,0,0)"),d.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),D.scale=1,o=1,d.slideEl=void 0,d.imageEl=void 0,d.imageWrapEl=void 0,d.originX=0,d.originY=0)}function E(D){if(o<=1||!d.imageWrapEl||!O(D)||!x(D))return;let M=r.getComputedStyle(d.imageWrapEl).transform,A=new r.DOMMatrix(M);if(!l){l=!0,c.x=D.clientX,c.y=D.clientY,h.startX=A.e,h.startY=A.f,h.width=d.imageEl.offsetWidth||d.imageEl.clientWidth,h.height=d.imageEl.offsetHeight||d.imageEl.clientHeight,d.slideWidth=d.slideEl.offsetWidth,d.slideHeight=d.slideEl.offsetHeight;return}let H=(D.clientX-c.x)*u,ie=(D.clientY-c.y)*u,Oe=h.width*o,Ue=h.height*o,pt=d.slideWidth,It=d.slideHeight,_e=Math.min(pt/2-Oe/2,0),Xe=-_e,Xi=Math.min(It/2-Ue/2,0),qn=-Xi,di=Math.max(Math.min(h.startX+H,Xe),_e),hi=Math.max(Math.min(h.startY+ie,qn),Xi);d.imageWrapEl.style.transitionDuration="0ms",d.imageWrapEl.style.transform=`translate3d(${di}px, ${hi}px, 0)`,c.x=D.clientX,c.y=D.clientY,h.startX=di,h.startY=hi,h.currentX=di,h.currentY=hi}function P(D){let M=e.zoom,A=e.params.zoom;if(!d.slideEl){D&&D.target&&(d.slideEl=D.target.closest(`.${e.params.slideClass}, swiper-slide`)),d.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=Ne(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex]);let Qi=d.slideEl.querySelector(`.${A.containerClass}`);Qi&&(Qi=Qi.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=Qi,Qi?d.imageWrapEl=bt(d.imageEl,`.${A.containerClass}`)[0]:d.imageWrapEl=void 0}if(!d.imageEl||!d.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),d.slideEl.classList.add(`${A.zoomedSlideClass}`);let H,ie,Oe,Ue,pt,It,_e,Xe,Xi,qn,di,hi,Yn,Gn,Rr,Dr,Or,Lr;typeof h.touchesStart.x>"u"&&D?(H=D.pageX,ie=D.pageY):(H=h.touchesStart.x,ie=h.touchesStart.y);let Fr=o,fi=typeof D=="number"?D:null;o===1&&fi&&(H=void 0,ie=void 0,h.touchesStart.x=void 0,h.touchesStart.y=void 0);let jl=_();M.scale=fi||jl,o=fi||jl,D&&!(o===1&&fi)?(Or=d.slideEl.offsetWidth,Lr=d.slideEl.offsetHeight,Oe=Xt(d.slideEl).left+r.scrollX,Ue=Xt(d.slideEl).top+r.scrollY,pt=Oe+Or/2-H,It=Ue+Lr/2-ie,Xi=d.imageEl.offsetWidth||d.imageEl.clientWidth,qn=d.imageEl.offsetHeight||d.imageEl.clientHeight,di=Xi*M.scale,hi=qn*M.scale,Yn=Math.min(Or/2-di/2,0),Gn=Math.min(Lr/2-hi/2,0),Rr=-Yn,Dr=-Gn,Fr>0&&fi&&typeof h.currentX=="number"&&typeof h.currentY=="number"?(_e=h.currentX*M.scale/Fr,Xe=h.currentY*M.scale/Fr):(_e=pt*M.scale,Xe=It*M.scale),_e<Yn&&(_e=Yn),_e>Rr&&(_e=Rr),Xe<Gn&&(Xe=Gn),Xe>Dr&&(Xe=Dr)):(_e=0,Xe=0),fi&&M.scale===1&&(d.originX=0,d.originY=0),h.currentX=_e,h.currentY=Xe,d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform=`translate3d(${_e}px, ${Xe}px,0)`,d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform=`translate3d(0,0,0) scale(${M.scale})`}function B(){let D=e.zoom,M=e.params.zoom;if(!d.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=Ne(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex];let A=d.slideEl.querySelector(`.${M.containerClass}`);A&&(A=A.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=A,A?d.imageWrapEl=bt(d.imageEl,`.${M.containerClass}`)[0]:d.imageWrapEl=void 0}!d.imageEl||!d.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),D.scale=1,o=1,h.currentX=void 0,h.currentY=void 0,h.touchesStart.x=void 0,h.touchesStart.y=void 0,d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform="translate3d(0,0,0)",d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform="translate3d(0,0,0) scale(1)",d.slideEl.classList.remove(`${M.zoomedSlideClass}`),d.slideEl=void 0,d.originX=0,d.originY=0,e.params.zoom.panOnMouseMove&&(c={x:0,y:0},l&&(l=!1,h.startX=0,h.startY=0)))}function Q(D){let M=e.zoom;M.scale&&M.scale!==1?B():P(D)}function ee(){let D=e.params.passiveListeners?{passive:!0,capture:!1}:!1,M=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:D,activeListenerWithCapture:M}}function ce(){let D=e.zoom;if(D.enabled)return;D.enabled=!0;let{passiveListener:M,activeListenerWithCapture:A}=ee();e.wrapperEl.addEventListener("pointerdown",R,M),e.wrapperEl.addEventListener("pointermove",S,A),["pointerup","pointercancel","pointerout"].forEach(H=>{e.wrapperEl.addEventListener(H,L,M)}),e.wrapperEl.addEventListener("pointermove",z,A)}function te(){let D=e.zoom;if(!D.enabled)return;D.enabled=!1;let{passiveListener:M,activeListenerWithCapture:A}=ee();e.wrapperEl.removeEventListener("pointerdown",R,M),e.wrapperEl.removeEventListener("pointermove",S,A),["pointerup","pointercancel","pointerout"].forEach(H=>{e.wrapperEl.removeEventListener(H,L,M)}),e.wrapperEl.removeEventListener("pointermove",z,A)}n("init",()=>{e.params.zoom.enabled&&ce()}),n("destroy",()=>{te()}),n("touchStart",(D,M)=>{e.zoom.enabled&&I(M)}),n("touchEnd",(D,M)=>{e.zoom.enabled&&C()}),n("doubleTap",(D,M)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&Q(M)}),n("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&w()}),n("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&w()}),Object.assign(e.zoom,{enable:ce,disable:te,in:P,out:B,toggle:Q})}function Mp(i){let{swiper:e,extendParams:t,on:n}=i;t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function s(c,u){let f=(function(){let h,g,v;return(y,_)=>{for(g=-1,h=y.length;h-g>1;)v=h+g>>1,y[v]<=_?g=v:h=v;return h}})();this.x=c,this.y=u,this.lastIndex=c.length-1;let m,p;return this.interpolate=function(h){return h?(p=f(this.x,h),m=p-1,(h-this.x[m])*(this.y[p]-this.y[m])/(this.x[p]-this.x[m])+this.y[m]):0},this}function r(c){e.controller.spline=e.params.loop?new s(e.slidesGrid,c.slidesGrid):new s(e.snapGrid,c.snapGrid)}function o(c,u){let f=e.controller.control,m,p,d=e.constructor;function h(g){if(g.destroyed)return;let v=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(r(g),p=-e.controller.spline.interpolate(-v)),(!p||e.params.controller.by==="container")&&(m=(g.maxTranslate()-g.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(m)||!Number.isFinite(m))&&(m=1),p=(v-e.minTranslate())*m+g.minTranslate()),e.params.controller.inverse&&(p=g.maxTranslate()-p),g.updateProgress(p),g.setTranslate(p,e),g.updateActiveIndex(),g.updateSlidesClasses()}if(Array.isArray(f))for(let g=0;g<f.length;g+=1)f[g]!==u&&f[g]instanceof d&&h(f[g]);else f instanceof d&&u!==f&&h(f)}function a(c,u){let f=e.constructor,m=e.controller.control,p;function d(h){h.destroyed||(h.setTransition(c,e),c!==0&&(h.transitionStart(),h.params.autoHeight&&Kt(()=>{h.updateAutoHeight()}),Rt(h.wrapperEl,()=>{m&&h.transitionEnd()})))}if(Array.isArray(m))for(p=0;p<m.length;p+=1)m[p]!==u&&m[p]instanceof f&&d(m[p]);else m instanceof f&&u!==m&&d(m)}function l(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}n("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(u=>{if(e.controller.control||(e.controller.control=[]),u&&u.swiper)e.controller.control.push(u.swiper);else if(u){let f=`${e.params.eventsPrefix}init`,m=p=>{e.controller.control.push(p.detail[0]),e.update(),u.removeEventListener(f,m)};u.addEventListener(f,m)}});return}e.controller.control=e.params.controller.control}),n("update",()=>{l()}),n("resize",()=>{l()}),n("observerUpdate",()=>{l()}),n("setTranslate",(c,u,f)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(u,f)}),n("setTransition",(c,u,f)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(u,f)}),Object.assign(e.controller,{setTranslate:o,setTransition:a})}function kp(i){let{swiper:e,extendParams:t,on:n}=i;t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),e.a11y={clicked:!1};let s=null,r,o,a=new Date().getTime();function l(w){let E=s;E.length!==0&&fe(E,w)}function c(w){w===void 0&&(w=16);let E=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(w).replace(/x/g,E)}function u(w){w=V(w),w.forEach(E=>{E.setAttribute("tabIndex","0")})}function f(w){w=V(w),w.forEach(E=>{E.setAttribute("tabIndex","-1")})}function m(w,E){w=V(w),w.forEach(P=>{P.setAttribute("role",E)})}function p(w,E){w=V(w),w.forEach(P=>{P.setAttribute("aria-roledescription",E)})}function d(w,E){w=V(w),w.forEach(P=>{P.setAttribute("aria-controls",E)})}function h(w,E){w=V(w),w.forEach(P=>{P.setAttribute("aria-label",E)})}function g(w,E){w=V(w),w.forEach(P=>{P.setAttribute("id",E)})}function v(w,E){w=V(w),w.forEach(P=>{P.setAttribute("aria-live",E)})}function y(w){w=V(w),w.forEach(E=>{E.setAttribute("aria-disabled",!0)})}function _(w){w=V(w),w.forEach(E=>{E.setAttribute("aria-disabled",!1)})}function b(w){if(w.keyCode!==13&&w.keyCode!==32)return;let E=e.params.a11y,P=w.target;if(!(e.pagination&&e.pagination.el&&(P===e.pagination.el||e.pagination.el.contains(w.target))&&!w.target.matches(Ge(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){let B=V(e.navigation.prevEl);V(e.navigation.nextEl).includes(P)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?l(E.lastSlideMessage):l(E.nextSlideMessage)),B.includes(P)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?l(E.firstSlideMessage):l(E.prevSlideMessage))}e.pagination&&P.matches(Ge(e.params.pagination.bulletClass))&&P.click()}}function k(){if(e.params.loop||e.params.rewind||!e.navigation)return;let{nextEl:w,prevEl:E}=e.navigation;E&&(e.isBeginning?(y(E),f(E)):(_(E),u(E))),w&&(e.isEnd?(y(w),f(w)):(_(w),u(w)))}function O(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function x(){return O()&&e.params.pagination.clickable}function R(){let w=e.params.a11y;O()&&e.pagination.bullets.forEach(E=>{e.params.pagination.clickable&&(u(E),e.params.pagination.renderBullet||(m(E,"button"),h(E,w.paginationBulletMessage.replace(/\{\{index\}\}/,tn(E)+1)))),E.matches(Ge(e.params.pagination.bulletActiveClass))?E.setAttribute("aria-current","true"):E.removeAttribute("aria-current")})}let S=(w,E,P)=>{u(w),w.tagName!=="BUTTON"&&(m(w,"button"),w.addEventListener("keydown",b)),h(w,P),d(w,E)},L=w=>{o&&o!==w.target&&!o.contains(w.target)&&(r=!0),e.a11y.clicked=!0},$=()=>{r=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},N=w=>{a=new Date().getTime()},T=w=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus||new Date().getTime()-a<100)return;let E=w.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!E||!e.slides.includes(E))return;o=E;let P=e.slides.indexOf(E)===e.activeIndex,B=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(E);P||B||w.sourceCapabilities&&w.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{r||(e.params.loop?e.slideToLoop(e.getSlideIndexWhenGrid(parseInt(E.getAttribute("data-swiper-slide-index"))),0):e.slideTo(e.getSlideIndexWhenGrid(e.slides.indexOf(E)),0),r=!1)}))},I=()=>{let w=e.params.a11y;w.itemRoleDescriptionMessage&&p(e.slides,w.itemRoleDescriptionMessage),w.slideRole&&m(e.slides,w.slideRole);let E=e.slides.length;w.slideLabelMessage&&e.slides.forEach((P,B)=>{let Q=e.params.loop?parseInt(P.getAttribute("data-swiper-slide-index"),10):B,ee=w.slideLabelMessage.replace(/\{\{index\}\}/,Q+1).replace(/\{\{slidesLength\}\}/,E);h(P,ee)})},z=()=>{let w=e.params.a11y;e.el.append(s);let E=e.el;w.containerRoleDescriptionMessage&&p(E,w.containerRoleDescriptionMessage),w.containerMessage&&h(E,w.containerMessage),w.containerRole&&m(E,w.containerRole);let P=e.wrapperEl,B=w.id||P.getAttribute("id")||`swiper-wrapper-${c(16)}`,Q=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";g(P,B),v(P,Q),I();let{nextEl:ee,prevEl:ce}=e.navigation?e.navigation:{};ee=V(ee),ce=V(ce),ee&&ee.forEach(D=>S(D,B,w.nextSlideMessage)),ce&&ce.forEach(D=>S(D,B,w.prevSlideMessage)),x()&&V(e.pagination.el).forEach(M=>{M.addEventListener("keydown",b)}),ye().addEventListener("visibilitychange",N),e.el.addEventListener("focus",T,!0),e.el.addEventListener("focus",T,!0),e.el.addEventListener("pointerdown",L,!0),e.el.addEventListener("pointerup",$,!0)};function C(){s&&s.remove();let{nextEl:w,prevEl:E}=e.navigation?e.navigation:{};w=V(w),E=V(E),w&&w.forEach(B=>B.removeEventListener("keydown",b)),E&&E.forEach(B=>B.removeEventListener("keydown",b)),x()&&V(e.pagination.el).forEach(Q=>{Q.removeEventListener("keydown",b)}),ye().removeEventListener("visibilitychange",N),e.el&&typeof e.el!="string"&&(e.el.removeEventListener("focus",T,!0),e.el.removeEventListener("pointerdown",L,!0),e.el.removeEventListener("pointerup",$,!0))}n("beforeInit",()=>{s=Ee("span",e.params.a11y.notificationClass),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true")}),n("afterInit",()=>{e.params.a11y.enabled&&z()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&I()}),n("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&k()}),n("paginationUpdate",()=>{e.params.a11y.enabled&&R()}),n("destroy",()=>{e.params.a11y.enabled&&C()})}function Ap(i){let{swiper:e,extendParams:t,on:n}=i;t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let s=!1,r={},o=p=>p.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),a=p=>{let d=Fe(),h;p?h=new URL(p):h=d.location;let g=h.pathname.slice(1).split("/").filter(b=>b!==""),v=g.length,y=g[v-2],_=g[v-1];return{key:y,value:_}},l=(p,d)=>{let h=Fe();if(!s||!e.params.history.enabled)return;let g;e.params.url?g=new URL(e.params.url):g=h.location;let v=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${d}"]`):e.slides[d],y=o(v.getAttribute("data-history"));if(e.params.history.root.length>0){let b=e.params.history.root;b[b.length-1]==="/"&&(b=b.slice(0,b.length-1)),y=`${b}/${p?`${p}/`:""}${y}`}else g.pathname.includes(p)||(y=`${p?`${p}/`:""}${y}`);e.params.history.keepQuery&&(y+=g.search);let _=h.history.state;_&&_.value===y||(e.params.history.replaceState?h.history.replaceState({value:y},null,y):h.history.pushState({value:y},null,y))},c=(p,d,h)=>{if(d)for(let g=0,v=e.slides.length;g<v;g+=1){let y=e.slides[g];if(o(y.getAttribute("data-history"))===d){let b=e.getSlideIndex(y);e.slideTo(b,p,h)}}else e.slideTo(0,p,h)},u=()=>{r=a(e.params.url),c(e.params.speed,r.value,!1)},f=()=>{let p=Fe();if(e.params.history){if(!p.history||!p.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(s=!0,r=a(e.params.url),!r.key&&!r.value){e.params.history.replaceState||p.addEventListener("popstate",u);return}c(0,r.value,e.params.runCallbacksOnInit),e.params.history.replaceState||p.addEventListener("popstate",u)}},m=()=>{let p=Fe();e.params.history.replaceState||p.removeEventListener("popstate",u)};n("init",()=>{e.params.history.enabled&&f()}),n("destroy",()=>{e.params.history.enabled&&m()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{s&&l(e.params.history.key,e.activeIndex)}),n("slideChange",()=>{s&&e.params.cssMode&&l(e.params.history.key,e.activeIndex)})}function Np(i){let{swiper:e,extendParams:t,emit:n,on:s}=i,r=!1,o=ye(),a=Fe();t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(m,p){if(e.virtual&&e.params.virtual.enabled){let d=e.slides.find(g=>g.getAttribute("data-hash")===p);return d?parseInt(d.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(Ne(e.slidesEl,`.${e.params.slideClass}[data-hash="${p}"], swiper-slide[data-hash="${p}"]`)[0])}}});let l=()=>{n("hashChange");let m=o.location.hash.replace("#",""),p=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],d=p?p.getAttribute("data-hash"):"";if(m!==d){let h=e.params.hashNavigation.getSlideIndex(e,m);if(typeof h>"u"||Number.isNaN(h))return;e.slideTo(h)}},c=()=>{if(!r||!e.params.hashNavigation.enabled)return;let m=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],p=m?m.getAttribute("data-hash")||m.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&a.history&&a.history.replaceState?(a.history.replaceState(null,null,`#${p}`||""),n("hashSet")):(o.location.hash=p||"",n("hashSet"))},u=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;r=!0;let m=o.location.hash.replace("#","");if(m){let d=e.params.hashNavigation.getSlideIndex(e,m);e.slideTo(d||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&a.addEventListener("hashchange",l)},f=()=>{e.params.hashNavigation.watchState&&a.removeEventListener("hashchange",l)};s("init",()=>{e.params.hashNavigation.enabled&&u()}),s("destroy",()=>{e.params.hashNavigation.enabled&&f()}),s("transitionEnd _freeModeNoMomentumRelease",()=>{r&&c()}),s("slideChange",()=>{r&&e.params.cssMode&&c()})}function Rp(i){let{swiper:e,extendParams:t,on:n,emit:s,params:r}=i;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=r&&r.autoplay?r.autoplay.delay:3e3,c=r&&r.autoplay?r.autoplay.delay:3e3,u,f=new Date().getTime(),m,p,d,h,g,v,y;function _(E){!e||e.destroyed||!e.wrapperEl||E.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",_),!(y||E.detail&&E.detail.bySwiperTouchMove)&&L())}let b=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?m=!0:m&&(c=u,m=!1);let E=e.autoplay.paused?u:f+c-new Date().getTime();e.autoplay.timeLeft=E,s("autoplayTimeLeft",E,E/l),a=requestAnimationFrame(()=>{b()})},k=()=>{let E;return e.virtual&&e.params.virtual.enabled?E=e.slides.find(B=>B.classList.contains("swiper-slide-active")):E=e.slides[e.activeIndex],E?parseInt(E.getAttribute("data-swiper-autoplay"),10):void 0},O=E=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),b();let P=typeof E>"u"?e.params.autoplay.delay:E;l=e.params.autoplay.delay,c=e.params.autoplay.delay;let B=k();!Number.isNaN(B)&&B>0&&typeof E>"u"&&(P=B,l=B,c=B),u=P;let Q=e.params.speed,ee=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(Q,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,Q,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(Q,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,Q,!0,!0),s("autoplay")),e.params.cssMode&&(f=new Date().getTime(),requestAnimationFrame(()=>{O()})))};return P>0?(clearTimeout(o),o=setTimeout(()=>{ee()},P)):requestAnimationFrame(()=>{ee()}),P},x=()=>{f=new Date().getTime(),e.autoplay.running=!0,O(),s("autoplayStart")},R=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),s("autoplayStop")},S=(E,P)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),E||(v=!0);let B=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",_):L()};if(e.autoplay.paused=!0,P){g&&(u=e.params.autoplay.delay),g=!1,B();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-f),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),B())},L=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(f=new Date().getTime(),v?(v=!1,O(u)):O(),e.autoplay.paused=!1,s("autoplayResume"))},$=()=>{if(e.destroyed||!e.autoplay.running)return;let E=ye();E.visibilityState==="hidden"&&(v=!0,S(!0)),E.visibilityState==="visible"&&L()},N=E=>{E.pointerType==="mouse"&&(v=!0,y=!0,!(e.animating||e.autoplay.paused)&&S(!0))},T=E=>{E.pointerType==="mouse"&&(y=!1,e.autoplay.paused&&L())},I=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",N),e.el.addEventListener("pointerleave",T))},z=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",N),e.el.removeEventListener("pointerleave",T))},C=()=>{ye().addEventListener("visibilitychange",$)},w=()=>{ye().removeEventListener("visibilitychange",$)};n("init",()=>{e.params.autoplay.enabled&&(I(),C(),x())}),n("destroy",()=>{z(),w(),e.autoplay.running&&R()}),n("_freeModeStaticRelease",()=>{(d||v)&&L()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?R():S(!0,!0)}),n("beforeTransitionStart",(E,P,B)=>{e.destroyed||!e.autoplay.running||(B||!e.params.autoplay.disableOnInteraction?S(!0,!0):R())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){R();return}p=!0,d=!1,v=!1,h=setTimeout(()=>{v=!0,d=!0,S(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(h),clearTimeout(o),e.params.autoplay.disableOnInteraction){d=!1,p=!1;return}d&&e.params.cssMode&&L(),d=!1,p=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(g=!0)}),Object.assign(e.autoplay,{start:x,stop:R,pause:S,resume:L})}function Dp(i){let{swiper:e,extendParams:t,on:n}=i;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let s=!1,r=!1;e.thumbs={swiper:null};function o(){let c=e.thumbs.swiper;if(!c||c.destroyed)return;let u=c.clickedIndex,f=c.clickedSlide;if(f&&f.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof u>"u"||u===null)return;let m;c.params.loop?m=parseInt(c.clickedSlide.getAttribute("data-swiper-slide-index"),10):m=u,e.params.loop?e.slideToLoop(m):e.slideTo(m)}function a(){let{thumbs:c}=e.params;if(s)return!1;s=!0;let u=e.constructor;if(c.swiper instanceof u){if(c.swiper.destroyed)return s=!1,!1;e.thumbs.swiper=c.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update()}else if(vu(c.swiper)){let f=Object.assign({},c.swiper);Object.assign(f,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new u(f),r=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",o),!0}function l(c){let u=e.thumbs.swiper;if(!u||u.destroyed)return;let f=u.params.slidesPerView==="auto"?u.slidesPerViewDynamic():u.params.slidesPerView,m=1,p=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(m=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(m=1),m=Math.floor(m),u.slides.forEach(g=>g.classList.remove(p)),u.params.loop||u.params.virtual&&u.params.virtual.enabled)for(let g=0;g<m;g+=1)Ne(u.slidesEl,`[data-swiper-slide-index="${e.realIndex+g}"]`).forEach(v=>{v.classList.add(p)});else for(let g=0;g<m;g+=1)u.slides[e.realIndex+g]&&u.slides[e.realIndex+g].classList.add(p);let d=e.params.thumbs.autoScrollOffset,h=d&&!u.params.loop;if(e.realIndex!==u.realIndex||h){let g=u.activeIndex,v,y;if(u.params.loop){let _=u.slides.find(b=>b.getAttribute("data-swiper-slide-index")===`${e.realIndex}`);v=u.slides.indexOf(_),y=e.activeIndex>e.previousIndex?"next":"prev"}else v=e.realIndex,y=v>e.previousIndex?"next":"prev";h&&(v+=y==="next"?d:-1*d),u.visibleSlidesIndexes&&u.visibleSlidesIndexes.indexOf(v)<0&&(u.params.centeredSlides?v>g?v=v-Math.floor(f/2)+1:v=v+Math.floor(f/2)-1:v>g&&u.params.slidesPerGroup,u.slideTo(v,c?0:void 0))}}n("beforeInit",()=>{let{thumbs:c}=e.params;if(!(!c||!c.swiper))if(typeof c.swiper=="string"||c.swiper instanceof HTMLElement){let u=ye(),f=()=>{let p=typeof c.swiper=="string"?u.querySelector(c.swiper):c.swiper;if(p&&p.swiper)c.swiper=p.swiper,a(),l(!0);else if(p){let d=`${e.params.eventsPrefix}init`,h=g=>{c.swiper=g.detail[0],p.removeEventListener(d,h),a(),l(!0),c.swiper.update(),e.update()};p.addEventListener(d,h)}return p},m=()=>{if(e.destroyed)return;f()||requestAnimationFrame(m)};requestAnimationFrame(m)}else a(),l(!0)}),n("slideChange update resize observerUpdate",()=>{l()}),n("setTransition",(c,u)=>{let f=e.thumbs.swiper;!f||f.destroyed||f.setTransition(u)}),n("beforeDestroy",()=>{let c=e.thumbs.swiper;!c||c.destroyed||r&&c.destroy()}),Object.assign(e.thumbs,{init:a,update:l})}function Op(i){let{swiper:e,extendParams:t,emit:n,once:s}=i;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(e.params.cssMode)return;let l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function o(){if(e.params.cssMode)return;let{touchEventsData:l,touches:c}=e;l.velocities.length===0&&l.velocities.push({position:c[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[e.isHorizontal()?"currentX":"currentY"],time:rt()})}function a(l){let{currentPos:c}=l;if(e.params.cssMode)return;let{params:u,wrapperEl:f,rtlTranslate:m,snapGrid:p,touchEventsData:d}=e,g=rt()-d.touchStartTime;if(c<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(c>-e.maxTranslate()){e.slides.length<p.length?e.slideTo(p.length-1):e.slideTo(e.slides.length-1);return}if(u.freeMode.momentum){if(d.velocities.length>1){let R=d.velocities.pop(),S=d.velocities.pop(),L=R.position-S.position,$=R.time-S.time;e.velocity=L/$,e.velocity/=2,Math.abs(e.velocity)<u.freeMode.minimumVelocity&&(e.velocity=0),($>150||rt()-R.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=u.freeMode.momentumVelocityRatio,d.velocities.length=0;let v=1e3*u.freeMode.momentumRatio,y=e.velocity*v,_=e.translate+y;m&&(_=-_);let b=!1,k,O=Math.abs(e.velocity)*20*u.freeMode.momentumBounceRatio,x;if(_<e.maxTranslate())u.freeMode.momentumBounce?(_+e.maxTranslate()<-O&&(_=e.maxTranslate()-O),k=e.maxTranslate(),b=!0,d.allowMomentumBounce=!0):_=e.maxTranslate(),u.loop&&u.centeredSlides&&(x=!0);else if(_>e.minTranslate())u.freeMode.momentumBounce?(_-e.minTranslate()>O&&(_=e.minTranslate()+O),k=e.minTranslate(),b=!0,d.allowMomentumBounce=!0):_=e.minTranslate(),u.loop&&u.centeredSlides&&(x=!0);else if(u.freeMode.sticky){let R;for(let S=0;S<p.length;S+=1)if(p[S]>-_){R=S;break}Math.abs(p[R]-_)<Math.abs(p[R-1]-_)||e.swipeDirection==="next"?_=p[R]:_=p[R-1],_=-_}if(x&&s("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(m?v=Math.abs((-_-e.translate)/e.velocity):v=Math.abs((_-e.translate)/e.velocity),u.freeMode.sticky){let R=Math.abs((m?-_:_)-e.translate),S=e.slidesSizesGrid[e.activeIndex];R<S?v=u.speed:R<2*S?v=u.speed*1.5:v=u.speed*2.5}}else if(u.freeMode.sticky){e.slideToClosest();return}u.freeMode.momentumBounce&&b?(e.updateProgress(k),e.setTransition(v),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating=!0,Rt(f,()=>{!e||e.destroyed||!d.allowMomentumBounce||(n("momentumBounce"),e.setTransition(u.speed),setTimeout(()=>{e.setTranslate(k),Rt(f,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(_),e.setTransition(v),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,Rt(f,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(_),e.updateActiveIndex(),e.updateSlidesClasses()}else if(u.freeMode.sticky){e.slideToClosest();return}else u.freeMode&&n("_freeModeNoMomentumRelease");(!u.freeMode.momentum||g>=u.longSwipesMs)&&(n("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:r,onTouchMove:o,onTouchEnd:a}})}function Lp(i){let{swiper:e,extendParams:t,on:n}=i;t({grid:{rows:1,fill:"column"}});let s,r,o,a,l=()=>{let h=e.params.spaceBetween;return typeof h=="string"&&h.indexOf("%")>=0?h=parseFloat(h.replace("%",""))/100*e.size:typeof h=="string"&&(h=parseFloat(h)),h},c=h=>{let{slidesPerView:g}=e.params,{rows:v,fill:y}=e.params.grid,_=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:h.length;o=Math.floor(_/v),Math.floor(_/v)===_/v?s=_:s=Math.ceil(_/v)*v,g!=="auto"&&y==="row"&&(s=Math.max(s,g*v)),r=s/v},u=()=>{e.slides&&e.slides.forEach(h=>{h.swiperSlideGridSet&&(h.style.height="",h.style[e.getDirectionLabel("margin-top")]="")})},f=(h,g,v)=>{let{slidesPerGroup:y}=e.params,_=l(),{rows:b,fill:k}=e.params.grid,O=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:v.length,x,R,S;if(k==="row"&&y>1){let L=Math.floor(h/(y*b)),$=h-b*y*L,N=L===0?y:Math.min(Math.ceil((O-L*b*y)/b),y);S=Math.floor($/N),R=$-S*N+L*y,x=R+S*s/b,g.style.order=x}else k==="column"?(R=Math.floor(h/b),S=h-R*b,(R>o||R===o&&S===b-1)&&(S+=1,S>=b&&(S=0,R+=1))):(S=Math.floor(h/r),R=h-S*r);g.row=S,g.column=R,g.style.height=`calc((100% - ${(b-1)*_}px) / ${b})`,g.style[e.getDirectionLabel("margin-top")]=S!==0?_&&`${_}px`:"",g.swiperSlideGridSet=!0},m=(h,g)=>{let{centeredSlides:v,roundLengths:y}=e.params,_=l(),{rows:b}=e.params.grid;if(e.virtualSize=(h+_)*s,e.virtualSize=Math.ceil(e.virtualSize/b)-_,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+_}px`),v){let k=[];for(let O=0;O<g.length;O+=1){let x=g[O];y&&(x=Math.floor(x)),g[O]<e.virtualSize+g[0]&&k.push(x)}g.splice(0,g.length),g.push(...k)}},p=()=>{a=e.params.grid&&e.params.grid.rows>1},d=()=>{let{params:h,el:g}=e,v=h.grid&&h.grid.rows>1;a&&!v?(g.classList.remove(`${h.containerModifierClass}grid`,`${h.containerModifierClass}grid-column`),o=1,e.emitContainerClasses()):!a&&v&&(g.classList.add(`${h.containerModifierClass}grid`),h.grid.fill==="column"&&g.classList.add(`${h.containerModifierClass}grid-column`),e.emitContainerClasses()),a=v};n("init",p),n("update",d),e.grid={initSlides:c,unsetSlides:u,updateSlide:f,updateWrapperSize:m}}function wv(i){let e=this,{params:t,slidesEl:n}=e;t.loop&&e.loopDestroy();let s=r=>{if(typeof r=="string"){let o=document.createElement("div");fe(o,r),n.append(o.children[0]),fe(o,"")}else n.append(r)};if(typeof i=="object"&&"length"in i)for(let r=0;r<i.length;r+=1)i[r]&&s(i[r]);else s(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update()}function bv(i){let e=this,{params:t,activeIndex:n,slidesEl:s}=e;t.loop&&e.loopDestroy();let r=n+1,o=a=>{if(typeof a=="string"){let l=document.createElement("div");fe(l,a),s.prepend(l.children[0]),fe(l,"")}else s.prepend(a)};if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)i[a]&&o(i[a]);r=n+i.length}else o(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),e.slideTo(r,0,!1)}function Ev(i,e){let t=this,{params:n,activeIndex:s,slidesEl:r}=t,o=s;n.loop&&(o-=t.loopedSlides,t.loopDestroy(),t.recalcSlides());let a=t.slides.length;if(i<=0){t.prependSlide(e);return}if(i>=a){t.appendSlide(e);return}let l=o>i?o+1:o,c=[];for(let u=a-1;u>=i;u-=1){let f=t.slides[u];f.remove(),c.unshift(f)}if(typeof e=="object"&&"length"in e){for(let u=0;u<e.length;u+=1)e[u]&&r.append(e[u]);l=o>i?o+e.length:o}else r.append(e);for(let u=0;u<c.length;u+=1)r.append(c[u]);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),n.loop?t.slideTo(l+t.loopedSlides,0,!1):t.slideTo(l,0,!1)}function Sv(i){let e=this,{params:t,activeIndex:n}=e,s=n;t.loop&&(s-=e.loopedSlides,e.loopDestroy());let r=s,o;if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)o=i[a],e.slides[o]&&e.slides[o].remove(),o<r&&(r-=1);r=Math.max(r,0)}else o=i,e.slides[o]&&e.slides[o].remove(),o<r&&(r-=1),r=Math.max(r,0);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),t.loop?e.slideTo(r+e.loopedSlides,0,!1):e.slideTo(r,0,!1)}function Cv(){let i=this,e=[];for(let t=0;t<i.slides.length;t+=1)e.push(t);i.removeSlide(e)}function Fp(i){let{swiper:e}=i;Object.assign(e,{appendSlide:wv.bind(e),prependSlide:bv.bind(e),addSlide:Ev.bind(e),removeSlide:Sv.bind(e),removeAllSlides:Cv.bind(e)})}function Ke(i){let{effect:e,swiper:t,on:n,setTranslate:s,setTransition:r,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:c}=i;n("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);let f=o?o():{};Object.assign(t.params,f),Object.assign(t.originalParams,f)}),n("setTranslate _virtualUpdated",()=>{t.params.effect===e&&s()}),n("setTransition",(f,m)=>{t.params.effect===e&&r(m)}),n("transitionEnd",()=>{if(t.params.effect===e&&l){if(!c||!c().slideShadows)return;t.slides.forEach(f=>{f.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(m=>m.remove())}),l()}});let u;n("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(u=!0),requestAnimationFrame(()=>{u&&t.slides&&t.slides.length&&(s(),u=!1)}))})}function ht(i,e){let t=Ae(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function Vt(i){let{swiper:e,duration:t,transformElements:n,allSlides:s}=i,{activeIndex:r}=e,o=a=>a.parentElement?a.parentElement:e.slides.find(c=>c.shadowRoot&&c.shadowRoot===a.parentNode);if(e.params.virtualTranslate&&t!==0){let a=!1,l;s?l=n:l=n.filter(c=>{let u=c.classList.contains("swiper-slide-transform")?o(c):c;return e.getSlideIndex(u)===r}),l.forEach(c=>{Rt(c,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;let u=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(u)})})}}function zp(i){let{swiper:e,extendParams:t,on:n}=i;t({fadeEffect:{crossFade:!1}}),Ke({effect:"fade",swiper:e,on:n,setTranslate:()=>{let{slides:o}=e,a=e.params.fadeEffect;for(let l=0;l<o.length;l+=1){let c=e.slides[l],f=-c.swiperSlideOffset;e.params.virtualTranslate||(f-=e.translate);let m=0;e.isHorizontal()||(m=f,f=0);let p=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(c.progress),0):1+Math.min(Math.max(c.progress,-1),0),d=ht(a,c);d.style.opacity=p,d.style.transform=`translate3d(${f}px, ${m}px, 0px)`}},setTransition:o=>{let a=e.slides.map(l=>Ae(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`}),Vt({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function $p(i){let{swiper:e,extendParams:t,on:n}=i;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});let s=(l,c,u)=>{let f=u?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),m=u?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");f||(f=Ee("div",`swiper-slide-shadow-cube swiper-slide-shadow-${u?"left":"top"}`.split(" ")),l.append(f)),m||(m=Ee("div",`swiper-slide-shadow-cube swiper-slide-shadow-${u?"right":"bottom"}`.split(" ")),l.append(m)),f&&(f.style.opacity=Math.max(-c,0)),m&&(m.style.opacity=Math.max(c,0))};Ke({effect:"cube",swiper:e,on:n,setTranslate:()=>{let{el:l,wrapperEl:c,slides:u,width:f,height:m,rtlTranslate:p,size:d,browser:h}=e,g=Dt(e),v=e.params.cubeEffect,y=e.isHorizontal(),_=e.virtual&&e.params.virtual.enabled,b=0,k;v.shadow&&(y?(k=e.wrapperEl.querySelector(".swiper-cube-shadow"),k||(k=Ee("div","swiper-cube-shadow"),e.wrapperEl.append(k)),k.style.height=`${f}px`):(k=l.querySelector(".swiper-cube-shadow"),k||(k=Ee("div","swiper-cube-shadow"),l.append(k))));for(let x=0;x<u.length;x+=1){let R=u[x],S=x;_&&(S=parseInt(R.getAttribute("data-swiper-slide-index"),10));let L=S*90,$=Math.floor(L/360);p&&(L=-L,$=Math.floor(-L/360));let N=Math.max(Math.min(R.progress,1),-1),T=0,I=0,z=0;S%4===0?(T=-$*4*d,z=0):(S-1)%4===0?(T=0,z=-$*4*d):(S-2)%4===0?(T=d+$*4*d,z=d):(S-3)%4===0&&(T=-d,z=3*d+d*4*$),p&&(T=-T),y||(I=T,T=0);let C=`rotateX(${g(y?0:-L)}deg) rotateY(${g(y?L:0)}deg) translate3d(${T}px, ${I}px, ${z}px)`;N<=1&&N>-1&&(b=S*90+N*90,p&&(b=-S*90-N*90)),R.style.transform=C,v.slideShadows&&s(R,N,y)}if(c.style.transformOrigin=`50% 50% -${d/2}px`,c.style["-webkit-transform-origin"]=`50% 50% -${d/2}px`,v.shadow)if(y)k.style.transform=`translate3d(0px, ${f/2+v.shadowOffset}px, ${-f/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${v.shadowScale})`;else{let x=Math.abs(b)-Math.floor(Math.abs(b)/90)*90,R=1.5-(Math.sin(x*2*Math.PI/360)/2+Math.cos(x*2*Math.PI/360)/2),S=v.shadowScale,L=v.shadowScale/R,$=v.shadowOffset;k.style.transform=`scale3d(${S}, 1, ${L}) translate3d(0px, ${m/2+$}px, ${-m/2/L}px) rotateX(-89.99deg)`}let O=(h.isSafari||h.isWebView)&&h.needPerspectiveFix?-d/2:0;c.style.transform=`translate3d(0px,0,${O}px) rotateX(${g(e.isHorizontal()?0:b)}deg) rotateY(${g(e.isHorizontal()?-b:0)}deg)`,c.style.setProperty("--swiper-cube-translate-z",`${O}px`)},setTransition:l=>{let{el:c,slides:u}=e;if(u.forEach(f=>{f.style.transitionDuration=`${l}ms`,f.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(m=>{m.style.transitionDuration=`${l}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){let f=c.querySelector(".swiper-cube-shadow");f&&(f.style.transitionDuration=`${l}ms`)}},recreateShadows:()=>{let l=e.isHorizontal();e.slides.forEach(c=>{let u=Math.max(Math.min(c.progress,1),-1);s(c,u,l)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function ft(i,e,t){let n=`swiper-slide-shadow${t?`-${t}`:""}${i?` swiper-slide-shadow-${i}`:""}`,s=Ae(e),r=s.querySelector(`.${n.split(" ").join(".")}`);return r||(r=Ee("div",n.split(" ")),s.append(r)),r}function Bp(i){let{swiper:e,extendParams:t,on:n}=i;t({flipEffect:{slideShadows:!0,limitRotation:!0}});let s=(l,c)=>{let u=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),f=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");u||(u=ft("flip",l,e.isHorizontal()?"left":"top")),f||(f=ft("flip",l,e.isHorizontal()?"right":"bottom")),u&&(u.style.opacity=Math.max(-c,0)),f&&(f.style.opacity=Math.max(c,0))};Ke({effect:"flip",swiper:e,on:n,setTranslate:()=>{let{slides:l,rtlTranslate:c}=e,u=e.params.flipEffect,f=Dt(e);for(let m=0;m<l.length;m+=1){let p=l[m],d=p.progress;e.params.flipEffect.limitRotation&&(d=Math.max(Math.min(p.progress,1),-1));let h=p.swiperSlideOffset,v=-180*d,y=0,_=e.params.cssMode?-h-e.translate:-h,b=0;e.isHorizontal()?c&&(v=-v):(b=_,_=0,y=-v,v=0),p.style.zIndex=-Math.abs(Math.round(d))+l.length,u.slideShadows&&s(p,d);let k=`translate3d(${_}px, ${b}px, 0px) rotateX(${f(y)}deg) rotateY(${f(v)}deg)`,O=ht(u,p);O.style.transform=k}},setTransition:l=>{let c=e.slides.map(u=>Ae(u));c.forEach(u=>{u.style.transitionDuration=`${l}ms`,u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(f=>{f.style.transitionDuration=`${l}ms`})}),Vt({swiper:e,duration:l,transformElements:c})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(l=>{let c=l.progress;e.params.flipEffect.limitRotation&&(c=Math.max(Math.min(l.progress,1),-1)),s(l,c)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function Wp(i){let{swiper:e,extendParams:t,on:n}=i;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Ke({effect:"coverflow",swiper:e,on:n,setTranslate:()=>{let{width:o,height:a,slides:l,slidesSizesGrid:c}=e,u=e.params.coverflowEffect,f=e.isHorizontal(),m=e.translate,p=f?-m+o/2:-m+a/2,d=f?u.rotate:-u.rotate,h=u.depth,g=Dt(e);for(let v=0,y=l.length;v<y;v+=1){let _=l[v],b=c[v],k=_.swiperSlideOffset,O=(p-k-b/2)/b,x=typeof u.modifier=="function"?u.modifier(O):O*u.modifier,R=f?d*x:0,S=f?0:d*x,L=-h*Math.abs(x),$=u.stretch;typeof $=="string"&&$.indexOf("%")!==-1&&($=parseFloat(u.stretch)/100*b);let N=f?0:$*x,T=f?$*x:0,I=1-(1-u.scale)*Math.abs(x);Math.abs(T)<.001&&(T=0),Math.abs(N)<.001&&(N=0),Math.abs(L)<.001&&(L=0),Math.abs(R)<.001&&(R=0),Math.abs(S)<.001&&(S=0),Math.abs(I)<.001&&(I=0);let z=`translate3d(${T}px,${N}px,${L}px)  rotateX(${g(S)}deg) rotateY(${g(R)}deg) scale(${I})`,C=ht(u,_);if(C.style.transform=z,_.style.zIndex=-Math.abs(Math.round(x))+1,u.slideShadows){let w=f?_.querySelector(".swiper-slide-shadow-left"):_.querySelector(".swiper-slide-shadow-top"),E=f?_.querySelector(".swiper-slide-shadow-right"):_.querySelector(".swiper-slide-shadow-bottom");w||(w=ft("coverflow",_,f?"left":"top")),E||(E=ft("coverflow",_,f?"right":"bottom")),w&&(w.style.opacity=x>0?x:0),E&&(E.style.opacity=-x>0?-x:0)}}},setTransition:o=>{e.slides.map(l=>Ae(l)).forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${o}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function Up(i){let{swiper:e,extendParams:t,on:n}=i;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});let s=a=>typeof a=="string"?a:`${a}px`;Ke({effect:"creative",swiper:e,on:n,setTranslate:()=>{let{slides:a,wrapperEl:l,slidesSizesGrid:c}=e,u=e.params.creativeEffect,{progressMultiplier:f}=u,m=e.params.centeredSlides,p=Dt(e);if(m){let d=c[0]/2-e.params.slidesOffsetBefore||0;l.style.transform=`translateX(calc(50% - ${d}px))`}for(let d=0;d<a.length;d+=1){let h=a[d],g=h.progress,v=Math.min(Math.max(h.progress,-u.limitProgress),u.limitProgress),y=v;m||(y=Math.min(Math.max(h.originalProgress,-u.limitProgress),u.limitProgress));let _=h.swiperSlideOffset,b=[e.params.cssMode?-_-e.translate:-_,0,0],k=[0,0,0],O=!1;e.isHorizontal()||(b[1]=b[0],b[0]=0);let x={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};v<0?(x=u.next,O=!0):v>0&&(x=u.prev,O=!0),b.forEach((I,z)=>{b[z]=`calc(${I}px + (${s(x.translate[z])} * ${Math.abs(v*f)}))`}),k.forEach((I,z)=>{let C=x.rotate[z]*Math.abs(v*f);k[z]=C}),h.style.zIndex=-Math.abs(Math.round(g))+a.length;let R=b.join(", "),S=`rotateX(${p(k[0])}deg) rotateY(${p(k[1])}deg) rotateZ(${p(k[2])}deg)`,L=y<0?`scale(${1+(1-x.scale)*y*f})`:`scale(${1-(1-x.scale)*y*f})`,$=y<0?1+(1-x.opacity)*y*f:1-(1-x.opacity)*y*f,N=`translate3d(${R}) ${S} ${L}`;if(O&&x.shadow||!O){let I=h.querySelector(".swiper-slide-shadow");if(!I&&x.shadow&&(I=ft("creative",h)),I){let z=u.shadowPerProgress?v*(1/u.limitProgress):v;I.style.opacity=Math.min(Math.max(Math.abs(z),0),1)}}let T=ht(u,h);T.style.transform=N,T.style.opacity=$,x.origin&&(T.style.transformOrigin=x.origin)}},setTransition:a=>{let l=e.slides.map(c=>Ae(c));l.forEach(c=>{c.style.transitionDuration=`${a}ms`,c.querySelectorAll(".swiper-slide-shadow").forEach(u=>{u.style.transitionDuration=`${a}ms`})}),Vt({swiper:e,duration:a,transformElements:l,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function jp(i){let{swiper:e,extendParams:t,on:n}=i;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),Ke({effect:"cards",swiper:e,on:n,setTranslate:()=>{let{slides:o,activeIndex:a,rtlTranslate:l}=e,c=e.params.cardsEffect,{startTranslate:u,isTouched:f}=e.touchEventsData,m=l?-e.translate:e.translate;for(let p=0;p<o.length;p+=1){let d=o[p],h=d.progress,g=Math.min(Math.max(h,-4),4),v=d.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(v-=o[0].swiperSlideOffset);let y=e.params.cssMode?-v-e.translate:-v,_=0,b=-100*Math.abs(g),k=1,O=-c.perSlideRotate*g,x=c.perSlideOffset-Math.abs(g)*.75,R=e.virtual&&e.params.virtual.enabled?e.virtual.from+p:p,S=(R===a||R===a-1)&&g>0&&g<1&&(f||e.params.cssMode)&&m<u,L=(R===a||R===a+1)&&g<0&&g>-1&&(f||e.params.cssMode)&&m>u;if(S||L){let I=(1-Math.abs((Math.abs(g)-.5)/.5))**.5;O+=-28*g*I,k+=-.5*I,x+=96*I,_=`${-25*I*Math.abs(g)}%`}if(g<0?y=`calc(${y}px ${l?"-":"+"} (${x*Math.abs(g)}%))`:g>0?y=`calc(${y}px ${l?"-":"+"} (-${x*Math.abs(g)}%))`:y=`${y}px`,!e.isHorizontal()){let I=_;_=y,y=I}let $=g<0?`${1+(1-k)*g}`:`${1-(1-k)*g}`,N=`
        translate3d(${y}, ${_}, ${b}px)
        rotateZ(${c.rotate?l?-O:O:0}deg)
        scale(${$})
      `;if(c.slideShadows){let I=d.querySelector(".swiper-slide-shadow");I||(I=ft("cards",d)),I&&(I.style.opacity=Math.min(Math.max((Math.abs(g)-.5)/.5,0),1))}d.style.zIndex=-Math.abs(Math.round(h))+o.length;let T=ht(c,d);T.style.transform=N}},setTransition:o=>{let a=e.slides.map(l=>Ae(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${o}ms`})}),Vt({swiper:e,duration:o,transformElements:a})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:e.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}var Tv=[bp,Ep,Sp,Cp,Tp,Ip,Pp,xp,Mp,kp,Ap,Np,Rp,Dp,Op,Lp,Fp,zp,$p,Bp,Wp,Up,jp];hs.use(Tv);var Gi=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ui(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"&&!i.__swiper__}function Ar(i,e){let t=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>t.indexOf(n)<0).forEach(n=>{typeof i[n]>"u"?i[n]=e[n]:ui(e[n])&&ui(i[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?i[n]=e[n]:Ar(i[n],e[n]):i[n]=e[n]})}function Hp(i){return i===void 0&&(i={}),i.navigation&&typeof i.navigation.nextEl>"u"&&typeof i.navigation.prevEl>"u"}function Vp(i){return i===void 0&&(i={}),i.pagination&&typeof i.pagination.el>"u"}function qp(i){return i===void 0&&(i={}),i.scrollbar&&typeof i.scrollbar.el>"u"}function Ki(i){return i===void 0&&(i=""),i.replace(/-[a-z]/g,e=>e.toUpperCase().replace("-",""))}function Yp(i){let{swiper:e,slides:t,passedParams:n,changedParams:s,nextEl:r,prevEl:o,scrollbarEl:a,paginationEl:l}=i,c=s.filter(S=>S!=="children"&&S!=="direction"&&S!=="wrapperClass"),{params:u,pagination:f,navigation:m,scrollbar:p,virtual:d,thumbs:h}=e,g,v,y,_,b,k,O,x;s.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&u.thumbs&&(!u.thumbs.swiper||u.thumbs.swiper.destroyed)&&(g=!0),s.includes("controller")&&n.controller&&n.controller.control&&u.controller&&!u.controller.control&&(v=!0),s.includes("pagination")&&n.pagination&&(n.pagination.el||l)&&(u.pagination||u.pagination===!1)&&f&&!f.el&&(y=!0),s.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(u.scrollbar||u.scrollbar===!1)&&p&&!p.el&&(_=!0),s.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||r)&&(u.navigation||u.navigation===!1)&&m&&!m.prevEl&&!m.nextEl&&(b=!0);let R=S=>{e[S]&&(e[S].destroy(),S==="navigation"?(e.isElement&&(e[S].prevEl.remove(),e[S].nextEl.remove()),u[S].prevEl=void 0,u[S].nextEl=void 0,e[S].prevEl=void 0,e[S].nextEl=void 0):(e.isElement&&e[S].el.remove(),u[S].el=void 0,e[S].el=void 0))};s.includes("loop")&&e.isElement&&(u.loop&&!n.loop?k=!0:!u.loop&&n.loop?O=!0:x=!0),c.forEach(S=>{if(ui(u[S])&&ui(n[S]))Object.assign(u[S],n[S]),(S==="navigation"||S==="pagination"||S==="scrollbar")&&"enabled"in n[S]&&!n[S].enabled&&R(S);else{let L=n[S];(L===!0||L===!1)&&(S==="navigation"||S==="pagination"||S==="scrollbar")?L===!1&&R(S):u[S]=n[S]}}),c.includes("controller")&&!v&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),s.includes("children")&&t&&d&&u.virtual.enabled?(d.slides=t,d.update(!0)):s.includes("virtual")&&d&&u.virtual.enabled&&(t&&(d.slides=t),d.update(!0)),s.includes("children")&&t&&u.loop&&(x=!0),g&&h.init()&&h.update(!0),v&&(e.controller.control=u.controller.control),y&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),f.init(),f.render(),f.update()),_&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(u.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),b&&(e.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),fe(r,e.hostEl.constructor.nextButtonSvg),r.part.add("button-next"),e.el.appendChild(r)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),fe(o,e.hostEl.constructor.prevButtonSvg),o.part.add("button-prev"),e.el.appendChild(o))),r&&(u.navigation.nextEl=r),o&&(u.navigation.prevEl=o),m.init(),m.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),s.includes("direction")&&e.changeDirection(n.direction,!1),(k||x)&&e.loopDestroy(),(O||x)&&e.loopCreate(),e.update()}var Gp=i=>{if(parseFloat(i)===Number(i))return Number(i);if(i==="true"||i==="")return!0;if(i==="false")return!1;if(i==="null")return null;if(i!=="undefined"){if(typeof i=="string"&&i.includes("{")&&i.includes("}")&&i.includes('"')){let e;try{e=JSON.parse(i)}catch{e=i}return e}return i}},Kp=["a11y","autoplay","controller","cards-effect","coverflow-effect","creative-effect","cube-effect","fade-effect","flip-effect","free-mode","grid","hash-navigation","history","keyboard","mousewheel","navigation","pagination","parallax","scrollbar","thumbs","virtual","zoom"];function Bl(i,e,t){let n={},s={};Ar(n,Eu);let r=[...Gi,"on"],o=r.map(l=>l.replace(/_/,""));r.forEach(l=>{l=l.replace("_",""),typeof i[l]<"u"&&(s[l]=i[l])});let a=[...i.attributes];return typeof e=="string"&&typeof t<"u"&&a.push({name:e,value:ui(t)?ue({},t):t}),a.forEach(l=>{let c=Kp.find(u=>l.name.startsWith(`${u}-`));if(c){let u=Ki(c),f=Ki(l.name.split(`${c}-`)[1]);typeof s[u]>"u"&&(s[u]={}),s[u]===!0&&(s[u]={enabled:!0}),s[u]===!1&&(s[u]={enabled:!1}),s[u][f]=Gp(l.value)}else{let u=Ki(l.name);if(!o.includes(u))return;let f=Gp(l.value);s[u]&&Kp.includes(l.name)&&!ui(f)?(s[u].constructor!==Object&&(s[u]={}),s[u].enabled=!!f):s[u]=f}}),Ar(n,s),n.navigation?n.navigation=ue({prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},n.navigation!==!0?n.navigation:{}):n.navigation===!1&&delete n.navigation,n.scrollbar?n.scrollbar=ue({el:".swiper-scrollbar"},n.scrollbar!==!0?n.scrollbar:{}):n.scrollbar===!1&&delete n.scrollbar,n.pagination?n.pagination=ue({el:".swiper-pagination"},n.pagination!==!0?n.pagination:{}):n.pagination===!1&&delete n.pagination,{params:n,passedParams:s}}var Iv=":host{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{width:100%;height:100%;margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android ::slotted(swiper-slide),.swiper-ios ::slotted(swiper-slide),.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}::slotted(swiper-slide){flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}::slotted(.swiper-slide-invisible-blank){visibility:hidden}.swiper-autoheight,.swiper-autoheight ::slotted(swiper-slide){height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden ::slotted(swiper-slide){transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d ::slotted(swiper-slide){transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode ::slotted(swiper-slide){scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode ::slotted(swiper-slide){scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered ::slotted(swiper-slide){scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal ::slotted(swiper-slide):first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical ::slotted(swiper-slide):first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-virtual ::slotted(swiper-slide){-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:host{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}::slotted(.swiper-slide-zoomed){cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode ::slotted(swiper-slide){transition-timing-function:ease-out}.swiper-fade ::slotted(swiper-slide){pointer-events:none;transition-property:opacity}.swiper-fade ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-fade ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-fade ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper.swiper-cube{overflow:visible}.swiper-cube ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-cube.swiper-rtl ::slotted(swiper-slide){transform-origin:100% 0}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-next),.swiper-cube ::slotted(.swiper-slide-prev){pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube ::slotted(.swiper-slide-next)+::slotted(swiper-slide){pointer-events:auto;visibility:visible}.swiper.swiper-flip{overflow:visible}.swiper-flip ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-flip ::slotted(.swiper-slide-active),.swiper-flip ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-creative ::slotted(swiper-slide){-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper.swiper-cards{overflow:visible}.swiper-cards ::slotted(swiper-slide){transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}",Pv="::slotted(.swiper-slide-shadow),::slotted(.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-top){position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}::slotted(.swiper-slide-shadow){background:rgba(0,0,0,.15)}::slotted(.swiper-slide-shadow-left){background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-right){background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-top){background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-bottom){background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear;width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-zoom-container){width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}::slotted(.swiper-zoom-container)>canvas,::slotted(.swiper-zoom-container)>img,::slotted(.swiper-zoom-container)>svg{max-width:100%;max-height:100%;object-fit:contain}",Wl=class{},Qp=typeof window>"u"||typeof HTMLElement>"u"?Wl:HTMLElement,Xp=`<svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.38296 20.0762C0.111788 19.805 0.111788 19.3654 0.38296 19.0942L9.19758 10.2796L0.38296 1.46497C0.111788 1.19379 0.111788 0.754138 0.38296 0.482966C0.654131 0.211794 1.09379 0.211794 1.36496 0.482966L10.4341 9.55214C10.8359 9.9539 10.8359 10.6053 10.4341 11.007L1.36496 20.0762C1.09379 20.3474 0.654131 20.3474 0.38296 20.0762Z" fill="currentColor"/></svg>
    `,Zp=(i,e)=>{if(typeof CSSStyleSheet<"u"&&i.adoptedStyleSheets){let t=new CSSStyleSheet;t.replaceSync(e),i.adoptedStyleSheets=[t]}else{let t=document.createElement("style");t.rel="stylesheet",t.textContent=e,i.appendChild(t)}},Nr=class extends Qp{constructor(){super(),this.attachShadow({mode:"open"})}static get nextButtonSvg(){return Xp}static get prevButtonSvg(){return Xp.replace("/></svg>",' transform-origin="center" transform="rotate(180)"/></svg>')}cssStyles(){return[Iv,...this.injectStyles&&Array.isArray(this.injectStyles)?this.injectStyles:[]].join(`
`)}cssLinks(){return this.injectStylesUrls||[]}calcSlideSlots(){let e=this.slideSlots||0,t=[...this.querySelectorAll("[slot^=slide-]")].map(n=>parseInt(n.getAttribute("slot").split("slide-")[1],10));if(this.slideSlots=t.length?Math.max(...t)+1:0,!!this.rendered){if(this.slideSlots>e)for(let n=e;n<this.slideSlots;n+=1){let s=document.createElement("swiper-slide");s.setAttribute("part",`slide slide-${n+1}`);let r=document.createElement("slot");r.setAttribute("name",`slide-${n+1}`),s.appendChild(r),this.shadowRoot.querySelector(".swiper-wrapper").appendChild(s)}else if(this.slideSlots<e){let n=this.swiper.slides;for(let s=n.length-1;s>=0;s-=1)s>this.slideSlots&&n[s].remove()}}}render(){if(this.rendered)return;this.calcSlideSlots();let e=this.cssStyles();this.slideSlots>0&&(e=e.replace(/::slotted\(([a-z-0-9.]*)\)/g,"$1")),e.length&&Zp(this.shadowRoot,e),this.cssLinks().forEach(n=>{if(this.shadowRoot.querySelector(`link[href="${n}"]`))return;let r=document.createElement("link");r.rel="stylesheet",r.href=n,this.shadowRoot.appendChild(r)});let t=document.createElement("div");t.classList.add("swiper"),t.part="container",fe(t,`
      <slot name="container-start"></slot>
      <div class="swiper-wrapper" part="wrapper">
        <slot></slot>
        ${Array.from({length:this.slideSlots}).map((n,s)=>`
        <swiper-slide part="slide slide-${s}">
          <slot name="slide-${s}"></slot>
        </swiper-slide>
        `).join("")}
      </div>
      <slot name="container-end"></slot>
      ${Hp(this.passedParams)?`
        <div part="button-prev" class="swiper-button-prev">${this.constructor.prevButtonSvg}</div>
        <div part="button-next" class="swiper-button-next">${this.constructor.nextButtonSvg}</div>
      `:""}
      ${Vp(this.passedParams)?`
        <div part="pagination" class="swiper-pagination"></div>
      `:""}
      ${qp(this.passedParams)?`
        <div part="scrollbar" class="swiper-scrollbar"></div>
      `:""}
    `),this.shadowRoot.appendChild(t),this.rendered=!0}initialize(){var e=this;if(this.swiper&&this.swiper.initialized)return;let{params:t,passedParams:n}=Bl(this);this.swiperParams=t,this.passedParams=n,delete this.swiperParams.init,this.render(),this.swiper=new hs(this.shadowRoot.querySelector(".swiper"),Kn(ue(ue({},t.virtual?{}:{observer:!0}),t),{touchEventsTarget:"container",onAny:function(s){s==="observerUpdate"&&e.calcSlideSlots();let r=t.eventsPrefix?`${t.eventsPrefix}${s.toLowerCase()}`:s.toLowerCase();for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];let c=new CustomEvent(r,{detail:a,bubbles:s!=="hashChange",cancelable:!0});e.dispatchEvent(c)}}))}connectedCallback(){this.swiper&&this.swiper.initialized&&this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||this.init===!1||this.getAttribute("init")==="false"||this.initialize()}disconnectedCallback(){this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||this.swiper&&this.swiper.destroy&&this.swiper.destroy()}updateSwiperOnPropChange(e,t){let{params:n,passedParams:s}=Bl(this,e,t);this.passedParams=s,this.swiperParams=n,!(this.swiper&&this.swiper.params[e]===t)&&Yp(ue(ue(ue({swiper:this.swiper,passedParams:this.passedParams,changedParams:[Ki(e)]},e==="navigation"&&s[e]?{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}:{}),e==="pagination"&&s[e]?{paginationEl:".swiper-pagination"}:{}),e==="scrollbar"&&s[e]?{scrollbarEl:".swiper-scrollbar"}:{}))}attributeChangedCallback(e,t,n){this.swiper&&this.swiper.initialized&&(t==="true"&&n===null&&(n=!1),this.updateSwiperOnPropChange(e,n))}static get observedAttributes(){return Gi.filter(t=>t.includes("_")).map(t=>t.replace(/[A-Z]/g,n=>`-${n}`).replace("_","").toLowerCase())}};Gi.forEach(i=>{i!=="init"&&(i=i.replace("_",""),Object.defineProperty(Nr.prototype,i,{configurable:!0,get(){return(this.passedParams||{})[i]},set(e){this.passedParams||(this.passedParams={}),this.passedParams[i]=e,this.swiper&&this.swiper.initialized&&this.updateSwiperOnPropChange(i,e)}}))});var Ul=class extends Qp{constructor(){super(),this.attachShadow({mode:"open"})}render(){let e=this.lazy||this.getAttribute("lazy")===""||this.getAttribute("lazy")==="true";if(Zp(this.shadowRoot,Pv),this.shadowRoot.appendChild(document.createElement("slot")),e){let t=document.createElement("div");t.classList.add("swiper-lazy-preloader"),t.part.add("preloader"),this.shadowRoot.appendChild(t)}}initialize(){this.render()}connectedCallback(){this.swiperLoopMoveDOM||this.initialize()}},Jp=()=>{typeof window>"u"||(window.customElements.get("swiper-container")||window.customElements.define("swiper-container",Nr),window.customElements.get("swiper-slide")||window.customElements.define("swiper-slide",Ul))};typeof window<"u"&&(window.SwiperElementRegisterParams=i=>{Gi.push(...i)});Jp();wt.production&&void 0;bc().bootstrapModule(wp).catch(i=>console.error(i));
